{"version":3,"sources":["pagebreak/plugin.min.js"],"names":["e","tinymce","util","Tools","resolve","n","g","getParam","u","m","a","transparentSrc","add","o","c","i","t","r","addCommand","insertContent","ui","registry","addButton","icon","tooltip","onAction","execCommand","addMenuItem","text","RegExp","replace","on","content","serializer","addNodeFilter","length","attr","indexOf","parent","schema","getBlockElements","name","type","value","raw","remove","target","nodeName","dom","hasClass"],"mappings":"CAQC,WAAW,aAAa,IAAIA,EAAEC,QAAQC,KAAKC,MAAMC,QAAQ,yBAAyBC,EAAEJ,QAAQC,KAAKC,MAAMC,QAAQ,eAAeE,EAAE,SAASN,GAAG,OAAOA,EAAEO,SAAS,yBAAwB,IAAKC,EAAE,gBAAgBC,EAAE,SAAST,GAAG,IAAIU,EAAE,aAAaL,EAAEM,eAAe,YAAYH,EAAE,oDAAoD,OAAOR,EAAE,MAAMU,EAAE,OAAOA,GAAGV,EAAEY,IAAI,aAAY,SAASZ,GAAG,IAAIU,EAAEL,EAAEQ,EAAEC,EAAEC,EAAEC,EAAEC,GAAGP,EAAEV,GAAGkB,WAAW,gBAAe,WAAWR,EAAES,cAAcV,EAAEH,EAAEI,SAAQL,EAAEL,GAAGoB,GAAGC,SAASC,UAAU,YAAY,CAACC,KAAK,aAAaC,QAAQ,aAAaC,SAAS,WAAW,OAAOpB,EAAEqB,YAAY,mBAAmBrB,EAAEe,GAAGC,SAASM,YAAY,YAAY,CAACC,KAAK,aAAaL,KAAK,aAAaE,SAAS,WAAW,OAAOpB,EAAEqB,YAAY,mBAAmBZ,GAAGD,EAAEb,GAAGO,SAAS,sBAAsB,4BAA4BQ,EAAE,WAAW,OAAOT,EAAEO,IAAIG,EAAE,IAAIa,OAAOf,EAAEgB,QAAQ,iCAAgC,SAAS9B,GAAG,MAAM,KAAKA,KAAI,MAAMa,EAAEkB,GAAG,oBAAmB,SAAS/B,GAAGA,EAAEgC,QAAQhC,EAAEgC,QAAQF,QAAQd,EAAEP,EAAEM,SAAQF,EAAEkB,GAAG,WAAU,WAAWlB,EAAEoB,WAAWC,cAAc,OAAM,SAASlC,GAAG,IAAI,IAAIU,EAAEL,EAAEW,EAAEhB,EAAEmC,OAAOnB,KAAK,IAAIX,GAAGK,EAAEV,EAAEgB,IAAIoB,KAAK,YAAY,IAAI/B,EAAEgC,QAAQ7B,GAAG,CAAC,IAAIS,EAAEP,EAAE4B,OAAO,GAAGzB,EAAE0B,OAAOC,mBAAmBvB,EAAEwB,OAAO1B,IAAI,CAACE,EAAEyB,KAAK,EAAEzB,EAAE0B,MAAM7B,EAAEG,EAAE2B,KAAI,EAAGlC,EAAEmC,SAAS,SAASnC,EAAEgC,KAAK,EAAEhC,EAAEiC,MAAM7B,EAAEJ,EAAEkC,KAAI,UAAS3B,EAAEjB,GAAG+B,GAAG,eAAc,SAAS/B,GAAG,QAAQA,EAAE8C,OAAOC,UAAU9B,EAAE+B,IAAIC,SAASjD,EAAE8C,OAAOtC,KAAKR,EAAEyC,KAAK,mBAA12C","file":"plugin.min.js","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.8.2 (2021-06-23)\n */\n!function(){\"use strict\";var e=tinymce.util.Tools.resolve(\"tinymce.PluginManager\"),n=tinymce.util.Tools.resolve(\"tinymce.Env\"),g=function(e){return e.getParam(\"pagebreak_split_block\",!1)},u=\"mce-pagebreak\",m=function(e){var a='<img src=\"'+n.transparentSrc+'\" class=\"'+u+'\" data-mce-resize=\"false\" data-mce-placeholder />';return e?\"<p>\"+a+\"</p>\":a};e.add(\"pagebreak\",function(e){var a,n,o,c,i,t,r;(a=e).addCommand(\"mcePageBreak\",function(){a.insertContent(m(g(a)))}),(n=e).ui.registry.addButton(\"pagebreak\",{icon:\"page-break\",tooltip:\"Page break\",onAction:function(){return n.execCommand(\"mcePageBreak\")}}),n.ui.registry.addMenuItem(\"pagebreak\",{text:\"Page break\",icon:\"page-break\",onAction:function(){return n.execCommand(\"mcePageBreak\")}}),c=(o=e).getParam(\"pagebreak_separator\",\"\\x3c!-- pagebreak --\\x3e\"),i=function(){return g(o)},t=new RegExp(c.replace(/[\\?\\.\\*\\[\\]\\(\\)\\{\\}\\+\\^\\$\\:]/g,function(e){return\"\\\\\"+e}),\"gi\"),o.on(\"BeforeSetContent\",function(e){e.content=e.content.replace(t,m(i()))}),o.on(\"PreInit\",function(){o.serializer.addNodeFilter(\"img\",function(e){for(var a,n,t=e.length;t--;)if((n=(a=e[t]).attr(\"class\"))&&-1!==n.indexOf(u)){var r=a.parent;if(o.schema.getBlockElements()[r.name]&&i()){r.type=3,r.value=c,r.raw=!0,a.remove();continue}a.type=3,a.value=c,a.raw=!0}})}),(r=e).on(\"ResolveName\",function(e){\"IMG\"===e.target.nodeName&&r.dom.hasClass(e.target,u)&&(e.name=\"pagebreak\")})})}();"]}