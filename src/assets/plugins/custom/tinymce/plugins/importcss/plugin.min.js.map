{"version":3,"sources":["importcss/plugin.min.js"],"names":["t","tinymce","util","Tools","resolve","v","f","m","h","d","getParam","o","r","e","Array","prototype","isPrototypeOf","constructor","name","String","i","push","l","n","length","Error","apply","p","indexOf","RegExp","test","x","exec","substr","split","join","c","makeMap","title","schema","getTextBlockElements","block","getBlockElements","toLowerCase","selector","inline","classes","attributes","class","P","y","on","addItemToGroup","addItem","toFormats","items","concat","g","s","map","extend","original","selectors","filter","item","text","menu","a","u","plugins","importcss","selector_converter","call","DOM","uniqueId","formatter","register","format","each","href","cacheSuffix","replace","documentBaseURI","toAbsolute","baseURL","imports","cssRules","rules","styleSheet","selectorText","trim","contentCSS","styleSheets","_","getDoc","grep","fire","add","convertSelectorToFormat"],"mappings":"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","file":"plugin.min.js","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.8.2 (2021-06-23)\n */\n!function(){\"use strict\";var n,t=tinymce.util.Tools.resolve(\"tinymce.PluginManager\"),v=tinymce.util.Tools.resolve(\"tinymce.dom.DOMUtils\"),f=tinymce.util.Tools.resolve(\"tinymce.EditorManager\"),m=tinymce.util.Tools.resolve(\"tinymce.Env\"),h=tinymce.util.Tools.resolve(\"tinymce.util.Tools\"),d=function(t){return t.getParam(\"importcss_selector_converter\")},o=(n=\"array\",function(t){return r=typeof(e=t),(null===e?\"null\":\"object\"==r&&(Array.prototype.isPrototypeOf(e)||e.constructor&&\"Array\"===e.constructor.name)?\"array\":\"object\"==r&&(String.prototype.isPrototypeOf(e)||e.constructor&&\"String\"===e.constructor.name)?\"string\":r)===n;var e,r}),i=Array.prototype.push,l=function(t,e){return function(t){for(var e=[],r=0,n=t.length;r<n;++r){if(!o(t[r]))throw new Error(\"Arr.flatten item \"+r+\" was not an array, input: \"+t);i.apply(e,t[r])}return e}(function(t,e){for(var r=t.length,n=new Array(r),o=0;o<r;o++){var i=t[o];n[o]=e(i,o)}return n}(t,e))},p=function(e){return\"string\"==typeof e?function(t){return-1!==t.indexOf(e)}:e instanceof RegExp?function(t){return e.test(t)}:e},_=function(s,t,a){var u=[],r={},l=function(t,e){var r,n,o,i=t.href;if(n=i,o=m.cacheSuffix,\"string\"==typeof n&&(n=n.replace(\"?\"+o,\"\").replace(\"&\"+o,\"\")),(i=n)&&a(i,e)&&!function(t,e){var r,n=!1!==(r=t.getParam(\"skin\"))&&(r||\"oxide\");if(n){var o=t.getParam(\"skin_url\"),i=o?t.documentBaseURI.toAbsolute(o):f.baseURL+\"/skins/ui/\"+n,c=f.baseURL+\"/skins/content/\";return e===i+\"/content\"+(t.inline?\".inline\":\"\")+\".min.css\"||-1!==e.indexOf(c)}return!1}(s,i)){h.each(t.imports,function(t){l(t,!0)});try{r=t.cssRules||t.rules}catch(c){}h.each(r,function(t){t.styleSheet?l(t.styleSheet,!0):t.selectorText&&h.each(t.selectorText.split(\",\"),function(t){u.push(h.trim(t))})})}};h.each(s.contentCSS,function(t){r[t]=!0}),a=a||function(t,e){return e||r[t]};try{h.each(t.styleSheets,function(t){l(t)})}catch(e){}return u},x=function(t,e){var r,n=/^(?:([a-z0-9\\-_]+))?(\\.[a-z0-9_\\-\\.]+)$/i.exec(e);if(n){var o=n[1],i=n[2].substr(1).split(\".\").join(\" \"),c=h.makeMap(\"a,img\");return n[1]?(r={title:e},t.schema.getTextBlockElements()[o]?r.block=o:t.schema.getBlockElements()[o]||c[o.toLowerCase()]?r.selector=o:r.inline=o):n[2]&&(r={inline:\"span\",title:e.substr(1),classes:i}),!1!==t.getParam(\"importcss_merge_classes\")?r.classes=i:r.attributes={\"class\":i},r}},P=function(t,e){return null===e||!1!==t.getParam(\"importcss_exclusive\")},r=function(y){y.on(\"init\",function(t){var e,r,n,o,i=(e=[],r=[],n={},{addItemToGroup:function(t,e){n[t]?n[t].push(e):(r.push(t),n[t]=[e])},addItem:function(t){e.push(t)},toFormats:function(){return l(r,function(t){var e=n[t];return 0===e.length?[]:[{title:t,items:e}]}).concat(e)}}),g={},c=p(y.getParam(\"importcss_selector_filter\")),s=(o=y.getParam(\"importcss_groups\"),h.map(o,function(t){return h.extend({},t,{original:t,selectors:{},filter:p(t.filter),item:{text:t.title,menu:[]}})})),a=function(t,e){if(f=t,p=g,!(P(y,m=e)?f in p:f in m.selectors)){a=t,l=g,P(y,u=e)?l[a]=!0:u.selectors[a]=!0;var r=(i=(o=y).plugins.importcss,c=t,((s=e)&&s.selector_converter?s.selector_converter:d(o)?d(o):function(){return x(o,c)}).call(i,c,s));if(r){var n=r.name||v.DOM.uniqueId();return y.formatter.register(n,r),h.extend({},{title:r.title,format:n})}}var o,i,c,s,a,u,l,f,m,p;return null};h.each(_(y,y.getDoc(),p(y.getParam(\"importcss_file_filter\"))),function(r){var t,e,n,o;-1===r.indexOf(\".mce-\")&&(c&&!c(r)||(n=s,o=r,0<(t=h.grep(n,function(t){return!t.filter||t.filter(o)})).length?h.each(t,function(t){var e=a(r,t);e&&i.addItemToGroup(t.title,e)}):(e=a(r,null))&&i.addItem(e)))});var u=i.toFormats();y.fire(\"addStyleModifications\",{items:u,replace:!y.getParam(\"importcss_append\")})})};t.add(\"importcss\",function(t){return r(t),e=t,{convertSelectorToFormat:function(t){return x(e,t)}};var e})}();"]}