{"version":3,"sources":["visualchars/plugin.min.js"],"names":["r","n","t","e","u","i","tinymce","util","Tools","resolve","c","s","f","l","d","m","v","g","isNone","fold","is","isSome","getOr","getOrThunk","getOrDie","Error","getOrNull","getOrUndefined","undefined","or","orThunk","map","each","bind","exists","forall","filter","equals","equals_","toArray","toString","y","length","b","Object","keys","w","o","N","window","Function","dom","nodeValue","T","nodeType","k","Array","prototype","isPrototypeOf","constructor","name","String","a","console","error","setAttribute","A","removeAttribute","O","getAttribute","split","C","classList","L","x","V","B","RegExp","P","_","j","M","q","H","test","F","childNodes","concat","I","nodeName","toLowerCase","contains","U","parentNode","add","join","S","encode","replace","create","lastChild","insertAfter","remove","K","select","push","D","E","R","getBody","selection","getBookmark","getNode","moveToBookmark","z","get","fire","state","J","Q","setActive","on","off","getParam","set","addCommand","G","ui","registry","addToggleButton","tooltip","icon","onAction","execCommand","onSetup","addToggleMenuItem","text","debounce","keyCode","stop","isEnabled"],"mappings":"CAQC,WAAW,aAAa,IAAIA,EAAEC,EAAEC,EAAEC,EAAIC,EAAEC,EAAEC,QAAQC,KAAKC,MAAMC,QAAQ,yBAAyBC,EAAE,SAASR,GAAG,OAAO,SAASD,GAAG,cAAcA,IAAIC,IAAqRS,EAAED,EAAE,WAAWE,EAAEF,EAAE,UAAUG,EAAE,SAASZ,GAAG,OAAO,WAAW,OAAOA,IAAIa,EAAED,IAAIb,EAAE,WAAWe,EAAEF,GAAE,GAAIG,EAAE,WAAW,OAAOC,GAAGA,GAAGhB,EAAE,SAASA,GAAG,OAAOA,EAAEiB,UAAU,CAACC,KAAK,SAASlB,EAAEC,GAAG,OAAOD,KAAKmB,GAAGN,EAAEO,OAAOP,EAAEI,OAAOH,EAAEO,MAAMnB,EAAE,SAASF,GAAG,OAAOA,GAAGsB,WAAWrB,EAAE,SAASD,GAAG,OAAOA,KAAKuB,SAAS,SAASvB,GAAG,MAAM,IAAIwB,MAAMxB,GAAG,oCAAoCyB,UAAUb,EAAE,MAAMc,eAAed,OAAEe,GAAWC,GAAG1B,EAAE2B,QAAQ5B,EAAE6B,IAAIf,EAAEgB,KAAK,aAAaC,KAAKjB,EAAEkB,OAAOpB,EAAEqB,OAAOpB,EAAEqB,OAAOpB,EAAEqB,OAAOpC,EAAEqC,QAAQrC,EAAEsC,QAAQ,WAAW,MAAM,IAAIC,SAAS3B,EAAE,YAAslB4B,EAAE,SAASxC,EAAEC,GAAG,IAAI,IAAIC,EAAE,EAAEH,EAAEC,EAAEyC,OAAOvC,EAAEH,EAAEG,IAAKD,EAAED,EAAEE,GAAGA,IAAKwC,EAAEC,OAAOC,KAAKC,EAAE,SAAS7C,EAAEC,GAAG,IAAI,IAAIC,EAAEwC,EAAE1C,GAAGD,EAAE,EAAE+C,EAAE5C,EAAEuC,OAAO1C,EAAE+C,EAAE/C,IAAI,CAAC,IAAII,EAAED,EAAEH,GAAGE,EAAED,EAAEG,GAAGA,KAAK4C,GAAG,oBAAoBC,QAAQC,SAAS,eAATA,GAA2B,SAASjD,GAAG,OAAOA,EAAEkD,IAAIC,YAAYC,GAAK,EAAE,SAASpD,GAAG,OAAd,IAAqBA,EAAEkD,IAAIG,WAAeC,EAAE,SAAStD,EAAEC,EAAEC,IAAI,SAASF,EAAEC,EAAEC,GAAG,KAApsD,SAASF,GAAG,OAAOE,SAASD,EAAED,IAAI,OAAOC,EAAE,OAAO,UAAUC,IAAIqD,MAAMC,UAAUC,cAAcxD,IAAIA,EAAEyD,aAAa,UAAUzD,EAAEyD,YAAYC,MAAM,QAAQ,UAAUzD,IAAI0D,OAAOJ,UAAUC,cAAcxD,IAAIA,EAAEyD,aAAa,WAAWzD,EAAEyD,YAAYC,MAAM,SAASzD,KAAKH,EAAE,IAAIE,EAAEC,EAA67C2D,CAAE3D,IAAIQ,EAAER,IAAIS,EAAET,IAAI,MAAM4D,QAAQC,MAAM,sCAAsC9D,EAAE,YAAYC,EAAE,cAAcF,GAAG,IAAIwB,MAAM,kCAAkCxB,EAAEgE,aAAa/D,EAAEC,EAAE,IAAjM,CAAsMF,EAAEkD,IAAIjD,EAAEC,IAAI+D,EAAE,SAASjE,EAAEC,GAAGD,EAAEkD,IAAIgB,gBAAgBjE,IAAIkE,EAAE,SAASnE,EAAEC,GAAG,IAAIC,EAAEH,EAAE+C,GAAG5C,EAAED,EAAE,QAAQF,EAAEC,EAAEkD,IAAIkB,aAAalE,SAAIyB,EAAU5B,GAAG,YAAW4B,IAAJmB,GAAe,KAAKA,EAAE,GAAGA,EAAEuB,MAAM,MAAMC,EAAE,SAAStE,GAAG,YAAyB2B,IAAlB3B,EAAEkD,IAAIqB,WAAwZC,EAAE,SAASxE,GAAG,GAAG,MAAOA,EAAiB,MAAM,IAAIwB,MAAM,oCAAoC,MAAM,CAAC0B,IAAIlD,IAAIyE,EAAiaD,EAA2EE,EAAE,CAAC,IAAO,OAAO,IAAO,OAAOC,EAAE,SAAS3E,EAAEC,GAAG,IAAIC,EAAE,GAAG,OAAO2C,EAAE7C,GAAE,SAASA,EAAEC,GAAGC,GAAGD,KAAI,IAAI2E,OAAO,IAAI1E,EAAE,IAAID,EAAE,IAAI,KAAK4E,EAAEF,EAAED,GAAGI,EAAEH,EAAED,GAAE,GAAIK,GAAG5E,EAAE,GAAG0C,EAAE6B,GAAE,SAAS1E,GAAGG,IAAIA,GAAG,KAAKA,GAAG,YAAYH,KAAIG,GAAG6E,EAAE,WAAWC,EAAE,SAASjF,GAAG,MAAM,uCAAuC0E,EAAE1E,GAAG,KAAKA,EAAE,WAAWkF,EAAE,SAASlF,GAAG,IAAIC,EAAE8C,EAAE/C,GAAG,OAAOoD,EAAEpD,SAAQ2B,IAAJ1B,GAAe4E,EAAEM,KAAKlF,IAAImF,EAAE,SAASpF,EAAEC,GAAG,IAAIC,EAAE,GAAGH,EAAE,SAASC,EAAEC,GAAG,IAAI,IAAIC,EAAEF,EAAEyC,OAAO1C,EAAE,IAAIwD,MAAMrD,GAAG4C,EAAE,EAAEA,EAAE5C,EAAE4C,IAAI,CAAC,IAAI3C,EAAEH,EAAE8C,GAAG/C,EAAE+C,GAAG7C,EAAEE,EAAE2C,GAAG,OAAO/C,EAA3F,CAA8FC,EAAEkD,IAAImC,WAAWZ,GAAW,OAAOjC,EAAEzC,GAAE,SAASC,GAAGC,EAAED,KAAKE,EAAEA,EAAEoF,OAAO,CAACtF,KAAKE,EAAEA,EAAEoF,OAAOF,EAAEpF,EAAEC,OAAMC,GAAGqF,EAAE,SAASvF,GAAG,MAAM,SAASA,EAAEwF,SAASC,eAAezF,EAAEuE,UAAUmB,SAAS,kBAAkBC,EAAE,SAASlF,EAAET,GAAG,IAAIC,EAAEmF,EAAEX,EAAUzE,GAAGkF,GAAG1C,EAAEvC,GAAE,SAASD,GAAG,IAAIC,EAAEC,EAAEH,EAAEC,EAAEkD,IAAI0C,WAAW,GAAGL,EAAExF,GAAGE,EAAEwE,EAAU1E,GAAGG,EAAE8E,EAAEV,EAAErE,GAAGA,EAAEiD,IAAIqB,UAAUsB,IAAI3F,GAA1vD,SAASF,EAAEC,GAAG,OAAO6C,EAAE7C,EAAEE,EAAEgE,EAAEjE,EAAEF,EAAI,SAASsF,OAAO,CAACxC,IAAIQ,EAAEpD,EAAvB,QAA2BC,EAAE2F,KAAK,OAAM,EAAG,IAAI5F,EAAI4C,EAAE3C,EAAqqD4F,CAAE9F,EAAEC,OAAO,CAAC,IAAI,IAAI4C,EAAErC,EAAEyC,IAAI8C,OAAOjD,EAAE/C,IAAIiG,QAAQnB,EAAEG,GAAG9E,EAAEM,EAAEyC,IAAIgD,OAAO,MAAM,KAAKpD,GAAG1C,OAAE,EAAOA,EAAED,EAAEgG,WAAW1F,EAAEyC,IAAIkD,YAAYhG,EAAEJ,EAAEkD,KAAKzC,EAAEyC,IAAImD,OAAOrG,EAAEkD,UAASoD,EAAE,SAASvG,EAAEC,GAAG,IAAIC,EAAEF,EAAEmD,IAAIqD,OAAOxB,EAAE/E,GAAGwC,EAAEvC,GAAE,SAASD,GAAG,IAAIC,EAAEC,EAAEqF,EAAEvF,IAAIC,EAAEwE,EAAUzE,GAAGE,EAAE8E,EAAEV,EAAErE,GAAGA,EAAEiD,IAAIqB,UAAU8B,OAAOnG,GAAn7D,SAASF,EAAEC,GAAG,OAAO6C,EAAE7C,EAAE,GAAGE,EAAE,SAASH,EAAEC,GAAG,IAAI,IAAIC,EAAE,GAAGH,EAAE,EAAE+C,EAAE9C,EAAEyC,OAAO1C,EAAE+C,EAAE/C,IAAI,CAAC,IAAII,EAAEH,EAAED,GAAGE,EAAEE,IAAMD,EAAEsG,KAAKrG,GAAG,OAAOD,EAAvF,CAA0FiE,EAAEjE,EAAEF,EAAED,EAAE,UAAS,SAASC,GAAG,OAAOA,IAAI8C,MAAKL,OAAOa,EAAEpD,EAAEH,EAAEI,EAAE2F,KAAK,MAAM7B,EAAE/D,EAAEH,IAAG,EAAG,IAAIG,EAAEH,EAAE+C,EAAE3C,EAAmuDsG,CAAExG,EAAEC,GAAluD,SAASF,GAAG,KAAKsE,EAAEtE,GAAGA,EAAEkD,IAAIqB,UAAUJ,EAAEnE,EAAE,UAAUyC,QAAQwB,EAAEjE,EAAE,SAAqqD0G,CAAEzG,IAAIF,EAAEmD,IAAImD,OAAOrG,GAAE,OAAO2G,EAAE,SAAS3G,GAAG,IAAIC,EAAED,EAAE4G,UAAU1G,EAAEF,EAAE6G,UAAUC,cAAc/G,OAAiH4B,KAA9G5B,EAAE,SAASC,EAAEC,GAAG,KAAKD,EAAE4F,YAAY,CAAC,GAAG5F,EAAE4F,aAAa3F,EAAE,OAAOD,EAAEA,EAAEA,EAAE4F,YAAnE,CAAgF5F,EAAE6G,UAAUE,UAAU9G,IAAgBF,EAAEE,EAAEqG,EAAEtG,EAAED,GAAG4F,EAAE3F,EAAED,GAAGC,EAAE6G,UAAUG,eAAe9G,IAAI+G,EAAE,SAASjH,EAAEC,GAAG,IAAIC,EAAEH,EAAEG,EAAEF,EAAED,EAAEE,EAAEiH,MAAMhH,EAAEiH,KAAK,cAAc,CAACC,MAAMrH,IAAI,IAAI+C,EAAE9C,EAAE4G,YAAW,IAAK3G,EAAEiH,MAAMvB,EAAEW,GAAGtG,EAAE8C,IAA0KuE,EAAEhH,QAAQC,KAAKC,MAAMC,QAAQ,sBAAsB8G,EAAE,SAASpH,EAAEH,GAAG,OAAO,SAASE,GAAGA,EAAEsH,UAAUxH,EAAEmH,OAAO,IAAIlH,EAAE,SAASA,GAAG,OAAOC,EAAEsH,UAAUvH,EAAEoH,QAAQ,OAAOlH,EAAEsH,GAAG,cAAcxH,GAAG,WAAW,OAAOE,EAAEuH,IAAI,cAAczH,MAAMI,EAAEyF,IAAI,eAAc,SAAS7F,GAAG,IAAIC,EAAEC,EAAEH,EAAE+C,EAAE3C,EAAEC,EAAEK,EAAEoD,EAAEnD,EAAEC,EAAEC,GAAGX,EAAED,EAAE0H,SAAS,6BAA4B,GAAIxH,EAAED,EAAE,CAACiH,IAAI,WAAW,OAAOhH,GAAGyH,IAAI,SAAS3H,GAAGE,EAAEF,KAAK,OAApiB,SAASA,EAAEC,GAAGD,EAAE4H,WAAW,kBAAiB,YAAY,SAAS5H,EAAEC,GAAGA,EAAE0H,KAAK1H,EAAEiH,OAAO,IAAIhH,EAAEF,EAAE6G,UAAUC,cAAcG,EAAEjH,EAAEC,GAAGD,EAAE6G,UAAUG,eAAe9G,GAAhG,CAAoGF,EAAEC,MAA6Y4H,CAAE7H,EAAEY,GAAGkC,EAAElC,GAAGb,EAAEC,GAAG8H,GAAGC,SAASC,gBAAgB,cAAc,CAACC,QAAQ,4BAA4BC,KAAK,cAAcC,SAAS,WAAW,OAAOpI,EAAEqI,YAAY,mBAAmBC,QAAQf,EAAEvH,EAAE+C,KAAK/C,EAAE+H,GAAGC,SAASO,kBAAkB,cAAc,CAACC,KAAK,4BAA4BL,KAAK,cAAcC,SAAS,WAAW,OAAOpI,EAAEqI,YAAY,mBAAmBC,QAAQf,EAAEvH,EAAE+C,KAAK3C,EAAEH,EAAEI,EAAEQ,EAAEH,EAAE4G,EAAEmB,UAAS,WAAW7B,EAAExG,KAAI,MAAK,IAAKA,EAAEuH,SAAS,sBAAsBvH,EAAEqH,GAAG,WAAU,SAASxH,IAAG,IAAKI,EAAE8G,QAAQ,KAAKlH,EAAEyI,QAAQ9B,EAAExG,GAAGM,QAAON,EAAEqH,GAAG,SAAS/G,EAAEiI,MAAMhI,EAAEE,GAAGiD,EAAE7D,GAAGwH,GAAG,QAAO,WAAWP,EAAEpD,EAAEnD,MAAKC,EAAEC,EAAE,CAAC+H,UAAU,WAAW,OAAOhI,EAAEuG,WAAzxL","file":"plugin.min.js","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.8.2 (2021-06-23)\n */\n!function(){\"use strict\";var r,n,t,e,o,u,i=tinymce.util.Tools.resolve(\"tinymce.PluginManager\"),c=function(t){return function(n){return typeof n===t}},a=function(n){return e=typeof(t=n),(null===t?\"null\":\"object\"==e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&\"Array\"===t.constructor.name)?\"array\":\"object\"==e&&(String.prototype.isPrototypeOf(t)||t.constructor&&\"String\"===t.constructor.name)?\"string\":e)===r;var t,e},s=c(\"boolean\"),f=c(\"number\"),l=function(n){return function(){return n}},d=l(!(r=\"string\")),m=l(!0),v=function(){return g},g=(n=function(n){return n.isNone()},{fold:function(n,t){return n()},is:d,isSome:d,isNone:m,getOr:e=function(n){return n},getOrThunk:t=function(n){return n()},getOrDie:function(n){throw new Error(n||\"error: getOrDie called on none.\")},getOrNull:l(null),getOrUndefined:l(undefined),or:e,orThunk:t,map:v,each:function(){},bind:v,exists:d,forall:m,filter:v,equals:n,equals_:n,toArray:function(){return[]},toString:l(\"none()\")}),h=function(e){var n=l(e),t=function(){return o},r=function(n){return n(e)},o={fold:function(n,t){return t(e)},is:function(n){return e===n},isSome:m,isNone:d,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:t,orThunk:t,map:function(n){return h(n(e))},each:function(n){n(e)},bind:r,exists:r,forall:r,filter:function(n){return n(e)?o:g},toArray:function(){return[e]},toString:function(){return\"some(\"+e+\")\"},equals:function(n){return n.is(e)},equals_:function(n,t){return n.fold(d,function(n){return t(e,n)})}};return o},p=function(n){return null===n||n===undefined?g:h(n)},y=function(n,t){for(var e=0,r=n.length;e<r;e++){t(n[e],e)}},b=Object.keys,w=function(n,t){for(var e=b(n),r=0,o=e.length;r<o;r++){var u=e[r];t(n[u],u)}},N=(\"undefined\"!=typeof window||Function(\"return this;\")(),function(n){return n.dom.nodeValue}),T=(o=3,function(n){return n.dom.nodeType===o}),k=function(n,t,e){!function(n,t,e){if(!(a(e)||s(e)||f(e)))throw console.error(\"Invalid call to Attribute.set. Key \",t,\":: Value \",e,\":: Element \",n),new Error(\"Attribute value was not simple\");n.setAttribute(t,e+\"\")}(n.dom,t,e)},A=function(n,t){n.dom.removeAttribute(t)},O=function(n,t){var e,r,o=(e=t,null===(r=n.dom.getAttribute(e))?undefined:r);return o===undefined||\"\"===o?[]:o.split(\" \")},C=function(n){return n.dom.classList!==undefined},S=function(n,t){return o=t,u=O(e=n,r=\"class\").concat([o]),k(e,r,u.join(\" \")),!0;var e,r,o,u},D=function(n,t){return o=t,0<(u=function(n,t){for(var e=[],r=0,o=n.length;r<o;r++){var u=n[r];t(u,r)&&e.push(u)}return e}(O(e=n,r=\"class\"),function(n){return n!==o})).length?k(e,r,u.join(\" \")):A(e,r),!1;var e,r,o,u},E=function(n){0===(C(n)?n.dom.classList:O(n,\"class\")).length&&A(n,\"class\")},L=function(n){if(null===n||n===undefined)throw new Error(\"Node cannot be null or undefined\");return{dom:n}},x={fromHtml:function(n,t){var e=(t||document).createElement(\"div\");if(e.innerHTML=n,!e.hasChildNodes()||1<e.childNodes.length)throw console.error(\"HTML does not have a single root node\",n),new Error(\"HTML must have a single root node\");return L(e.childNodes[0])},fromTag:function(n,t){var e=(t||document).createElement(n);return L(e)},fromText:function(n,t){var e=(t||document).createTextNode(n);return L(e)},fromDom:L,fromPoint:function(n,t,e){return p(n.dom.elementFromPoint(t,e)).map(L)}},V={\"\\xa0\":\"nbsp\",\"\\xad\":\"shy\"},B=function(n,t){var e=\"\";return w(n,function(n,t){e+=t}),new RegExp(\"[\"+e+\"]\",t?\"g\":\"\")},P=B(V),_=B(V,!0),j=(u=\"\",w(V,function(n){u&&(u+=\",\"),u+=\"span.mce-\"+n}),u),M=\"mce-nbsp\",q=function(n){return'<span data-mce-bogus=\"1\" class=\"mce-'+V[n]+'\">'+n+\"</span>\"},H=function(n){var t=N(n);return T(n)&&t!==undefined&&P.test(t)},F=function(n,t){var e=[],r=function(n,t){for(var e=n.length,r=new Array(e),o=0;o<e;o++){var u=n[o];r[o]=t(u,o)}return r}(n.dom.childNodes,x.fromDom);return y(r,function(n){t(n)&&(e=e.concat([n])),e=e.concat(F(n,t))}),e},I=function(n){return\"span\"===n.nodeName.toLowerCase()&&n.classList.contains(\"mce-nbsp-wrap\")},U=function(c,n){var t=F(x.fromDom(n),H);y(t,function(n){var t,e,r=n.dom.parentNode;if(I(r))t=x.fromDom(r),e=M,C(t)?t.dom.classList.add(e):S(t,e);else{for(var o=c.dom.encode(N(n)).replace(_,q),u=c.dom.create(\"div\",null,o),i=void 0;i=u.lastChild;)c.dom.insertAfter(i,n.dom);c.dom.remove(n.dom)}})},K=function(r,n){var t=r.dom.select(j,n);y(t,function(n){var t,e;I(n)?(t=x.fromDom(n),e=M,C(t)?t.dom.classList.remove(e):D(t,e),E(t)):r.dom.remove(n,!0)})},R=function(n){var t=n.getBody(),e=n.selection.getBookmark(),r=(r=function(n,t){for(;n.parentNode;){if(n.parentNode===t)return n;n=n.parentNode}}(n.selection.getNode(),t))!==undefined?r:t;K(n,r),U(n,r),n.selection.moveToBookmark(e)},z=function(n,t){var e,r;e=n,r=t.get(),e.fire(\"VisualChars\",{state:r});var o=n.getBody();(!0===t.get()?U:K)(n,o)},G=function(n,t){n.addCommand(\"mceVisualChars\",function(){!function(n,t){t.set(!t.get());var e=n.selection.getBookmark();z(n,t),n.selection.moveToBookmark(e)}(n,t)})},J=tinymce.util.Tools.resolve(\"tinymce.util.Delay\"),Q=function(e,r){return function(t){t.setActive(r.get());var n=function(n){return t.setActive(n.state)};return e.on(\"VisualChars\",n),function(){return e.off(\"VisualChars\",n)}}};i.add(\"visualchars\",function(n){var t,e,r,o,u,i,c,a,s,f,l=(t=n.getParam(\"visualchars_default_state\",!1),e=t,{get:function(){return e},set:function(n){e=n}});return G(n,l),o=l,(r=n).ui.registry.addToggleButton(\"visualchars\",{tooltip:\"Show invisible characters\",icon:\"visualchars\",onAction:function(){return r.execCommand(\"mceVisualChars\")},onSetup:Q(r,o)}),r.ui.registry.addToggleMenuItem(\"visualchars\",{text:\"Show invisible characters\",icon:\"visualchars\",onAction:function(){return r.execCommand(\"mceVisualChars\")},onSetup:Q(r,o)}),u=n,i=l,c=J.debounce(function(){R(u)},300),!1!==u.getParam(\"forced_root_block\")&&u.on(\"keydown\",function(n){!0===i.get()&&(13===n.keyCode?R(u):c())}),u.on(\"remove\",c.stop),s=l,(a=n).on(\"init\",function(){z(a,s)}),f=l,{isEnabled:function(){return f.get()}}})}();"]}