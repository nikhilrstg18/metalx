{"version":3,"sources":["quickbars/plugin.min.js"],"names":["e","n","r","o","tinymce","util","Tools","resolve","c","l","s","f","i","u","ui","registry","addButton","icon","tooltip","onAction","document","createElement","type","accept","style","position","left","top","opacity","body","appendChild","addEventListener","Array","prototype","slice","call","target","files","t","parentNode","removeChild","os","isAndroid","setEditorTimeout","off","on","click","then","length","FileReader","onloadend","result","split","readAsDataURL","editorUpload","blobCache","create","Date","getTime","Math","floor","random","String","add","insertContent","dom","createHTML","src","blobUri","a","plugins","table","insertTable","undoManager","transact","select","removeAttribute","selection","setCursorLocation","isPrototypeOf","constructor","name","d","m","g","h","p","b","undefined","y","v","k","w","T","N","isNone","fold","is","isSome","getOr","getOrThunk","getOrDie","Error","getOrNull","getOrUndefined","or","orThunk","map","each","bind","exists","forall","filter","equals","equals_","toArray","toString","q","E","some","none","from","M","S","C","O","x","nodeType","matches","msMatchesSelector","webkitMatchesSelector","mozMatchesSelector","A","window","Function","D","_","getParam","trim","addContextToolbar","predicate","schema","getTextBlockElements","getBody","nodeName","toLowerCase","isEmpty","items","scope","L","test","className","isCollapsed","getContentEditableParent","P"],"mappings":"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","file":"plugin.min.js","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.8.2 (2021-06-23)\n */\n!function(){\"use strict\";var t,e,n,r,o=tinymce.util.Tools.resolve(\"tinymce.PluginManager\"),c=0,a=function(e,t,n){var r,o,i=e.editorUpload.blobCache,u=i.create((r=\"mceu\",o=(new Date).getTime(),r+\"_\"+Math.floor(1e9*Math.random())+ ++c+String(o)),n,t);i.add(u),e.insertContent(e.dom.createHTML(\"img\",{src:u.blobUri()}))},l=tinymce.util.Tools.resolve(\"tinymce.util.Promise\"),s=tinymce.util.Tools.resolve(\"tinymce.Env\"),f=tinymce.util.Tools.resolve(\"tinymce.util.Delay\"),i=function(u){u.ui.registry.addButton(\"quickimage\",{icon:\"image\",tooltip:\"Insert image\",onAction:function(){var i;i=u,new l(function(n){var r=document.createElement(\"input\");r.type=\"file\",r.accept=\"image/*\",r.style.position=\"fixed\",r.style.left=\"0\",r.style.top=\"0\",r.style.opacity=\"0.001\",document.body.appendChild(r),r.addEventListener(\"change\",function(e){n(Array.prototype.slice.call(e.target.files))});var o=function(e){var t=function(){n([]),r.parentNode.removeChild(r)};s.os.isAndroid()&&\"remove\"!==e.type?f.setEditorTimeout(i,t,0):t(),i.off(\"focusin remove\",o)};i.on(\"focusin remove\",o),r.click()}).then(function(e){var t,n;0<e.length&&(t=e[0],n=t,new l(function(e){var t=new FileReader;t.onloadend=function(){e(t.result.split(\",\")[1])},t.readAsDataURL(n)}).then(function(e){a(u,e,t)}))})}}),u.ui.registry.addButton(\"quicktable\",{icon:\"table\",tooltip:\"Insert table\",onAction:function(){var e,t,n,r,o,i;n=t=2,(e=u).plugins.table?e.plugins.table.insertTable(t,n):(o=t,i=n,(r=e).undoManager.transact(function(){r.insertContent(function(e,t){var n,r,o='<table data-mce-id=\"mce\" style=\"width: 100%\">';for(o+=\"<tbody>\",r=0;r<t;r++){for(o+=\"<tr>\",n=0;n<e;n++)o+=\"<td><br></td>\";o+=\"</tr>\"}return o+=\"</tbody>\",o+=\"</table>\"}(o,i));var e=r.dom.select(\"*[data-mce-id]\")[0];e.removeAttribute(\"data-mce-id\");var t=r.dom.select(\"td,th\",e);r.selection.setCursorLocation(t[0],0)}))}})},u=function(r){return function(e){return n=typeof(t=e),(null===t?\"null\":\"object\"==n&&(Array.prototype.isPrototypeOf(t)||t.constructor&&\"Array\"===t.constructor.name)?\"array\":\"object\"==n&&(String.prototype.isPrototypeOf(t)||t.constructor&&\"String\"===t.constructor.name)?\"string\":n)===r;var t,n}},d=function(t){return function(e){return typeof e===t}},m=u(\"string\"),g=u(\"object\"),h=u(\"array\"),p=d(\"boolean\"),b=(t=undefined,function(e){return t===e}),y=d(\"function\"),v=function(e){return function(){return e}},k=v(!1),w=v(!0),T=function(){return N},N=(e=function(e){return e.isNone()},{fold:function(e,t){return e()},is:k,isSome:k,isNone:w,getOr:r=function(e){return e},getOrThunk:n=function(e){return e()},getOrDie:function(e){throw new Error(e||\"error: getOrDie called on none.\")},getOrNull:v(null),getOrUndefined:v(undefined),or:r,orThunk:n,map:T,each:function(){},bind:T,exists:k,forall:w,filter:T,equals:e,equals_:e,toArray:function(){return[]},toString:v(\"none()\")}),q=function(n){var e=v(n),t=function(){return o},r=function(e){return e(n)},o={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:w,isNone:k,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return q(e(n))},each:function(e){e(n)},bind:r,exists:r,forall:r,filter:function(e){return e(n)?o:N},toArray:function(){return[n]},toString:function(){return\"some(\"+n+\")\"},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(k,function(e){return t(n,e)})}};return o},E={some:q,none:T,from:function(e){return null===e||e===undefined?N:q(e)}};function M(e,t,n,r,o){return e(n,r)?E.some(n):y(o)&&o(n)?E.none():t(n,r,o)}var S,C=function(e){if(null===e||e===undefined)throw new Error(\"Node cannot be null or undefined\");return{dom:e}},O={fromHtml:function(e,t){var n=(t||document).createElement(\"div\");if(n.innerHTML=e,!n.hasChildNodes()||1<n.childNodes.length)throw console.error(\"HTML does not have a single root node\",e),new Error(\"HTML must have a single root node\");return C(n.childNodes[0])},fromTag:function(e,t){var n=(t||document).createElement(e);return C(n)},fromText:function(e,t){var n=(t||document).createTextNode(e);return C(n)},fromDom:C,fromPoint:function(e,t,n){return E.from(e.dom.elementFromPoint(t,n)).map(C)}},x=function(e,t){var n=e.dom;if(1!==n.nodeType)return!1;var r=n;if(r.matches!==undefined)return r.matches(t);if(r.msMatchesSelector!==undefined)return r.msMatchesSelector(t);if(r.webkitMatchesSelector!==undefined)return r.webkitMatchesSelector(t);if(r.mozMatchesSelector!==undefined)return r.mozMatchesSelector(t);throw new Error(\"Browser lacks native selectors\")},A=(\"undefined\"!=typeof window||Function(\"return this;\")(),function(e,t,n){for(var r=e.dom,o=y(n)?n:k;r.parentNode;){r=r.parentNode;var i=O.fromDom(r);if(t(i))return E.some(i);if(o(i))break}return E.none()}),D=function(e,t,n){return A(e,function(e){return x(e,t)},n)},_=(S=m,function(e,t,n){return function(e,t){if(!t(e))throw new Error(\"Default value doesn't match requested type.\")}(n,S),function(e,t){if(h(e)||g(e))throw new Error(\"expected a string but found: \"+e);return b(e)?t:p(e)?!1===e?\"\":t:e}(e.getParam(t,n),n)}),L=function(o){var e=_(o,\"quickbars_insert_toolbar\",\"quickimage quicktable\");0<e.trim().length&&o.ui.registry.addContextToolbar(\"quickblock\",{predicate:function(e){var t=O.fromDom(e),n=o.schema.getTextBlockElements(),r=function(e){return e.dom===o.getBody()};return M(x,D,t,\"table\",r).fold(function(){return M(function(e,t){return t(e)},A,t,function(e){return e.dom.nodeName.toLowerCase()in n&&o.dom.isEmpty(e.dom)},r).isSome()},k)},items:e,position:\"line\",scope:\"editor\"})},P=function(n){var r=function(e){return\"IMG\"===e.nodeName||\"FIGURE\"===e.nodeName&&/image/i.test(e.className)},e=_(n,\"quickbars_image_toolbar\",\"alignleft aligncenter alignright\");0<e.trim().length&&n.ui.registry.addContextToolbar(\"imageselection\",{predicate:r,items:e,position:\"node\"});var t=_(n,\"quickbars_selection_toolbar\",\"bold italic | quicklink h2 h3 blockquote\");0<t.trim().length&&n.ui.registry.addContextToolbar(\"textselection\",{predicate:function(e){return!r(e)&&!n.selection.isCollapsed()&&(t=e,\"false\"!==n.dom.getContentEditableParent(t));var t},items:t,position:\"selection\",scope:\"editor\"})};o.add(\"quickbars\",function(e){i(e),L(e),P(e)})}();"]}