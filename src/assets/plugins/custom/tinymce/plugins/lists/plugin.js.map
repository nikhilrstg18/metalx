{"version":3,"sources":["lists/plugin.js"],"names":["global","tinymce","util","Tools","resolve","isType","type","value","t","x","Array","prototype","isPrototypeOf","constructor","name","String","isSimpleType","isString","isObject","isArray","isBoolean","isFunction","isNumber","noop","constant","not","f","never","always","none","NONE","eq","o","isNone","call","thunk","id","n","fold","_s","is","isSome","getOr","getOrThunk","getOrDie","msg","Error","getOrNull","getOrUndefined","undefined","or","orThunk","map","each","bind","exists","forall","filter","equals","equals_","toArray","toString","some","a","constant_a","self","me","s","v","elementEq","b","Optional","from","nativeSlice","slice","nativePush","push","xs","len","length","r","i","pred","foldl","acc","findUntil","until","find","apply","flatten","reverse","get","head","last","__assign","Object","assign","arguments","p","hasOwnProperty","this","unknown","nu","major","minor","Version","detect","versionRegexes","agent","cleanedAgent","toLowerCase","regexes","test","firstMatch","group","Number","replace","find$1","detect$1","candidates","userAgent","candidate","search","UaString","browsers","browser","version","current","oses","os","contains","str","substr","indexOf","trim","normalVersionRegex","checkContains","target","uastring","PlatformInfo","edge","chrome","opera","firefox","safari","nu$1","info","isBrowser","isEdge","isChrome","isIE","isOpera","isFirefox","isSafari","Browser","ie","windows","android","linux","solaris","freebsd","chromeos","nu$2","isOS","isWindows","isiOS","isAndroid","isOSX","isLinux","isSolaris","isFreeBSD","isChromeOS","OperatingSystem","ios","osx","PlatformDetection","mediaMatch","deviceType","isiPad","isiPhone","isMobile","isTouch","isTablet","isPhone","iOSwebview","isDesktop","isWebView","DeviceType","query","window","matchMedia","matches","platform","called","args","_i","cached","navigator","fromDom","node","dom","SugarElement","fromHtml","html","scope","div","document","createElement","innerHTML","hasChildNodes","childNodes","console","error","fromTag","tag","fromText","text","createTextNode","fromPoint","docElm","y","elementFromPoint","e1","e2","ieContains","match","compareDocumentPosition","Node","DOCUMENT_POSITION_CONTAINED_BY","contains$1","d1","d2","regularContains","is$1","element","selector","nodeType","elem","msMatchesSelector","webkitMatchesSelector","mozMatchesSelector","global$1","global$2","global$3","keys","each$1","obj","props","k","filter$1","onTrue","onFalse","internalFilter","objAcc","Function","nodeName","isElement","setAll","attrs","key","setAttribute","rawSet","clone","attributes","attr","parent","parentNode","children","child","index","cs","firstChild","lastChild","before","marker","insertBefore","append","appendChild","append$1","elements","remove","removeChild","deep","original","isDeep","cloneNode","clone$1","mutate","shallowAs","children$1","global$4","global$5","matchNodeName","matchNodeNames","regex","isTextNode","isListNode","isOlUlNode","isOlNode","isListItemNode","isDlItemNode","isTableCellNode","isBr","isTextBlock","editor","schema","getTextBlockElements","isBlock","blockElements","isEmpty$1","elm","keepBookmarks","empty","isEmpty","select","isChildOfBody","isChildOf","getRoot","createTextBlock","contentNode","textBlock","hasContentNode","getBlockElements","fragment","createFragment","blockName","block","getParam","getForcedRootBlock","create","tagName","toUpperCase","setAttribs","getForcedRootBlockAttrs","getAttribute","DOM","outdentDlItem","item","dl","ul","li","bookmarks","newBlock","tmpRng","createRng","setStartAfter","setEndAfter","targetNode","extractContents","insertAfter","splitList","indentDlItem","getNormalizedPoint","container","offset","getNode","data","previousSibling","nextSibling","normalizeRange","rng","outRng","cloneRange","rangeStart","startContainer","startOffset","setStart","rangeEnd","endContainer","endOffset","setEnd","global$6","getParentList","selectionStart","selection","getStart","getParent","getClosestListRootElm","getSelectedSubLists","parentList","selectedBlocks","getSelectedBlocks","isParentListSelected","grep","querySelectorAll","findSubLists","getSelectedListItems","elms","listItemsElms","unique","findParentListItemsNodes","parentTableCell","getParents","getBody","findLastParentListNode","parentLists","getSelectedListRoots","selectedLists","firstList","subsequentLists","concat","getSelectedLists","getUniqueListRoots","lists","listRoots","list","lift2","oa","ob","fireListEvent","action","fire","internalSet","property","style","getPropertyValue","isSupported","setProperty","joinSegment","createSegment","listType","segment","writeShallow","cast","entry","newCast","depth","appendItem","content","createItem","itemAttributes","listAttributes","normalizeSegment","writeDeep","tail","segments","size","createSegments","joinSegments","populateSegments","isList","el","hasFirstChildList","isIndented","isSelected","cloneItemContent","normalizeEntries","entries","start","dirty","closestSiblingEntry","_value","cleanListProperties","matchingEntry","source","parseItem","itemSelection","selectionState","set","currentItemEntry","createEntry","end","childListEntries","parseList","outdentedComposer","normalizedEntries","createDocumentFragment","indentedComposer","composeList","contentDocument","listIndentation","indentation","entrySets","sourceList","parseLists","selectedListItems","getItemSelection","entrySet","indentEntry","indentSelectedEntries","composedLists","wasType","groupBy","composeEntries","composedList","selectionIndentation","dlItems","getSelectedDlItems","isHandled","bookmark","getBookmark","dlIndentation","moveToBookmark","setRng","getRng","nodeChanged","indentListSelection","outdentListSelection","flattenListSelection","global$7","DOM$1","createBookmark","setupEndPoint","offsetNode","Math","min","collapsed","resolveBookmark","restoreEndPoint","idx","nodeIndex","listToggleActionFromListName","listName","isCustomList","className","listState","activate","nodeChangeHandler","e","inList","parents","on","off","updateListWithDetails","detail","setStyle","updateListStyle","updateListAttrs","getEndPointNode","root","applyList","listItemName","getContentEditable","selectedTextBlocks","textBlocks","startNode","endNode","siblings","isBookmarkNode","getSelectedTextBlocks","listBlock","sibling","sib","sibStyle","getStyle","detailStyle","hasCompatibleStyle","rename","styles","_a","removeStyles","mergeWithAdjacentLists","shouldMerge","list1","list2","isValidLists","hasSameListStyle","elm2","toggleMultipleLists","parentIsList","hasListStyleDetail","allLists","il","j","jl","__spreadArrays","newList","updateList","toggleList","_detail","selectedSubLists","toggleSingleList","DOM$2","normalizeLists","normalizeList","findNextCaretContainer","isForward","nonEmptyBlocks","getNonEmptyElements","walker","isBogusBr","next","hasOnlyOneBlockChild","moveChildren","fromElm","toElm","targetElm","unwrapSingleBlockChild","mergeLiElements","listNode","$","nestedLists","mergeForward","fromLi","toLi","setCursorLocation","mergeIntoEmptyLi","backspaceDeleteFromListToListCaret","selectionStartElm","rng_1","otherLi_1","undoManager","transact","resolvedBookmark","mergeBackward","backspaceDeleteCaret","otherLi_2","parentBlock","removeBlock","collapse","backspaceDeleteIntoListCaret","backspaceDelete","isCollapsed","execCommand","backspaceDeleteRange","parseAlphabeticBase26","chars","split","values","char","charValue","charCodeAt","pow","sum","composeAlphabeticBase26","remainder","quotient","floor","fromCharCode","open","currentList","windowManager","title","body","items","label","inputMode","initialData","getAttrib","listStyleType","parseInt","buttons","primary","onSubmit","api","isLowercase","deduceListType","parseStartValue","getData","close","queryListCommandState","registerDialog","addCommand","register","cmd","command","ui","update","setStyles","setAttrib","updateList$1","addQueryStateHandler","setup$1","shouldIndentOnTab","keyCode","TAB","metaKeyPressed","shiftKey","preventDefault","setupTabKey","BACKSPACE","DELETE","setup","add","hasPlugin","exec","registry","addToggleButton","icon","active","tooltip","onAction","onSetup","setActive","register$1","listProperties","setDisabled","addMenuItem","addContextMenu","register$2","get$1"],"mappings":"CAQC,WACG,aAEA,IAAIA,EAASC,QAAQC,KAAKC,MAAMC,QAAQ,yBAcpCC,EAAS,SAAUC,GACrB,OAAO,SAAUC,GACf,OAbEC,SADiBC,EAcLF,IAZN,OAANE,EACK,OACQ,WAAND,IAAmBE,MAAMC,UAAUC,cAAcH,IAAMA,EAAEI,aAAsC,UAAvBJ,EAAEI,YAAYC,MACxF,QACQ,WAANN,IAAmBO,OAAOJ,UAAUC,cAAcH,IAAMA,EAAEI,aAAsC,WAAvBJ,EAAEI,YAAYC,MACzF,SAEAN,KAKkBF,EAdhB,IAAUG,EACjBD,IAgBFQ,EAAe,SAAUV,GAC3B,OAAO,SAAUC,GACf,cAAcA,IAAUD,IAGxBW,EAAWZ,EAAO,UAClBa,EAAWb,EAAO,UAClBc,EAAUd,EAAO,SACjBe,EAAYJ,EAAa,WACzBK,EAAaL,EAAa,YAC1BM,EAAWN,EAAa,UAExBO,EAAO,aAEPC,EAAW,SAAUjB,GACvB,OAAO,WACL,OAAOA,IAGPkB,EAAM,SAAUC,GAClB,OAAO,SAAUlB,GACf,OAAQkB,EAAElB,KAGVmB,EAAQH,GAAS,GACjBI,EAASJ,GAAS,GAElBK,EAAO,WACT,OAAOC,GAELA,EAAO,WACT,IAAIC,EAAK,SAAUC,GACjB,OAAOA,EAAEC,UAEPC,EAAO,SAAUC,GACnB,OAAOA,KAELC,EAAK,SAAUC,GACjB,OAAOA,GA+BT,MA7BS,CACPC,KAAM,SAAUD,EAAGE,GACjB,OAAOF,KAETG,GAAIb,EACJc,OAAQd,EACRM,OAAQL,EACRc,MAAON,EACPO,WAAYT,EACZU,SAAU,SAAUC,GAClB,MAAM,IAAIC,MAAMD,GAAO,oCAEzBE,UAAWvB,EAAS,MACpBwB,eAAgBxB,OAASyB,GACzBC,GAAId,EACJe,QAASjB,EACTkB,IAAKvB,EACLwB,KAAM9B,EACN+B,KAAMzB,EACN0B,OAAQ5B,EACR6B,OAAQ5B,EACR6B,OAAQ5B,EACR6B,OAAQ3B,EACR4B,QAAS5B,EACT6B,QAAS,WACP,MAAO,IAETC,SAAUrC,EAAS,WArCZ,GAyCPsC,EAAO,SAAUC,GACnB,IAAIC,EAAaxC,EAASuC,GACtBE,EAAO,WACT,OAAOC,GAELZ,EAAO,SAAU5B,GACnB,OAAOA,EAAEqC,IAEPG,EAAK,CACP5B,KAAM,SAAUD,EAAG8B,GACjB,OAAOA,EAAEJ,IAEXvB,GAAI,SAAU4B,GACZ,OAAOL,IAAMK,GAEf3B,OAAQb,EACRK,OAAQN,EACRe,MAAOsB,EACPrB,WAAYqB,EACZpB,SAAUoB,EACVjB,UAAWiB,EACXhB,eAAgBgB,EAChBd,GAAIe,EACJd,QAASc,EACTb,IAAK,SAAU1B,GACb,OAAOoC,EAAKpC,EAAEqC,KAEhBV,KAAM,SAAU3B,GACdA,EAAEqC,IAEJT,KAAMA,EACNC,OAAQD,EACRE,OAAQF,EACRG,OAAQ,SAAU/B,GAChB,OAAOA,EAAEqC,GAAKG,EAAKpC,GAErB8B,QAAS,WACP,MAAO,CAACG,IAEVF,SAAU,WACR,MAAO,QAAUE,EAAI,KAEvBL,OAAQ,SAAU1B,GAChB,OAAOA,EAAEQ,GAAGuB,IAEdJ,QAAS,SAAU3B,EAAGqC,GACpB,OAAOrC,EAAEM,KAAKX,GAAO,SAAU2C,GAC7B,OAAOD,EAAUN,EAAGO,QAI1B,OAAOJ,GAKLK,EAAW,CACbT,KAAMA,EACNjC,KAAMA,EACN2C,KANS,SAAUjE,GACnB,OAAOA,MAAAA,EAAwCuB,EAAOgC,EAAKvD,KAQzDkE,EAAc/D,MAAMC,UAAU+D,MAC9BC,EAAajE,MAAMC,UAAUiE,KAC7BxB,EAAM,SAAUyB,EAAInD,GAGtB,IAFA,IAAIoD,EAAMD,EAAGE,OACTC,EAAI,IAAItE,MAAMoE,GACTG,EAAI,EAAGA,EAAIH,EAAKG,IAAK,CAC5B,IAAIxE,EAAIoE,EAAGI,GACXD,EAAEC,GAAKvD,EAAEjB,EAAGwE,GAEd,OAAOD,GAEL3B,EAAO,SAAUwB,EAAInD,GACvB,IAAK,IAAIuD,EAAI,EAAGH,EAAMD,EAAGE,OAAQE,EAAIH,EAAKG,IAAK,CAE7CvD,EADQmD,EAAGI,GACNA,KAGLxB,EAAS,SAAUoB,EAAIK,GAEzB,IADA,IAAIF,EAAI,GACCC,EAAI,EAAGH,EAAMD,EAAGE,OAAQE,EAAIH,EAAKG,IAAK,CAC7C,IAAIxE,EAAIoE,EAAGI,GACPC,EAAKzE,EAAGwE,IACVD,EAAEJ,KAAKnE,GAGX,OAAOuE,GAyBLG,EAAQ,SAAUN,EAAInD,EAAG0D,GAI3B,OAHA/B,EAAKwB,GAAI,SAAUpE,GACjB2E,EAAM1D,EAAE0D,EAAK3E,MAER2E,GAELC,EAAY,SAAUR,EAAIK,EAAMI,GAClC,IAAK,IAAIL,EAAI,EAAGH,EAAMD,EAAGE,OAAQE,EAAIH,EAAKG,IAAK,CAC7C,IAAIxE,EAAIoE,EAAGI,GACX,GAAIC,EAAKzE,EAAGwE,GACV,OAAOV,EAAST,KAAKrD,GAChB,GAAI6E,EAAM7E,EAAGwE,GAClB,MAGJ,OAAOV,EAAS1C,QAEd0D,EAAO,SAAUV,EAAIK,GACvB,OAAOG,EAAUR,EAAIK,EAAMvD,IAYzB2B,EAAO,SAAUuB,EAAInD,GACvB,OAXY,SAAUmD,GAEtB,IADA,IAAIG,EAAI,GACCC,EAAI,EAAGH,EAAMD,EAAGE,OAAQE,EAAIH,IAAOG,EAAG,CAC7C,IAAK9D,EAAQ0D,EAAGI,IACd,MAAM,IAAInC,MAAM,oBAAsBmC,EAAI,6BAA+BJ,GAE3EF,EAAWa,MAAMR,EAAGH,EAAGI,IAEzB,OAAOD,EAGAS,CAAQrC,EAAIyB,EAAInD,KAErBgE,EAAU,SAAUb,GACtB,IAAIG,EAAIP,EAAYvC,KAAK2C,EAAI,GAE7B,OADAG,EAAEU,UACKV,GAELW,EAAM,SAAUd,EAAII,GACtB,OAAOA,GAAK,GAAKA,EAAIJ,EAAGE,OAASR,EAAST,KAAKe,EAAGI,IAAMV,EAAS1C,QAE/D+D,EAAO,SAAUf,GACnB,OAAOc,EAAId,EAAI,IAEbgB,EAAO,SAAUhB,GACnB,OAAOc,EAAId,EAAIA,EAAGE,OAAS,IAGzBe,EAAW,WAUb,OATAA,EAAWC,OAAOC,QAAU,SAAkBxF,GAC5C,IAAK,IAAI2D,EAAGc,EAAI,EAAG5C,EAAI4D,UAAUlB,OAAQE,EAAI5C,EAAG4C,IAE9C,IAAK,IAAIiB,KADT/B,EAAI8B,UAAUhB,GAERc,OAAOpF,UAAUwF,eAAejE,KAAKiC,EAAG+B,KAC1C1F,EAAE0F,GAAK/B,EAAE+B,IAEf,OAAO1F,IAEOgF,MAAMY,KAAMH,YAW9B,IAkHsBjB,EA0WGxE,EAzZrB6F,EAAU,WACZ,OAAOC,EAAG,EAAG,IAEXA,EAAK,SAAUC,EAAOC,GACxB,MAAO,CACLD,MAAOA,EACPC,MAAOA,IAGPC,EAAU,CACZH,GAAIA,EACJI,OAlBW,SAAUC,EAAgBC,GACrC,IAAIC,EAAe9F,OAAO6F,GAAOE,cACjC,OAA8B,IAA1BH,EAAe5B,OACVsB,IAhBE,SAAUU,EAASH,GAC9B,IAAI5B,EAVW,SAAU+B,EAAS5C,GAClC,IAAK,IAAIc,EAAI,EAAGA,EAAI8B,EAAQhC,OAAQE,IAAK,CACvC,IAAIxE,EAAIsG,EAAQ9B,GAChB,GAAIxE,EAAEuG,KAAK7C,GACT,OAAO1D,GAMHwG,CAAWF,EAASH,GAC5B,IAAK5B,EACH,MAAO,CACLuB,MAAO,EACPC,MAAO,GAGX,IAAIU,EAAQ,SAAUjC,GACpB,OAAOkC,OAAOP,EAAMQ,QAAQpC,EAAG,IAAMC,KAEvC,OAAOqB,EAAGY,EAAM,GAAIA,EAAM,IAOnBG,CAAOV,EAAgBE,IAc9BR,QAASA,GAGPiB,EAAW,SAAUC,EAAYC,GACnC,IAAIZ,EAAQ7F,OAAOyG,GAAWV,cAC9B,OAAOvB,EAAKgC,GAAY,SAAUE,GAChC,OAAOA,EAAUC,OAAOd,OAqBxBe,EAlBgB,SAAUC,EAAUJ,GACtC,OAAOF,EAASM,EAAUJ,GAAWpE,KAAI,SAAUyE,GACjD,IAAIC,EAAUrB,EAAQC,OAAOmB,EAAQlB,eAAgBa,GACrD,MAAO,CACLO,QAASF,EAAQ/G,KACjBgH,QAASA,OAaXH,EATW,SAAUK,EAAMR,GAC7B,OAAOF,EAASU,EAAMR,GAAWpE,KAAI,SAAU6E,GAC7C,IAAIH,EAAUrB,EAAQC,OAAOuB,EAAGtB,eAAgBa,GAChD,MAAO,CACLO,QAASE,EAAGnH,KACZgH,QAASA,OASXI,EAAW,SAAUC,EAAKC,GAC5B,OAAgC,IAAzBD,EAAIE,QAAQD,IAOjBE,GALkBtD,EAKL,aAJR,SAAUb,GACf,OAAOA,EAAEiD,QAAQpC,EAAG,MAWpBuD,EAAqB,sCACrBC,EAAgB,SAAUC,GAC5B,OAAO,SAAUC,GACf,OAAOR,EAASQ,EAAUD,KAG1Bb,EAAW,CACb,CACE9G,KAAM,OACN6F,eAAgB,CAAC,kCACjBe,OAAQ,SAAUgB,GAChB,OAAOR,EAASQ,EAAU,UAAYR,EAASQ,EAAU,WAAaR,EAASQ,EAAU,WAAaR,EAASQ,EAAU,iBAG7H,CACE5H,KAAM,SACN6F,eAAgB,CACd,kCACA4B,GAEFb,OAAQ,SAAUgB,GAChB,OAAOR,EAASQ,EAAU,YAAcR,EAASQ,EAAU,iBAG/D,CACE5H,KAAM,KACN6F,eAAgB,CACd,iCACA,8BAEFe,OAAQ,SAAUgB,GAChB,OAAOR,EAASQ,EAAU,SAAWR,EAASQ,EAAU,aAG5D,CACE5H,KAAM,QACN6F,eAAgB,CACd4B,EACA,kCAEFb,OAAQc,EAAc,UAExB,CACE1H,KAAM,UACN6F,eAAgB,CAAC,uCACjBe,OAAQc,EAAc,YAExB,CACE1H,KAAM,SACN6F,eAAgB,CACd4B,EACA,iCAEFb,OAAQ,SAAUgB,GAChB,OAAQR,EAASQ,EAAU,WAAaR,EAASQ,EAAU,aAAeR,EAASQ,EAAU,kBAI/FV,EAAO,CACT,CACElH,KAAM,UACN4G,OAAQc,EAAc,OACtB7B,eAAgB,CAAC,0CAEnB,CACE7F,KAAM,MACN4G,OAAQ,SAAUgB,GAChB,OAAOR,EAASQ,EAAU,WAAaR,EAASQ,EAAU,SAE5D/B,eAAgB,CACd,sCACA,+BACA,wCAGJ,CACE7F,KAAM,UACN4G,OAAQc,EAAc,WACtB7B,eAAgB,CAAC,sCAEnB,CACE7F,KAAM,MACN4G,OAAQc,EAAc,YACtB7B,eAAgB,CAAC,wCAEnB,CACE7F,KAAM,QACN4G,OAAQc,EAAc,SACtB7B,eAAgB,IAElB,CACE7F,KAAM,UACN4G,OAAQc,EAAc,SACtB7B,eAAgB,IAElB,CACE7F,KAAM,UACN4G,OAAQc,EAAc,WACtB7B,eAAgB,IAElB,CACE7F,KAAM,WACN4G,OAAQc,EAAc,QACtB7B,eAAgB,CAAC,qCAGjBgC,EAAe,CACjBf,SAAUpG,EAASoG,GACnBI,KAAMxG,EAASwG,IAGbY,EAAO,OACPC,EAAS,SAETC,EAAQ,QACRC,EAAU,UACVC,EAAS,SAOTC,EAAO,SAAUC,GACnB,IAAInB,EAAUmB,EAAKnB,QACfD,EAAUoB,EAAKpB,QACfqB,EAAY,SAAUrI,GACxB,OAAO,WACL,OAAOiH,IAAYjH,IAGvB,MAAO,CACLiH,QAASA,EACTD,QAASA,EACTsB,OAAQD,EAAUP,GAClBS,SAAUF,EAAUN,GACpBS,KAAMH,EAvBD,MAwBLI,QAASJ,EAAUL,GACnBU,UAAWL,EAAUJ,GACrBU,SAAUN,EAAUH,KAGpBU,EAAU,CACZrD,QA1Bc,WACd,OAAO4C,EAAK,CACVlB,aAAS9E,EACT6E,QAASrB,EAAQJ,aAwBnBC,GAAI2C,EACJL,KAAMpH,EAASoH,GACfC,OAAQrH,EAASqH,GACjBc,GAAInI,EAlCG,MAmCPsH,MAAOtH,EAASsH,GAChBC,QAASvH,EAASuH,GAClBC,OAAQxH,EAASwH,IAGfY,GAAU,UAEVC,GAAU,UACVC,GAAQ,QAERC,GAAU,UACVC,GAAU,UACVC,GAAW,WAOXC,GAAO,SAAUhB,GACnB,IAAInB,EAAUmB,EAAKnB,QACfD,EAAUoB,EAAKpB,QACfqC,EAAO,SAAUrJ,GACnB,OAAO,WACL,OAAOiH,IAAYjH,IAGvB,MAAO,CACLiH,QAASA,EACTD,QAASA,EACTsC,UAAWD,EAAKP,IAChBS,MAAOF,EAzBD,OA0BNG,UAAWH,EAAKN,IAChBU,MAAOJ,EAxBD,OAyBNK,QAASL,EAAKL,IACdW,UAAWN,EAAKJ,IAChBW,UAAWP,EAAKH,IAChBW,WAAYR,EAAKF,MAGjBW,GAAkB,CACpBvE,QA5Bc,WACd,OAAO6D,GAAK,CACVnC,aAAS9E,EACT6E,QAASrB,EAAQJ,aA0BnBC,GAAI4D,GACJN,QAASpI,EAASoI,IAClBiB,IAAKrJ,EAtCG,OAuCRqI,QAASrI,EAASqI,IAClBC,MAAOtI,EAASsI,IAChBgB,IAAKtJ,EAtCG,OAuCRuI,QAASvI,EAASuI,IAClBC,QAASxI,EAASwI,IAClBC,SAAUzI,EAASyI,KAejBc,GAZW,SAAUvD,EAAWwD,GAClC,IAAIpD,EAAWe,EAAaf,WACxBI,EAAOW,EAAaX,OACpBH,EAAUF,EAAuBC,EAAUJ,GAAWlF,KAAKoH,EAAQrD,QAASqD,EAAQpD,IACpF2B,EAAKN,EAAkBK,EAAMR,GAAWlF,KAAKsI,GAAgBvE,QAASuE,GAAgBtE,IACtF2E,EA7TW,SAAUhD,EAAIJ,EAASL,EAAWwD,GACjD,IAAIE,EAASjD,EAAGoC,UAAuC,IAA5B,QAAQrD,KAAKQ,GACpC2D,EAAWlD,EAAGoC,UAAYa,EAC1BE,EAAWnD,EAAGoC,SAAWpC,EAAGqC,YAC5Be,EAAUD,GAAYJ,EAAW,oBACjCM,EAAWJ,IAAWC,GAAYC,GAAYJ,EAAW,4BACzDO,EAAUJ,GAAYC,IAAaE,EACnCE,EAAa3D,EAAQ4B,YAAcxB,EAAGoC,UAAyC,IAA9B,UAAUrD,KAAKQ,GAChEiE,GAAaF,IAAYD,IAAaE,EAC1C,MAAO,CACLN,OAAQ1J,EAAS0J,GACjBC,SAAU3J,EAAS2J,GACnBG,SAAU9J,EAAS8J,GACnBC,QAAS/J,EAAS+J,GAClBF,QAAS7J,EAAS6J,GAClBf,UAAWrC,EAAGqC,UACdD,MAAOpC,EAAGoC,MACVqB,UAAWlK,EAASgK,GACpBC,UAAWjK,EAASiK,IA2SLE,CAAW1D,EAAIJ,EAASL,EAAWwD,GACpD,MAAO,CACLnD,QAASA,EACTI,GAAIA,EACJgD,WAAYA,IAKZD,GAAa,SAAUY,GACzB,OAAOC,OAAOC,WAAWF,GAAOG,SAE9BC,GAzVS,SAAUtK,GACrB,IACIsD,EADAiH,GAAS,EAEb,OAAO,WAEL,IADA,IAAIC,EAAO,GACFC,EAAK,EAAGA,EAAKlG,UAAUlB,OAAQoH,IACtCD,EAAKC,GAAMlG,UAAUkG,GAMvB,OAJKF,IACHA,GAAS,EACTjH,EAAItD,EAAE8D,MAAM,KAAM0G,IAEblH,GA6UIoH,EAAO,WACpB,OAAOrB,GAAyBsB,UAAU7E,UAAWwD,OAmCnDsB,GAAU,SAAUC,GACtB,GAAIA,MAAAA,EACF,MAAM,IAAIzJ,MAAM,oCAElB,MAAO,CAAE0J,IAAKD,IAKZE,GAAe,CACjBC,SA9Ba,SAAUC,EAAMC,GAC7B,IACIC,GADMD,GAASE,UACLC,cAAc,OAE5B,GADAF,EAAIG,UAAYL,GACXE,EAAII,iBAAmBJ,EAAIK,WAAWnI,OAAS,EAElD,MADAoI,QAAQC,MAAM,wCAAyCT,GACjD,IAAI7J,MAAM,qCAElB,OAAOwJ,GAAQO,EAAIK,WAAW,KAuB9BG,QArBY,SAAUC,EAAKV,GAC3B,IACIL,GADMK,GAASE,UACJC,cAAcO,GAC7B,OAAOhB,GAAQC,IAmBfgB,SAjBa,SAAUC,EAAMZ,GAC7B,IACIL,GADMK,GAASE,UACJW,eAAeD,GAC9B,OAAOlB,GAAQC,IAefD,QAASA,GACToB,UARc,SAAUC,EAAQlN,EAAGmN,GACnC,OAAOrJ,EAASC,KAAKmJ,EAAOnB,IAAIqB,iBAAiBpN,EAAGmN,IAAIxK,IAAIkJ,MA8B1DvK,GAAK,SAAU+L,EAAIC,GACrB,OAAOD,EAAGtB,MAAQuB,EAAGvB,KAOnBwB,GAAa,SAAUF,EAAIC,GAC7B,OAxE0ChK,EAwEP+J,EAAGtB,IAxEOlI,EAwEFyJ,EAAGvB,IA3ElB,SAAUzI,EAAGO,EAAG2J,GAC5C,OAAkD,IAA1ClK,EAAEmK,wBAAwB5J,GAAK2J,GAGhCC,CAAwBnK,EAAGO,EAAG6J,KAAKC,gCADV,IAAUrK,EAAGO,GA0E3C+J,GAAa,SAAUP,EAAIC,GAC7B,OAjFO/B,KAiFWnE,QAAQyB,OAAS0E,GAAWF,EAAIC,GAT9B,SAAUD,EAAIC,GAClC,IAAIO,EAAKR,EAAGtB,IACR+B,EAAKR,EAAGvB,IACZ,OAAO8B,IAAOC,GAAaD,EAAGpG,SAASqG,GAMiBC,CAAgBV,EAAIC,IAE1EU,GAlCK,SAAUC,EAASC,GAC1B,IAAInC,EAAMkC,EAAQlC,IAClB,GAzCY,IAyCRA,EAAIoC,SACN,OAAO,EAEP,IAAIC,EAAOrC,EACX,QAAqBvJ,IAAjB4L,EAAK9C,QACP,OAAO8C,EAAK9C,QAAQ4C,GACf,QAA+B1L,IAA3B4L,EAAKC,kBACd,OAAOD,EAAKC,kBAAkBH,GACzB,QAAmC1L,IAA/B4L,EAAKE,sBACd,OAAOF,EAAKE,sBAAsBJ,GAC7B,QAAgC1L,IAA5B4L,EAAKG,mBACd,OAAOH,EAAKG,mBAAmBL,GAE/B,MAAM,IAAI7L,MAAM,mCAqBlBmM,GAAWhP,QAAQC,KAAKC,MAAMC,QAAQ,0BAEtC8O,GAAWjP,QAAQC,KAAKC,MAAMC,QAAQ,0BAEtC+O,GAAWlP,QAAQC,KAAKC,MAAMC,QAAQ,mBAEtCgP,GAAOrJ,OAAOqJ,KACdC,GAAS,SAAUC,EAAK5N,GAE1B,IADA,IAAI6N,EAAQH,GAAKE,GACRE,EAAI,EAAG1K,EAAMyK,EAAMxK,OAAQyK,EAAI1K,EAAK0K,IAAK,CAChD,IAAIvK,EAAIsK,EAAMC,GAEd9N,EADQ4N,EAAIrK,GACPA,KAeLwK,GAAW,SAAUH,EAAKpK,GAC5B,IAAI1E,EAAI,GAER,OAVmB,SAAU8O,EAAKpK,EAAMwK,EAAQC,GAEhDN,GAAOC,GAAK,SAAU7O,EAAGwE,IACtBC,EAAKzE,EAAGwE,GAAKyK,EAASC,GAASlP,EAAGwE,MAMrC2K,CAAeN,EAAKpK,EAdT,SAAUF,GACrB,OAAO,SAAUvE,EAAGwE,GAClBD,EAAEC,GAAKxE,GAYiBoP,CAAOrP,GAAIe,GAC9Bf,GAKLM,IAF2B,oBAAX+K,OAAyBA,OAASiE,SAAS,eAATA,GAE3C,SAAUpB,GAEnB,OADQA,EAAQlC,IAAIuD,SACXjJ,gBAUPkJ,IALqBxP,EArHX,EAsHL,SAAUkO,GACf,OALO,SAAUA,GACnB,OAAOA,EAAQlC,IAAIoC,SAIVtO,CAAKoO,KAAalO,IAazByP,GAAS,SAAUvB,EAASwB,GAC9B,IAAI1D,EAAMkC,EAAQlC,IAClB6C,GAAOa,GAAO,SAAU9L,EAAGoL,IAVhB,SAAUhD,EAAK2D,EAAK5P,GAC/B,KAAIU,EAASV,IAAUa,EAAUb,IAAUe,EAASf,IAIlD,MADA4M,QAAQC,MAAM,sCAAuC+C,EAAK,YAAa5P,EAAO,cAAeiM,GACvF,IAAI1J,MAAM,kCAHhB0J,EAAI4D,aAAaD,EAAK5P,EAAQ,IAS9B8P,CAAO7D,EAAKgD,EAAGpL,OAGfkM,GAAQ,SAAU5B,GACpB,OAAOvJ,EAAMuJ,EAAQlC,IAAI+D,YAAY,SAAUnL,EAAKoL,GAElD,OADApL,EAAIoL,EAAK1P,MAAQ0P,EAAKjQ,MACf6E,IACN,KAGDqL,GAAS,SAAU/B,GACrB,OAAOnK,EAASC,KAAKkK,EAAQlC,IAAIkE,YAAYtN,IAAIqJ,GAAaH,UAE5DqE,GAAW,SAAUjC,GACvB,OAAOtL,EAAIsL,EAAQlC,IAAIU,WAAYT,GAAaH,UAE9CsE,GAAQ,SAAUlC,EAASmC,GAC7B,IAAIC,EAAKpC,EAAQlC,IAAIU,WACrB,OAAO3I,EAASC,KAAKsM,EAAGD,IAAQzN,IAAIqJ,GAAaH,UAE/CyE,GAAa,SAAUrC,GACzB,OAAOkC,GAAMlC,EAAS,IAEpBsC,GAAY,SAAUtC,GACxB,OAAOkC,GAAMlC,EAASA,EAAQlC,IAAIU,WAAWnI,OAAS,IAGpDkM,GAAS,SAAUC,EAAQxC,GACd+B,GAAOS,GACb7N,MAAK,SAAUe,GACtBA,EAAEoI,IAAI2E,aAAazC,EAAQlC,IAAK0E,EAAO1E,SAGvC4E,GAAS,SAAUX,EAAQ/B,GAC7B+B,EAAOjE,IAAI6E,YAAY3C,EAAQlC,MAQ7B8E,GAAW,SAAUb,EAAQc,GAC/BlO,EAAKkO,GAAU,SAAU9Q,GACvB2Q,GAAOX,EAAQhQ,OAIf+Q,GAAS,SAAU9C,GACrB,IAAIlC,EAAMkC,EAAQlC,IACK,OAAnBA,EAAIkE,YACNlE,EAAIkE,WAAWe,YAAYjF,IAO3BkF,GAAO,SAAUC,GACnB,OAJY,SAAUA,EAAUC,GAChC,OAAOnF,GAAaH,QAAQqF,EAASnF,IAAIqF,UAAUD,IAG5CE,CAAQH,GAAU,IAQvBI,GAAS,SAAUJ,EAAUrE,GAC/B,IAAIhH,EAPU,SAAUqL,EAAUrE,GAClC,IAAIhH,EAAKmG,GAAaY,QAAQC,GAC1BiD,EAAaD,GAAMqB,GAEvB,OADA1B,GAAO3J,EAAIiK,GACJjK,EAGE0L,CAAUL,EAAUrE,GAC7B2D,GAAOU,EAAUrL,GACjB,IAAI2L,EAAatB,GAASgB,GAG1B,OAFAL,GAAShL,EAAI2L,GACbT,GAAOG,GACArL,GAGL4L,GAAWjS,QAAQC,KAAKC,MAAMC,QAAQ,wBAEtC+R,GAAWlS,QAAQC,KAAKC,MAAMC,QAAQ,sBAEtCgS,GAAgB,SAAUtR,GAC5B,OAAO,SAAUyL,GACf,OAAOA,GAAQA,EAAKwD,SAASjJ,gBAAkBhG,IAG/CuR,GAAiB,SAAUC,GAC7B,OAAO,SAAU/F,GACf,OAAOA,GAAQ+F,EAAMtL,KAAKuF,EAAKwD,YAG/BwC,GAAa,SAAUhG,GACzB,OAAOA,GAA0B,IAAlBA,EAAKqC,UAElB4D,GAAaH,GAAe,gBAC5BI,GAAaJ,GAAe,aAC5BK,GAAWN,GAAc,MACzBO,GAAiBN,GAAe,gBAChCO,GAAeP,GAAe,aAC9BQ,GAAkBR,GAAe,aACjCS,GAAOV,GAAc,MAIrBW,GAAc,SAAUC,EAAQzG,GAClC,OAAOA,KAAUyG,EAAOC,OAAOC,uBAAuB3G,EAAKwD,WAEzDoD,GAAU,SAAU5G,EAAM6G,GAC5B,OAAO7G,GAAQA,EAAKwD,YAAYqD,GAQ9BC,GAAY,SAAU7G,EAAK8G,EAAKC,GAClC,IAAIC,EAAQhH,EAAIiH,QAAQH,GACxB,QAAIC,GAAiB/G,EAAIkH,OAAO,+BAAgCJ,GAAKvO,OAAS,IAGvEyO,GAELG,GAAgB,SAAUnH,EAAK8G,GACjC,OAAO9G,EAAIoH,UAAUN,EAAK9G,EAAIqH,YAoB5BC,GAAkB,SAAUd,EAAQe,GACtC,IAIIxH,EAAMyH,EAAWC,EAJjBzH,EAAMwG,EAAOxG,IACb4G,EAAgBJ,EAAOC,OAAOiB,mBAC9BC,EAAW3H,EAAI4H,iBACfC,EAlBmB,SAAUrB,GACjC,IAAIsB,EAAQtB,EAAOuB,SAAS,oBAAqB,KACjD,OAAc,IAAVD,EACK,IACY,IAAVA,EACF,IAEAA,EAWOE,CAAmBxB,GAWnC,GATIqB,KACFL,EAAYxH,EAAIiI,OAAOJ,IACTK,UAAYL,EAAUM,eAClCnI,EAAIoI,WAAWZ,EAbS,SAAUhB,GACtC,OAAOA,EAAOuB,SAAS,0BAA2B,IAYpBM,CAAwB7B,IAE/CG,GAAQY,EAAYhD,WAAYqC,IACnCe,EAAS9C,YAAY2C,IAGrBD,EACF,KAAOxH,EAAOwH,EAAYhD,YAAY,CACpC,IAAIhB,EAAWxD,EAAKwD,SACfkE,GAAgC,SAAblE,GAA8D,aAAvCxD,EAAKuI,aAAa,mBAC/Db,GAAiB,GAEfd,GAAQ5G,EAAM6G,IAChBe,EAAS9C,YAAY9E,GACrByH,EAAY,MAERK,GACGL,IACHA,EAAYxH,EAAIiI,OAAOJ,GACvBF,EAAS9C,YAAY2C,IAEvBA,EAAU3C,YAAY9E,IAEtB4H,EAAS9C,YAAY9E,GAY7B,OAPK8H,EAGEJ,GACHD,EAAU3C,YAAY7E,EAAIiI,OAAO,KAAM,CAAE,iBAAkB,OAH7DN,EAAS9C,YAAY7E,EAAIiI,OAAO,OAM3BN,GAGLY,GAAM7C,GAAS6C,IAiCfC,GAAgB,SAAUhC,EAAQiC,GAChCxG,GAAKwG,EAAM,MACblD,GAAOkD,EAAM,MACJxG,GAAKwG,EAAM,OACpBxE,GAAOwE,GAAM5R,MAAK,SAAU6R,GAC1B,OArCU,SAAUlC,EAAQmC,EAAIC,GACpC,IAMIC,EAAYN,GAAIrB,OAAO,iCAAkCyB,GACzDG,EAAWxB,GAAgBd,EAAQoC,GACnCG,EAASR,GAAIS,YACjBD,EAAOE,cAAcL,GACrBG,EAAOG,YAAYP,GAEnB,IADA,IAXuCQ,EAWnCxB,EAAWoB,EAAOK,kBACbrJ,EAAO4H,EAASpD,WAAYxE,EAAMA,EAAOA,EAAKwE,WACrD,GAAsB,OAAlBxE,EAAKwD,UAAqBiD,EAAOxG,IAAIiH,QAAQlH,GAAO,CACtDwI,GAAIvD,OAAOjF,GACX,MAGCyG,EAAOxG,IAAIiH,QAAQU,IACtBY,GAAIc,YAAY1B,EAAUgB,GAE5BJ,GAAIc,YAAYP,EAAUH,GACtB9B,GAAUL,EAAOxG,IAAK4I,EAAG1E,cAtBUiF,EAuBdP,EAAG1E,WAtB1ByB,GAAS9O,KAAKgS,GAAW,SAAU9I,GACjCoJ,EAAWjF,WAAWS,aAAa5E,EAAM6I,EAAG1E,eAE9CqE,GAAIvD,OAAOmE,IAqBbZ,GAAIvD,OAAO4D,GACP/B,GAAUL,EAAOxG,IAAK2I,IACxBJ,GAAIvD,OAAO2D,GASFW,CAAU9C,EAAQkC,EAAG1I,IAAKyI,EAAKzI,SAIxCuJ,GAAe,SAAUd,GACvBxG,GAAKwG,EAAM,OACblD,GAAOkD,EAAM,OAabe,GAAqB,SAAUC,EAAWC,GAC5C,GAAI3D,GAAW0D,GACb,MAAO,CACLA,UAAWA,EACXC,OAAQA,GAGZ,IAAI3J,EAAO0C,GAASkH,QAAQF,EAAWC,GACvC,OAAI3D,GAAWhG,GACN,CACL0J,UAAW1J,EACX2J,OAAQA,GAAUD,EAAU/I,WAAWnI,OAASwH,EAAK6J,KAAKrR,OAAS,GAE5DwH,EAAK8J,iBAAmB9D,GAAWhG,EAAK8J,iBAC1C,CACLJ,UAAW1J,EAAK8J,gBAChBH,OAAQ3J,EAAK8J,gBAAgBD,KAAKrR,QAE3BwH,EAAK+J,aAAe/D,GAAWhG,EAAK+J,aACtC,CACLL,UAAW1J,EAAK+J,YAChBJ,OAAQ,GAGL,CACLD,UAAWA,EACXC,OAAQA,IAGRK,GAAiB,SAAUC,GAC7B,IAAIC,EAASD,EAAIE,aACbC,EAAaX,GAAmBQ,EAAII,eAAgBJ,EAAIK,aAC5DJ,EAAOK,SAASH,EAAWV,UAAWU,EAAWT,QACjD,IAAIa,EAAWf,GAAmBQ,EAAIQ,aAAcR,EAAIS,WAExD,OADAR,EAAOS,OAAOH,EAASd,UAAWc,EAASb,QACpCO,GAGLU,GAAWlX,QAAQC,KAAKC,MAAMC,QAAQ,wBAEtCgX,GAAgB,SAAUpE,EAAQzG,GACpC,IAAI8K,EAAiB9K,GAAQyG,EAAOsE,UAAUC,UAAS,GACvD,OAAOvE,EAAOxG,IAAIgL,UAAUH,EAAgB,WAAYI,GAAsBzE,EAAQqE,KAUpFK,GAAsB,SAAU1E,GAClC,IAAI2E,EAAaP,GAAcpE,GAC3B4E,EAAiB5E,EAAOsE,UAAUO,oBACtC,OAXyB,SAAUF,EAAYC,GAC/C,OAAOD,GAAwC,IAA1BC,EAAe7S,QAAgB6S,EAAe,KAAOD,EAUtEG,CAAqBH,EAAYC,GARpB,SAAUD,GAC3B,OAAOxF,GAAS4F,KAAKJ,EAAWK,iBAAiB,aAAa,SAAU1E,GACtE,OAAOd,GAAWc,MAOX2E,CAAaN,GAEbxF,GAAS4F,KAAKH,GAAgB,SAAUtE,GAC7C,OAAOd,GAAWc,IAAQqE,IAAerE,MAW3C4E,GAAuB,SAAUlF,GACnC,IAAI4E,EAAiB5E,EAAOsE,UAAUO,oBACtC,OAAO1F,GAAS4F,KATa,SAAU/E,EAAQmF,GAC/C,IAAIC,EAAgBjG,GAAS/O,IAAI+U,GAAM,SAAU7E,GAE/C,OADeN,EAAOxG,IAAIgL,UAAUlE,EAAK,WAAYmE,GAAsBzE,EAAQM,KACtDA,KAE/B,OAAO6D,GAASkB,OAAOD,GAIFE,CAAyBtF,EAAQ4E,IAAiB,SAAUtD,GAC/E,OAAO3B,GAAe2B,OAMtBmD,GAAwB,SAAUzE,EAAQM,GAC5C,IAAIiF,EAAkBvF,EAAOxG,IAAIgM,WAAWlF,EAAK,SAEjD,OADWiF,EAAgBxT,OAAS,EAAIwT,EAAgB,GAAKvF,EAAOyF,WAGlEC,GAAyB,SAAU1F,EAAQM,GAC7C,IAAIqF,EAAc3F,EAAOxG,IAAIgM,WAAWlF,EAAK,QAASmE,GAAsBzE,EAAQM,IACpF,OAAOzN,EAAK8S,IAOVC,GAAuB,SAAU5F,GACnC,IAAI6F,EANiB,SAAU7F,GAC/B,IAAI8F,EAAYJ,GAAuB1F,EAAQA,EAAOsE,UAAUC,YAC5DwB,EAAkBtV,EAAOuP,EAAOsE,UAAUO,oBAAqBpF,IACnE,OAAOqG,EAAUlV,UAAUoV,OAAOD,GAGdE,CAAiBjG,GACrC,OAAOkG,GAAmBlG,EAAQ6F,IAEhCK,GAAqB,SAAUlG,EAAQmG,GACzC,IAAIC,EAAYhW,EAAI+V,GAAO,SAAUE,GACnC,OAAOX,GAAuB1F,EAAQqG,GAAM3W,MAAM2W,MAEpD,OAAOlC,GAASkB,OAAOe,IAGrBE,GAAQ,SAAUC,EAAIC,EAAI9X,GAC5B,OAAO6X,EAAG9W,UAAY+W,EAAG/W,SAAW8B,EAAST,KAAKpC,EAAE6X,EAAG3W,WAAY4W,EAAG5W,aAAe2B,EAAS1C,QAY5F4X,GAAgB,SAAUzG,EAAQ0G,EAAQhL,GAC5C,OAAOsE,EAAO2G,KAAK,eAAgB,CACjCD,OAAQA,EACRhL,QAASA,KAQTkL,GAAc,SAAUpN,EAAKqN,EAAUtZ,GACzC,IAAKU,EAASV,GAEZ,MADA4M,QAAQC,MAAM,qCAAsCyM,EAAU,YAAatZ,EAAO,cAAeiM,GAC3F,IAAI1J,MAAM,+BAAiCvC,IAPnC,SAAUiM,GAC1B,YAAqBvJ,IAAduJ,EAAIsN,OAAuBzY,EAAWmL,EAAIsN,MAAMC,mBAQnDC,CAAYxN,IACdA,EAAIsN,MAAMG,YAAYJ,EAAUtZ,IAQhC2Z,GAAc,SAAUzJ,EAAQG,GAClCQ,GAAOX,EAAOwE,KAAMrE,EAAMyI,OAUxBc,GAAgB,SAAUvN,EAAOwN,GACnC,IAAIC,EAAU,CACZhB,KAAM5M,GAAaY,QAAQ+M,EAAUxN,GACrCqI,KAAMxI,GAAaY,QAAQ,KAAMT,IAGnC,OADAwE,GAAOiJ,EAAQhB,KAAMgB,EAAQpF,MACtBoF,GAmCLC,GAAe,SAAU1N,EAAO2N,EAAMC,GACxC,IAAIC,EAAUF,EAAK7V,MAAM,EAAG8V,EAAME,OAMlC,OALA7U,EAAK4U,GAASpX,MAAK,SAAUgX,IANd,SAAUA,EAASpF,GAClC7D,GAAOiJ,EAAQhB,KAAMpE,GACrBoF,EAAQpF,KAAOA,EAMb0F,CAAWN,EAdE,SAAUzN,EAAO4D,EAAMoK,GACtC,IAAI3F,EAAOxI,GAAaY,QAAQ,KAAMT,GAGtC,OAFAqD,GAAOgF,EAAMzE,GACbc,GAAS2D,EAAM2F,GACR3F,EASM4F,CAAWjO,EAAO4N,EAAMM,eAAgBN,EAAMI,UAnBtC,SAAUP,EAASG,GACpC1Z,GAAKuZ,EAAQhB,QAAUmB,EAAMJ,WAC/BC,EAAQhB,KAAOtH,GAAOsI,EAAQhB,KAAMmB,EAAMJ,WAE5CnK,GAAOoK,EAAQhB,KAAMmB,EAAMO,gBAiBzBC,CAAiBX,EAASG,MAErBC,GAELQ,GAAY,SAAUrO,EAAO2N,EAAMC,GACrC,IAtDqCU,EAsDjCC,EA3Ce,SAAUvO,EAAO4N,EAAOY,GAE3C,IADA,IAAID,EAAW,GACNlW,EAAI,EAAGA,EAAImW,EAAMnW,IACxBkW,EAASvW,KAAKuV,GAAcvN,EAAO4N,EAAMJ,WAE3C,OAAOe,EAsCQE,CAAezO,EAAO4N,EAAOA,EAAME,MAAQH,EAAKxV,QAI/D,OA/DiB,SAAUoW,GAC3B,IAAK,IAAIlW,EAAI,EAAGA,EAAIkW,EAASpW,OAAQE,IACnCiV,GAAYiB,EAASlW,EAAI,GAAIkW,EAASlW,IA0DxCqW,CAAaH,GArCQ,SAAUA,EAAUX,GACzC,IAAK,IAAIvV,EAAI,EAAGA,EAAIkW,EAASpW,OAAS,EAAGE,IAhCvByJ,EAiCZyM,EAASlW,GAAGgQ,KAjCS4E,EAiCH,kBAjCatZ,EAiCM,OAhCvCiM,OAAAA,EAAAA,EAAMkC,EAAQlC,IAClBoN,GAAYpN,EAAKqN,EAAUtZ,GAFnB,IAAUmO,EAASmL,EAAUtZ,EACjCiM,EAkCJ3G,EAAKsV,GAAU9X,MAAK,SAAUgX,GAC5BpK,GAAOoK,EAAQhB,KAAMmB,EAAMO,gBAC3B9K,GAAOoK,EAAQpF,KAAMuF,EAAMM,gBAC3BxJ,GAAS+I,EAAQpF,KAAMuF,EAAMI,YA+B/BW,CAAiBJ,EAAUX,GAxDUU,EAyDhBC,EAxDrB7B,GAAMzT,EAwDS0U,GAxDK3U,EAAKsV,GAAOhB,IAyDzBK,EAAKvB,OAAOmC,IAWjBK,GAAS,SAAUC,GACrB,OAAOhN,GAAKgN,EAAI,UAEdC,GAAoB,SAAUD,GAChC,OAAO1K,GAAW0K,GAAIrY,IAAIoY,IAAQ9Y,OAAM,IAMtCiZ,GAAa,SAAUnB,GACzB,OAAOA,EAAME,MAAQ,GAEnBkB,GAAa,SAAUpB,GACzB,OAAOA,EAAMoB,YAEXC,GAAmB,SAAUzG,GAC/B,IAAInD,EAAatB,GAASyE,GACtBwF,EAXG5J,GAWwBoE,GAXVhS,IAAIoY,IAAQ9Y,OAAM,GAWFuP,EAAWvN,MAAM,GAAI,GAAKuN,EAC/D,OAAO7O,EAAIwX,EAASlJ,KAmDlBoK,GAAmB,SAAUC,GAU/B,OATA1Y,EAAK0Y,GAAS,SAAUvB,EAAOvV,IAbP,SAAU8W,EAASC,GAC3C,IAAItB,EAAQqB,EAAQC,GAAOtB,MACvB3O,EAAU,SAAUyO,GACtB,OAAOA,EAAME,QAAUA,IAAUF,EAAMyB,OAErC3W,EAAQ,SAAUkV,GACpB,OAAOA,EAAME,MAAQA,GAEvB,OAAOrV,EAAUK,EAAQqW,EAAQrX,MAAM,EAAGsX,IAASjQ,EAASzG,GAAOnC,SAAQ,WACzE,OAAOkC,EAAU0W,EAAQrX,MAAMsX,EAAQ,GAAIjQ,EAASzG,OAKpD4W,CAAoBH,EAAS9W,GAAG3C,MAAK,WAC/BkY,EAAMyB,OApBU,SAAUzB,GAClCA,EAAMO,eAAiBtL,GAAS+K,EAAMO,gBAAgB,SAAUoB,EAAQhM,GACtE,MAAe,UAARA,KAmBHiM,CAAoB5B,MAErB,SAAU6B,GACX,OA5BsCC,EA4BJD,GA5BJ5T,EA4BH+R,GA3BxBJ,SAAWkC,EAAOlC,cACzB3R,EAAOsS,eAAiBjV,EAAS,GAAIwW,EAAOvB,iBAFpB,IAAUtS,EAAQ6T,QA+BnCP,GAiBLQ,GAAY,SAAU7B,EAAO8B,EAAeC,EAAgBxH,GAC9D,OAAOlE,GAAWkE,GAAMxR,OAAO+X,IAAQlZ,MAAK,WAC1Cka,EAAcnZ,MAAK,SAAUiU,GACvBvV,GAAGuV,EAAU0E,MAAO/G,IACtBwH,EAAeC,KAAI,MAGvB,IAAIC,EAnFU,SAAUvH,EAAIsF,EAAOkB,GACrC,OAAOnL,GAAO2E,GAAI3R,OAAOuM,IAAW5M,KAAI,SAAUiW,GAChD,MAAO,CACLqB,MAAOA,EACPuB,OAAO,EACPL,WAAYA,EACZhB,QAASiB,GAAiBzG,GAC1B0F,eAAgBxK,GAAM8E,GACtB2F,eAAgBzK,GAAM+I,GACtBe,SAAUtZ,GAAKuY,OA0EMuD,CAAY3H,EAAMyF,EAAO+B,EAAe9W,OAC/D6W,EAAcnZ,MAAK,SAAUiU,GACvBvV,GAAGuV,EAAUuF,IAAK5H,IACpBwH,EAAeC,KAAI,MAGvB,IAAII,EAAmB9L,GAAUiE,GAAMxR,OAAO+X,IAAQpY,KAAI,SAAUiW,GAClE,OAAO0D,GAAUrC,EAAO8B,EAAeC,EAAgBpD,MACtD3W,MAAM,IACT,OAAOia,EAAiB/Y,UAAUoV,OAAO8D,MACxC,SAAUzD,GACX,OAAO0D,GAAUrC,EAAO8B,EAAeC,EAAgBpD,OAGvD0D,GAAY,SAAUrC,EAAO8B,EAAeC,EAAgBpD,GAC9D,OAAO/V,EAAKqN,GAAS0I,IAAO,SAAU3K,GAGpC,OAFa8M,GAAO9M,GAAWqO,GAAYR,IAC5B7B,EAAQ,EACC8B,EAAeC,EAAgB/N,OAcvDsO,GAAoB,SAAUhK,EAAQ+I,GACxC,IAAIkB,EAAoBnB,GAAiBC,GACzC,OAAO3Y,EAAI6Z,GAAmB,SAAUzC,GACtC,IA1PyBjJ,EAAU3E,EAEjCuH,EAwPEyG,GA1PqBrJ,EA0PEiJ,EAAMI,QAxP/BzG,GADMvH,GAASE,UACAoQ,yBACnB7Z,EAAKkO,GAAU,SAAU7C,GACvByF,EAAS9C,YAAY3C,EAAQlC,QAExBC,GAAaH,QAAQ6H,IAqP1B,OAAO1H,GAAaH,QAAQwH,GAAgBd,EAAQ4H,EAAQpO,UAG5D2Q,GAAmB,SAAUnK,EAAQ+I,GACvC,IAAIkB,EAAoBnB,GAAiBC,GACzC,OA1JgB,SAAUnP,EAAOmP,GACjC,IAAIxB,EAAOpV,EAAM4W,GAAS,SAAUxB,EAAMC,GACxC,OAAOA,EAAME,MAAQH,EAAKxV,OAASkW,GAAUrO,EAAO2N,EAAMC,GAASF,GAAa1N,EAAO2N,EAAMC,KAC5F,IACH,OAAO5U,EAAK2U,GAAMnX,KAAI,SAAUiX,GAC9B,OAAOA,EAAQhB,QAqJV+D,CAAYpK,EAAOqK,gBAAiBJ,GAAmBrZ,WAsB5D0Z,GAAkB,SAAUtK,EAAQmG,EAAOoE,GAC7C,IAAIC,EA3CW,SAAUrE,EAAOqD,GAChC,IA1CIjc,EA0CAkc,GA1CAlc,GA0CsB,EAnCnB,CACLoF,IAPQ,WACR,OAAOpF,GAOPmc,IALQ,SAAUtY,GAClB7D,EAAQ6D,KAuCV,OAAOhB,EAAI+V,GAAO,SAAUE,GAC1B,MAAO,CACLoE,WAAYpE,EACZ0C,QAASgB,GAJM,EAIkBP,EAAeC,EAAgBpD,OAqCpDqE,CAAWvE,EAVN,SAAUnG,GAC/B,IAAI2K,EAAoBva,EAAI8U,GAAqBlF,GAASvG,GAAaH,SACvE,OAAOgN,GAAM/T,EAAKoY,EAAmBlc,EAAIia,KAAqBnW,EAAKG,EAAQiY,GAAoBlc,EAAIia,MAAqB,SAAUM,EAAOa,GACvI,MAAO,CACLb,MAAOA,EACPa,IAAKA,MAKyBe,CAAiB5K,IACnD3P,EAAKma,GAAW,SAAUK,IAhBA,SAAU9B,EAASwB,GAC7Cla,EAAKI,EAAOsY,EAASH,KAAa,SAAUpB,GAC1C,OAxHc,SAAU+C,EAAa/C,GACvC,OAAQ+C,GACR,IAAK,SACH/C,EAAME,QACN,MACF,IAAK,UACHF,EAAME,QACN,MACF,IAAK,UACHF,EAAME,MAAQ,EAEhBF,EAAMyB,OAAQ,EA6GL6B,CAAYP,EAAa/C,MAehCuD,CAAsBF,EAAS9B,QAASwB,GACxC,IAxlBqBrM,EAwlBjB8M,EAxBa,SAAUhL,EAAQ+I,GACrC,OAAOzY,EAhrCK,SAAUuB,EAAInD,GAC1B,GAAkB,IAAdmD,EAAGE,OACL,MAAO,GAKP,IAHA,IAAIkZ,EAAUvc,EAAEmD,EAAG,IACfG,EAAI,GACJkC,EAAQ,GACHjC,EAAI,EAAGH,EAAMD,EAAGE,OAAQE,EAAIH,EAAKG,IAAK,CAC7C,IAAIxE,EAAIoE,EAAGI,GACP3E,EAAOoB,EAAEjB,GACTH,IAAS2d,IACXjZ,EAAEJ,KAAKsC,GACPA,EAAQ,IAEV+W,EAAU3d,EACV4G,EAAMtC,KAAKnE,GAKb,OAHqB,IAAjByG,EAAMnC,QACRC,EAAEJ,KAAKsC,GAEFlC,EA4pCGkZ,CAAQnC,EAASJ,KAAa,SAAUI,GAElD,OADsBnW,EAAKmW,GAAS3Y,IAAIuY,IAAYjZ,OAAM,GACjCya,GAAiBnK,EAAQ+I,GAAWiB,GAAkBhK,EAAQ+I,MAqBnEoC,CAAenL,EAAQ6K,EAAS9B,SACpD1Y,EAAK2a,GAAe,SAAUI,GAC5B3E,GAAczG,EAAwB,WAAhBuK,EAA2B,aAAe,cAAea,EAAa5R,QA1lBzE0E,EA4lBZ2M,EAASJ,WA3lBpBpa,EA2lBgC2a,GA3lBjB,SAAUvd,GACvBwQ,GAAOC,EAAQzQ,MA2lBf+Q,GAAOqM,EAASJ,gBAIhBY,GAAuB,SAAUrL,EAAQuK,GAC3C,IAAIpE,EAAQ/V,EAAIwV,GAAqB5F,GAASvG,GAAaH,SACvDgS,EAAUlb,EArUS,SAAU4P,GACjC,OAAOvP,EAAOyU,GAAqBlF,GAASJ,IAoU1B2L,CAAmBvL,GAASvG,GAAaH,SACvDkS,GAAY,EAChB,GAAIrF,EAAMpU,QAAUuZ,EAAQvZ,OAAQ,CAClC,IAAI0Z,EAAWzL,EAAOsE,UAAUoH,cAChCpB,GAAgBtK,EAAQmG,EAAOoE,GA/Zf,SAAUvK,EAAQuK,EAAae,GAE/Cjb,EAAKib,EADa,WAAhBf,EACYxH,GAEA,SAAUd,GACtB,OAAOD,GAAchC,EAAQiC,KA2Z/B0J,CAAc3L,EAAQuK,EAAae,GACnCtL,EAAOsE,UAAUsH,eAAeH,GAChCzL,EAAOsE,UAAUuH,OAAOtI,GAAevD,EAAOsE,UAAUwH,WACxD9L,EAAO+L,cACPP,GAAY,EAEd,OAAOA,GAELQ,GAAsB,SAAUhM,GAClC,OAAOqL,GAAqBrL,EAAQ,WAElCiM,GAAuB,SAAUjM,GACnC,OAAOqL,GAAqBrL,EAAQ,YAElCkM,GAAuB,SAAUlM,GACnC,OAAOqL,GAAqBrL,EAAQ,YAGlCmM,GAAWlf,QAAQC,KAAKC,MAAMC,QAAQ,+BAEtCgf,GAAQlN,GAAS6C,IACjBsK,GAAiB,SAAU7I,GAC7B,IAAIiI,EAAW,GACXa,EAAgB,SAAUtD,GAC5B,IAAIuD,EAAYtJ,EAAWC,EAC3BD,EAAYO,EAAIwF,EAAQ,iBAAmB,gBAC3C9F,EAASM,EAAIwF,EAAQ,cAAgB,aACV,IAAvB/F,EAAUrH,WACZ2Q,EAAaH,GAAM3K,OAAO,OAAQ,CAAE,gBAAiB,aACjDwB,EAAUhJ,iBACZiJ,EAASsJ,KAAKC,IAAIvJ,EAAQD,EAAU/I,WAAWnI,OAAS,GACpDiX,EACF/F,EAAU9E,aAAaoO,EAAYtJ,EAAU/I,WAAWgJ,IAExDkJ,GAAMvJ,YAAY0J,EAAYtJ,EAAU/I,WAAWgJ,KAGrDD,EAAU5E,YAAYkO,GAExBtJ,EAAYsJ,EACZrJ,EAAS,GAEXuI,EAASzC,EAAQ,iBAAmB,gBAAkB/F,EACtDwI,EAASzC,EAAQ,cAAgB,aAAe9F,GAMlD,OAJAoJ,GAAc,GACT9I,EAAIkJ,WACPJ,IAEKb,GAELkB,GAAkB,SAAUlB,GAC9B,IAAImB,EAAkB,SAAU5D,GAC9B,IAAI/F,EAAWC,EAAQ3J,EAcvB0J,EAAY1J,EAAOkS,EAASzC,EAAQ,iBAAmB,gBACvD9F,EAASuI,EAASzC,EAAQ,cAAgB,aACrC/F,IAGsB,IAAvBA,EAAUrH,WACZsH,EAnBc,SAAUD,GAExB,IADA,IAAI1J,EAAO0J,EAAUvF,WAAWK,WAAY8O,EAAM,EAC3CtT,GAAM,CACX,GAAIA,IAAS0J,EACX,OAAO4J,EAEa,IAAlBtT,EAAKqC,UAAyD,aAAvCrC,EAAKuI,aAAa,kBAC3C+K,IAEFtT,EAAOA,EAAK+J,YAEd,OAAQ,EAQCwJ,CAAU7J,GACnBA,EAAYA,EAAUvF,WACtB0O,GAAM5N,OAAOjF,IACR0J,EAAUhJ,iBAAmBmS,GAAMjM,QAAQ8C,IAC9CA,EAAU5E,YAAY+N,GAAM3K,OAAO,QAGvCgK,EAASzC,EAAQ,iBAAmB,gBAAkB/F,EACtDwI,EAASzC,EAAQ,cAAgB,aAAe9F,IAElD0J,GAAgB,GAChBA,IACA,IAAIpJ,EAAM4I,GAAM5J,YAKhB,OAJAgB,EAAIM,SAAS2H,EAAS7H,eAAgB6H,EAAS5H,aAC3C4H,EAASzH,cACXR,EAAIU,OAAOuH,EAASzH,aAAcyH,EAASxH,WAEtCV,GAAeC,IAGpBuJ,GAA+B,SAAUC,GAC3C,OAAQA,GACR,IAAK,KACH,MAAO,eACT,IAAK,KACH,MAAO,eACT,IAAK,KACH,MAAO,iBAIPC,GAAe,SAAU5G,GAC3B,MAAO,UAAUrS,KAAKqS,EAAK6G,YAEzBC,GAAY,SAAUnN,EAAQgN,EAAUI,GAC1C,IAAIC,EAAoB,SAAUC,GAChC,IAAIC,EAASlb,EAAUib,EAAEE,QAAShO,GAAYK,IAAiBpP,QAAO,SAAU4V,GAC9E,OAAOA,EAAKtJ,WAAaiQ,IAAaC,GAAa5G,MAClD5W,SACH2d,EAASG,IAEPC,EAAUxN,EAAOxG,IAAIgM,WAAWxF,EAAOsE,UAAUnB,WAGrD,OAFAkK,EAAkB,CAAEG,QAASA,IAC7BxN,EAAOyN,GAAG,aAAcJ,GACjB,WACL,OAAOrN,EAAO0N,IAAI,aAAcL,KAQhCzL,GAAa,SAAUtB,EAAKpD,GAC9BiC,GAAS9O,KAAK6M,GAAO,SAAU3P,EAAO4P,GACpCmD,EAAIlD,aAAaD,EAAK5P,OAStBogB,GAAwB,SAAUnU,EAAKiP,EAAImF,IAfzB,SAAUpU,EAAKiP,EAAImF,GACvC,IAAItgB,EAAOsgB,EAAO,mBAAqBA,EAAO,mBAAqB,KACnEpU,EAAIqU,SAASpF,EAAI,kBAAmBnb,GAcpCwgB,CAAgBtU,EAAKiP,EAAImF,GAPL,SAAUpU,EAAKiP,EAAImF,GACvChM,GAAW6G,EAAImF,EAAO,oBACtBzO,GAAS9O,KAAKmJ,EAAIkH,OAAO,KAAM+H,IAAK,SAAUrG,GAC5CR,GAAWQ,EAAIwL,EAAO,4BAKxBG,CAAgBvU,EAAKiP,EAAImF,IAQvBI,GAAkB,SAAUhO,EAAQwD,EAAKwF,EAAOiF,GAClD,IAAIhL,EAAYO,EAAIwF,EAAQ,iBAAmB,gBAC3C9F,EAASM,EAAIwF,EAAQ,cAAgB,aAOzC,IAN2B,IAAvB/F,EAAUrH,WACZqH,EAAYA,EAAU/I,WAAWsS,KAAKC,IAAIvJ,EAAQD,EAAU/I,WAAWnI,OAAS,KAAOkR,IAEpF+F,GAASlJ,GAAKmD,EAAUK,eAC3BL,EAAYA,EAAUK,aAEjBL,EAAUvF,aAAeuQ,GAAM,CACpC,GAAIlO,GAAYC,EAAQiD,GACtB,OAAOA,EAET,GAAI,YAAYjP,KAAKiP,EAAUvF,WAAWX,UACxC,OAAOkG,EAETA,EAAYA,EAAUvF,WAExB,OAAOuF,GAiDLiL,GAAY,SAAUlO,EAAQgN,EAAUY,GAC1C,IAAIpK,EAAMxD,EAAOsE,UAAUwH,SACvBqC,EAAe,KACfF,EAAOxJ,GAAsBzE,EAAQA,EAAOsE,UAAUC,UAAS,IAC/D/K,EAAMwG,EAAOxG,IACjB,GAA2D,UAAvDA,EAAI4U,mBAAmBpO,EAAOsE,UAAUnB,WAA5C,CAIiB,QADjB6J,EAAWA,EAASrL,iBAElBwM,EAAe,MAEjB,IAAI1C,EAAWY,GAAe7I,GAC1B6K,EA5DsB,SAAUrO,EAAQwD,EAAKyK,GAMjD,IALA,IAGI3M,EAHAgN,EAAa,GAAI9U,EAAMwG,EAAOxG,IAC9B+U,EAAYP,GAAgBhO,EAAQwD,GAAK,EAAMyK,GAC/CO,EAAUR,GAAgBhO,EAAQwD,GAAK,EAAOyK,GAE9CQ,EAAW,GACNlV,EAAOgV,EAAWhV,IACzBkV,EAAS7c,KAAK2H,GACVA,IAASiV,GAFkBjV,EAAOA,EAAK+J,aAiC7C,OA3BAnE,GAAS9O,KAAKoe,GAAU,SAAUlV,GAChC,GAAIwG,GAAYC,EAAQzG,GAGtB,OAFA+U,EAAW1c,KAAK2H,QAChB+H,EAAQ,MAGV,GAAI9H,EAAI2G,QAAQ5G,IAASuG,GAAKvG,GAK5B,OAJIuG,GAAKvG,IACPC,EAAIgF,OAAOjF,QAEb+H,EAAQ,MAGV,IAAIgC,EAAc/J,EAAK+J,YACnB6I,GAASuC,eAAenV,KACtBiG,GAAW8D,IAAgBvD,GAAYC,EAAQsD,KAAiBA,GAAe/J,EAAKmE,aAAeuQ,GACrG3M,EAAQ,MAIPA,IACHA,EAAQ9H,EAAIiI,OAAO,KACnBlI,EAAKmE,WAAWS,aAAamD,EAAO/H,GACpC+U,EAAW1c,KAAK0P,IAElBA,EAAMjD,YAAY9E,OAEb+U,EAqBkBK,CAAsB3O,EAAQwD,EAAKyK,GAC5D9O,GAAS9O,KAAKge,GAAoB,SAAU/M,GAC1C,IAAIsN,EACAC,EAAUvN,EAAM+B,gBAChB5F,EAAS6D,EAAM5D,WACdiC,GAAelC,KACdoR,GAAWrP,GAAWqP,IAAYA,EAAQ9R,WAAaiQ,GAzBxC,SAAUxT,EAAKsV,EAAKlB,GAC3C,IAAImB,EAAWvV,EAAIwV,SAASF,EAAK,mBAC7BG,EAAcrB,EAASA,EAAO,mBAAqB,GAEvD,OAAOmB,KADuB,OAAhBE,EAAuB,GAAKA,GAsBiCC,CAAmB1V,EAAKqV,EAASjB,IACtGgB,EAAYC,EACZvN,EAAQ9H,EAAI2V,OAAO7N,EAAO6M,GAC1BU,EAAQxQ,YAAYiD,KAEpBsN,EAAYpV,EAAIiI,OAAOuL,GACvB1L,EAAM5D,WAAWS,aAAayQ,EAAWtN,GACzCsN,EAAUvQ,YAAYiD,GACtBA,EAAQ9H,EAAI2V,OAAO7N,EAAO6M,IApGf,SAAU3U,EAAKkC,EAAS0T,GACzCjQ,GAAS9O,KAAK+e,GAAQ,SAAUtI,GAC9B,IAAIuI,EACJ,OAAO7V,EAAIqU,SAASnS,IAAU2T,EAAK,IAAOvI,GAAS,GAAIuI,OAmGrDC,CAAa9V,EAAK8H,EAAO,CACvB,SACA,eACA,gBACA,cACA,aACA,UACA,gBACA,iBACA,eACA,gBAEFqM,GAAsBnU,EAAKoV,EAAWhB,GACtC2B,GAAuBvP,EAAOxG,IAAKoV,OAGvC5O,EAAOsE,UAAUuH,OAAOc,GAAgBlB,MAatC+D,GAAc,SAAUhW,EAAKiW,EAAOC,GACtC,OAZiB,SAAUD,EAAOC,GAClC,OAAOD,GAASC,GAASlQ,GAAWiQ,IAAUA,EAAM1S,WAAa2S,EAAM3S,SAWhE4S,CAAaF,EAAOC,IATN,SAAUlW,EAAKiW,EAAOC,GAG3C,OAFkBlW,EAAIwV,SAASS,EAAO,mBAAmB,KAC7CjW,EAAIwV,SAASU,EAAO,mBAAmB,GAOdE,CAAiBpW,EAAKiW,EAAOC,KAJ/BG,EAI+DH,EAAPD,EAH/EvC,YAAc2C,EAAK3C,WADZ,IAAgB2C,GAMjCN,GAAyB,SAAU/V,EAAKoV,GAC1C,IAAIC,EAAStV,EAEb,GADAsV,EAAUD,EAAUtL,YAChBkM,GAAYhW,EAAKoV,EAAWC,GAAU,CACxC,KAAOtV,EAAOsV,EAAQ9Q,YACpB6Q,EAAUvQ,YAAY9E,GAExBC,EAAIgF,OAAOqQ,GAGb,GADAA,EAAUD,EAAUvL,gBAChBmM,GAAYhW,EAAKoV,EAAWC,GAAU,CACxC,KAAOtV,EAAOsV,EAAQ7Q,WACpB4Q,EAAUzQ,aAAa5E,EAAMqV,EAAU7Q,YAEzCvE,EAAIgF,OAAOqQ,KAaXiB,GAAsB,SAAU9P,EAAQ2E,EAAYwB,EAAO6G,EAAUY,GACvE,IAAImC,EAAevQ,GAAWmF,GAC9B,GAAIoL,GAAgBpL,EAAW5H,WAAaiQ,IAAagD,GAAmBpC,GAC1E1B,GAAqBlM,OAChB,CACLkO,GAAUlO,EAAQgN,EAAUY,GAC5B,IAAInC,EAAWY,GAAerM,EAAOsE,UAAUwH,QAAO,IAClDmE,EAAWF,EAz7CnB,WACE,IAAK,IAAI5e,EAAI,EAAGc,EAAI,EAAGie,EAAKjd,UAAUlB,OAAQE,EAAIie,EAAIje,IACpDd,GAAK8B,UAAUhB,GAAGF,OACf,IAAIC,EAAItE,MAAMyD,GAAIqL,EAAI,EAA3B,IAA8BvK,EAAI,EAAGA,EAAIie,EAAIje,IAC3C,IAAK,IAAIlB,EAAIkC,UAAUhB,GAAIke,EAAI,EAAGC,EAAKrf,EAAEgB,OAAQoe,EAAIC,EAAID,IAAK3T,IAC5DxK,EAAEwK,GAAKzL,EAAEof,GACb,OAAOne,EAm7CyBqe,CAAe,CAAC1L,GAAawB,GAASA,EACpEhH,GAAS9O,KAAK4f,GAAU,SAAU3P,IAlBrB,SAAUN,EAAQqG,EAAM2G,EAAUY,GACjD,GAAIvH,EAAKtJ,WAAaiQ,EAAU,CAC9B,IAAIsD,EAAUtQ,EAAOxG,IAAI2V,OAAO9I,EAAM2G,GACtCW,GAAsB3N,EAAOxG,IAAK8W,EAAS1C,GAC3CnH,GAAczG,EAAQ+M,GAA6BC,GAAWsD,QAE9D3C,GAAsB3N,EAAOxG,IAAK6M,EAAMuH,GACxCnH,GAAczG,EAAQ+M,GAA6BC,GAAW3G,GAY5DkK,CAAWvQ,EAAQM,EAAK0M,EAAUY,MAEpC5N,EAAOsE,UAAUuH,OAAOc,GAAgBlB,MAGxCuE,GAAqB,SAAUpC,GACjC,MAAO,oBAAqBA,GAuB1B4C,GAAa,SAAUxQ,EAAQgN,EAAUyD,GAC3C,IAAI9L,EAAaP,GAAcpE,GAC3B0Q,EAAmBhM,GAAoB1E,GACvC4N,EAAS1f,EAASuiB,GAAWA,EAAU,GACvCC,EAAiB3e,OAAS,EAC5B+d,GAAoB9P,EAAQ2E,EAAY+L,EAAkB1D,EAAUY,GA1BjD,SAAU5N,EAAQ2E,EAAYqI,EAAUY,GAC7D,GAAIjJ,IAAe3E,EAAOyF,UAG1B,GAAId,EACF,GAAIA,EAAW5H,WAAaiQ,GAAagD,GAAmBpC,IAAYX,GAAatI,GAE9E,CACL,IAAI8G,EAAWY,GAAerM,EAAOsE,UAAUwH,QAAO,IACtD6B,GAAsB3N,EAAOxG,IAAKmL,EAAYiJ,GAC9C,IAAI0C,EAAUtQ,EAAOxG,IAAI2V,OAAOxK,EAAYqI,GAC5CuC,GAAuBvP,EAAOxG,IAAK8W,GACnCtQ,EAAOsE,UAAUuH,OAAOc,GAAgBlB,IACxCyC,GAAUlO,EAAQgN,EAAUY,GAC5BnH,GAAczG,EAAQ+M,GAA6BC,GAAWsD,QAR9DpE,GAAqBlM,QAWvBkO,GAAUlO,EAAQgN,EAAUY,GAC5BnH,GAAczG,EAAQ+M,GAA6BC,GAAWrI,GAU9DgM,CAAiB3Q,EAAQ2E,EAAYqI,EAAUY,IAI/CgD,GAAQ1R,GAAS6C,IAsBjB8O,GAAiB,SAAUrX,EAAKkC,GAClCyD,GAAS9O,KAAK8O,GAAS4F,KAAKvL,EAAIkH,OAAO,QAAShF,KAAW,SAAUyG,IAtBnD,SAAU3I,EAAK2I,GACjC,IAAI0M,EACAnR,EAAayE,EAAGzE,WACQ,OAAxBA,EAAWX,UAAqBW,EAAWK,aAAeoE,KAC5D0M,EAAUnR,EAAW2F,kBACe,OAArBwL,EAAQ9R,UACrB8R,EAAQxQ,YAAY8D,GAChB9B,GAAU7G,EAAKkE,IACjBkT,GAAMpS,OAAOd,IAGfkT,GAAM/C,SAASnQ,EAAY,gBAAiB,SAG5C8B,GAAW9B,KACbmR,EAAUnR,EAAW2F,kBACe,OAArBwL,EAAQ9R,UACrB8R,EAAQxQ,YAAY8D,GAMtB2O,CAActX,EAAK2I,OAInB4O,GAAyB,SAAU/Q,EAAQwD,EAAKwN,EAAW/C,GAC7D,IAAI1U,EAAOiK,EAAII,eACXV,EAASM,EAAIK,YACjB,GAAItE,GAAWhG,KAAUyX,EAAY9N,EAAS3J,EAAK6J,KAAKrR,OAASmR,EAAS,GACxE,OAAO3J,EAET,IAAI0X,EAAiBjR,EAAOC,OAAOiR,sBACb,IAAlB3X,EAAKqC,WACPrC,EAAO0C,GAASkH,QAAQ5J,EAAM2J,IAEhC,IAAIiO,EAAS,IAAIjV,GAAS3C,EAAM0U,GAMhC,IALI+C,GAt6BU,SAAUxX,EAAKD,GAC7B,QAAKuG,GAAKvG,IAGHC,EAAI2G,QAAQ5G,EAAK+J,eAAiBxD,GAAKvG,EAAK8J,iBAm6B7C+N,CAAUpR,EAAOxG,IAAKD,IACxB4X,EAAOE,OAGJ9X,EAAO4X,EAAOH,EAAY,OAAS,YAAY,CACpD,GAAsB,OAAlBzX,EAAKwD,WAAsBxD,EAAKU,gBAClC,OAAOV,EAET,GAAI0X,EAAe1X,EAAKwD,UACtB,OAAOxD,EAET,GAAIgG,GAAWhG,IAASA,EAAK6J,KAAKrR,OAAS,EACzC,OAAOwH,IAIT+X,GAAuB,SAAU9X,EAAK8G,GACxC,IAAIpG,EAAaoG,EAAIpG,WACrB,OAA6B,IAAtBA,EAAWnI,SAAiByN,GAAWtF,EAAW,KAAOV,EAAI2G,QAAQjG,EAAW,KAOrFqX,GAAe,SAAU/X,EAAKgY,EAASC,GACzC,IAAIlY,EACAmY,EAAYJ,GAAqB9X,EAAKiY,GAASA,EAAM1T,WAAa0T,EAEtE,GAT2B,SAAUjY,EAAK8G,GACtCgR,GAAqB9X,EAAK8G,IAC5B9G,EAAIgF,OAAO8B,EAAIvC,YAAY,GAM7B4T,CAAuBnY,EAAKgY,IACvBnR,GAAU7G,EAAKgY,GAAS,GAC3B,KAAOjY,EAAOiY,EAAQzT,YACpB2T,EAAUrT,YAAY9E,IAIxBqY,GAAkB,SAAUpY,EAAKgY,EAASC,GAC5C,IAAII,EACA1P,EAAKqP,EAAQ9T,WACjB,GAAKiD,GAAcnH,EAAKgY,IAAa7Q,GAAcnH,EAAKiY,GAAxD,CAGIjS,GAAWiS,EAAMzT,aACnB6T,EAAWJ,EAAMzT,WAEfmE,IAAOsP,EAAMzT,WACX8B,GAAKqC,EAAGkB,kBACV7J,EAAIgF,OAAO2D,EAAGkB,iBAGlB,IAAI9J,EAAOkY,EAAMzT,UACbzE,GAAQuG,GAAKvG,IAASiY,EAAQvX,iBAChCT,EAAIgF,OAAOjF,GAET8G,GAAU7G,EAAKiY,GAAO,IACxBjY,EAAIsY,EAAEL,GAAOjR,QAEf+Q,GAAa/X,EAAKgY,EAASC,GACvBI,GACFJ,EAAMpT,YAAYwT,GAEpB,IACIE,EADW1W,GAAW5B,GAAaH,QAAQmY,GAAQhY,GAAaH,QAAQkY,IAC/ChY,EAAIgM,WAAWgM,EAAShS,GAAYiS,GAAS,GAC1EjY,EAAIgF,OAAOgT,GACXnhB,EAAK0hB,GAAa,SAAU1L,GACtBhG,GAAU7G,EAAK6M,IAASA,IAAS7M,EAAIqH,WACvCrH,EAAIgF,OAAO6H,QASb2L,GAAe,SAAUhS,EAAQwD,EAAKyO,EAAQC,GAChD,IAAI1Y,EAAMwG,EAAOxG,IACjB,GAAIA,EAAIiH,QAAQyR,IAPK,SAAUlS,EAAQiS,EAAQC,GAC/ClS,EAAOxG,IAAIsY,EAAEI,GAAM1R,QACnBoR,GAAgB5R,EAAOxG,IAAKyY,EAAQC,GACpClS,EAAOsE,UAAU6N,kBAAkBD,EAAM,GAKvCE,CAAiBpS,EAAQiS,EAAQC,OAC5B,CACL,IAAIzG,EAAWY,GAAe7I,GAC9BoO,GAAgBpY,EAAKyY,EAAQC,GAC7BlS,EAAOsE,UAAUuH,OAAOc,GAAgBlB,MASxC4G,GAAqC,SAAUrS,EAAQgR,GACzD,IAAIxX,EAAMwG,EAAOxG,IAAK8K,EAAYtE,EAAOsE,UACrCgO,EAAoBhO,EAAUC,WAC9B0J,EAAOxJ,GAAsBzE,EAAQsS,GACrClQ,EAAK5I,EAAIgL,UAAUF,EAAUC,WAAY,KAAM0J,GACnD,GAAI7L,EAAI,CACN,IAAID,EAAKC,EAAG1E,WACZ,GAAIyE,IAAOnC,EAAOyF,WAAapF,GAAU7G,EAAK2I,GAC5C,OAAO,EAET,IAAIoQ,EAAQhP,GAAee,EAAUwH,UACjC0G,EAAYhZ,EAAIgL,UAAUuM,GAAuB/Q,EAAQuS,EAAOvB,EAAW/C,GAAO,KAAMA,GAC5F,GAAIuE,GAAaA,IAAcpQ,EAY7B,OAXApC,EAAOyS,YAAYC,UAAS,WAvhCf,IAAUnZ,EAwhCjByX,EACFgB,GAAahS,EAAQuS,EAAOC,EAAWpQ,IAzhCpB7I,EA2hCF6I,GA1hCb1E,WAAWK,aAAexE,EA2hC5B0S,GAAqBjM,GAxBb,SAAUA,EAAQwD,EAAKyO,EAAQC,GACjD,IAAIzG,EAAWY,GAAe7I,GAC9BoO,GAAgB5R,EAAOxG,IAAKyY,EAAQC,GACpC,IAAIS,EAAmBhG,GAAgBlB,GACvCzL,EAAOsE,UAAUuH,OAAO8G,GAsBdC,CAAc5S,EAAQuS,EAAOnQ,EAAIoQ,OAIhC,EACF,IAAKA,IACLxB,GAAmC,IAAtBuB,EAAM1O,aAAyC,IAApB0O,EAAMtO,UAIjD,OAHAjE,EAAOyS,YAAYC,UAAS,WAC1BxG,GAAqBlM,OAEhB,EAIb,OAAO,GA6BL6S,GAAuB,SAAU7S,EAAQgR,GAC3C,OAAOqB,GAAmCrS,EAAQgR,IArBjB,SAAUhR,EAAQgR,GACnD,IAAIxX,EAAMwG,EAAOxG,IACb8Y,EAAoBtS,EAAOsE,UAAUC,WACrC0J,EAAOxJ,GAAsBzE,EAAQsS,GACrChR,EAAQ9H,EAAIgL,UAAU8N,EAAmB9Y,EAAI2G,QAAS8N,GAC1D,GAAI3M,GAAS9H,EAAIiH,QAAQa,GAAQ,CAC/B,IAAIkC,EAAMD,GAAevD,EAAOsE,UAAUwH,UACtCgH,EAAYtZ,EAAIgL,UAAUuM,GAAuB/Q,EAAQwD,EAAKwN,EAAW/C,GAAO,KAAMA,GAC1F,GAAI6E,EAOF,OANA9S,EAAOyS,YAAYC,UAAS,YAhBhB,SAAUlZ,EAAK8H,EAAO2M,GACtC,IAAI8E,EAAcvZ,EAAIgL,UAAUlD,EAAM5D,WAAYlE,EAAI2G,QAAS8N,GAC/DzU,EAAIgF,OAAO8C,GACPyR,GAAevZ,EAAIiH,QAAQsS,IAC7BvZ,EAAIgF,OAAOuU,GAaPC,CAAYxZ,EAAK8H,EAAO2M,GACxBsB,GAAuB/V,EAAKsZ,EAAUpV,YACtCsC,EAAOsE,UAAU5D,OAAOoS,GAAW,GACnC9S,EAAOsE,UAAU2O,SAASjC,OAErB,EAGX,OAAO,EAGyDkC,CAA6BlT,EAAQgR,IAenGmC,GAAkB,SAAUnT,EAAQgR,GACtC,OAAOhR,EAAOsE,UAAU8O,cAAgBP,GAAqB7S,EAAQgR,GAd5C,SAAUhR,GACnC,IAAIsS,EAAoBtS,EAAOsE,UAAUC,WACrC0J,EAAOxJ,GAAsBzE,EAAQsS,GAEzC,SADsBtS,EAAOxG,IAAIgL,UAAU8N,EAAmB,WAAYrE,IACnD/I,GAAqBlF,GAAQjO,OAAS,KAC3DiO,EAAOyS,YAAYC,UAAS,WAC1B1S,EAAOqT,YAAY,UACnBxC,GAAe7Q,EAAOxG,IAAKwG,EAAOyF,eAE7B,GAKyE6N,CAAqBtT,IAsCrGuT,GAAwB,SAAUpe,GACpC,IAAIqe,EAAQ9gB,EAAQ4C,EAAKH,GAAKse,MAAM,KAChCC,EAAStjB,EAAIojB,GAAO,SAAUG,EAAM1hB,GACtC,IAAI2hB,EAAYD,EAAKhS,cAAckS,WAAW,GAAK,IAAIA,WAAW,GAAK,EACvE,OAAOrH,KAAKsH,IAAI,GAAI7hB,GAAK2hB,KAE3B,OAAOzhB,EAAMuhB,GAAQ,SAAUK,EAAK3iB,GAClC,OAAO2iB,EAAM3iB,IACZ,IAED4iB,GAA0B,SAAUzmB,GAEtC,KADAA,EACY,EACV,MAAO,GAEP,IAAI0mB,EAAY1mB,EAAQ,GACpB2mB,EAAW1H,KAAK2H,MAAM5mB,EAAQ,IAGlC,OAFWymB,GAAwBE,GACxBnmB,OAAOqmB,aAAa,IAAIP,WAAW,GAAKI,IA+DnDI,GAAO,SAAUrU,GACnB,IAZ0B4N,EACtB5E,EAWAsL,EAAclQ,GAAcpE,GAC3BN,GAAS4U,IAGdtU,EAAOuU,cAAcF,KAAK,CACxBG,MAAO,kBACPC,KAAM,CACJnnB,KAAM,QACNonB,MAAO,CAAC,CACJpnB,KAAM,QACNQ,KAAM,QACN6mB,MAAO,uBACPC,UAAW,aAGjBC,YAAa,CACX7L,OA5BsB4E,EA4BH,CACjB5E,MAAOhJ,EAAOxG,IAAIsb,UAAUR,EAAa,QAAS,KAClDS,cAAexjB,EAAST,KAAKkP,EAAOxG,IAAIwV,SAASsF,EAAa,qBA7BhEtL,EAAQgM,SAASpH,EAAO5E,MAAO,IAC/B4E,EAAOmH,cAAcvlB,GAAG,eACnBwkB,GAAwBhL,GACtB4E,EAAOmH,cAAcvlB,GAAG,eAC1BwkB,GAAwBhL,GAAOlV,cAE/B8Z,EAAO5E,QA0BdiM,QAAS,CACP,CACE3nB,KAAM,SACNQ,KAAM,SACN0M,KAAM,UAER,CACElN,KAAM,SACNQ,KAAM,OACN0M,KAAM,OACN0a,SAAS,IAGbC,SAAU,SAAUC,IAxEF,SAAUpM,GAC9B,OAdmB,SAAUA,GAC7B,MAHO,WAAWhV,KAGJgV,GACL,EAVF,WAAWhV,KAWKgV,GACd,EAVO,SAAU7T,GAC1B,MAAO,WAAWnB,KAAKmB,GAUZkgB,CAAYrM,GACd,EACUA,EA/nDVjX,OAAS,EAkoDT,EAFA,EAMDujB,CAAetM,IACvB,KAAK,EACH,OAAOzX,EAAST,KAAK,CACnBikB,cAAexjB,EAAS1C,OACxBma,MAAOA,IAEX,KAAK,EACH,OAAOzX,EAAST,KAAK,CACnBikB,cAAexjB,EAAST,KAAK,eAC7BkY,MAAOuK,GAAsBvK,GAAOnY,aAExC,KAAK,EACH,OAAOU,EAAST,KAAK,CACnBikB,cAAexjB,EAAST,KAAK,eAC7BkY,MAAOuK,GAAsBvK,GAAOnY,aAExC,KAAK,EACH,OAAOU,EAAST,KAAK,CACnBikB,cAAexjB,EAAS1C,OACxBma,MAAO,KAEX,KAAK,EACH,OAAOzX,EAAS1C,SAmDd0mB,CADWH,EAAII,UACMxM,OAAO3Y,MAAK,SAAUud,GACzC5N,EAAOqT,YAAY,iBAAiB,EAAO,CACzCnW,MAAO,CAAE8L,MAAwB,MAAjB4E,EAAO5E,MAAgB,GAAK4E,EAAO5E,OACnDoG,OAAQ,CAAE,kBAAmBxB,EAAOmH,cAAcrlB,MAAM,UAG5D0lB,EAAIK,YAKNC,GAAwB,SAAU1V,EAAQgN,GAC5C,OAAO,WACL,IAAIrI,EAAaP,GAAcpE,GAC/B,OAAO2E,GAAcA,EAAW5H,WAAaiQ,IAG7C2I,GAAiB,SAAU3V,GAC7BA,EAAO4V,WAAW,gBAAgB,WAChCvB,GAAKrU,OAGL6V,GAAW,SAAU7V,GACvBA,EAAOyN,GAAG,qBAAqB,SAAUH,GACvC,IAAIwI,EAAMxI,EAAEyI,QAAQjiB,cACR,WAARgiB,EACF9J,GAAoBhM,GACH,YAAR8V,GACT7J,GAAqBjM,MAGzBA,EAAO4V,WAAW,uBAAuB,SAAUI,EAAIpI,GACrD4C,GAAWxQ,EAAQ,KAAM4N,MAE3B5N,EAAO4V,WAAW,qBAAqB,SAAUI,EAAIpI,GACnD4C,GAAWxQ,EAAQ,KAAM4N,MAE3B5N,EAAO4V,WAAW,wBAAwB,SAAUI,EAAIpI,GACtD4C,GAAWxQ,EAAQ,KAAM4N,MAE3B5N,EAAO4V,WAAW,cAAc,WAC9B1J,GAAqBlM,MAEvB2V,GAAe3V,GACfA,EAAO4V,WAAW,iBAAiB,SAAUI,EAAIpI,GAC3C1f,EAAS0f,IAjLE,SAAU5N,EAAQiW,GACnC,IAAItR,EAAaP,GAAcpE,GAC/BA,EAAOyS,YAAYC,UAAS,WACtBxkB,EAAS+nB,EAAO7G,SAClBpP,EAAOxG,IAAI0c,UAAUvR,EAAYsR,EAAO7G,QAEtClhB,EAAS+nB,EAAO/Y,QAClBb,GAAO4Z,EAAO/Y,OAAO,SAAU9L,EAAGoL,GAChC,OAAOwD,EAAOxG,IAAI2c,UAAUxR,EAAYnI,EAAGpL,SA0K7CglB,CAAapW,EAAQ4N,MAGzB5N,EAAOqW,qBAAqB,sBAAuBX,GAAsB1V,EAAQ,OACjFA,EAAOqW,qBAAqB,oBAAqBX,GAAsB1V,EAAQ,OAC/EA,EAAOqW,qBAAqB,uBAAwBX,GAAsB1V,EAAQ,QAehFsW,GAAU,SAAUtW,IA9xCA,SAAUA,GAChC,OAAOA,EAAOuB,SAAS,uBAAuB,IA8xC1CgV,CAAkBvW,IAbN,SAAUA,GAC1BA,EAAOyN,GAAG,WAAW,SAAUH,GACzBA,EAAEkJ,UAAYra,GAASsa,KAAOta,GAASua,eAAepJ,IAG1DtN,EAAOyS,YAAYC,UAAS,YACtBpF,EAAEqJ,SAAW1K,GAAqBjM,GAAUgM,GAAoBhM,KAClEsN,EAAEsJ,uBAONC,CAAY7W,GA9NJ,SAAUA,GACpBA,EAAOyN,GAAG,WAAW,SAAUH,GACzBA,EAAEkJ,UAAYra,GAAS2a,UACrB3D,GAAgBnT,GAAQ,IAC1BsN,EAAEsJ,iBAEKtJ,EAAEkJ,UAAYra,GAAS4a,QAC5B5D,GAAgBnT,GAAQ,IAC1BsN,EAAEsJ,oBAwNRI,CAAMhX,IAsDNhT,EAAOiqB,IAAI,SAAS,SAAUjX,GAS5B,OARsC,IAAlCA,EAAOkX,UAAU,OAAO,IAC1BZ,GAAQtW,GACR6V,GAAS7V,IAET2V,GAAe3V,GAxDJ,SAAUA,GACzB,IAAImX,EAAO,SAAUpB,GACnB,OAAO,WACL,OAAO/V,EAAOqT,YAAY0C,KAGzB/V,EAAOkX,UAAU,aACpBlX,EAAOgW,GAAGoB,SAASC,gBAAgB,UAAW,CAC5CC,KAAM,eACNC,QAAQ,EACRC,QAAS,gBACTC,SAAUN,EAAK,qBACfO,QAAS,SAAUtC,GACjB,OAAOjI,GAAUnN,EAAQ,KAAMoV,EAAIuC,cAGvC3X,EAAOgW,GAAGoB,SAASC,gBAAgB,UAAW,CAC5CC,KAAM,iBACNC,QAAQ,EACRC,QAAS,cACTC,SAAUN,EAAK,uBACfO,QAAS,SAAUtC,GACjB,OAAOjI,GAAUnN,EAAQ,KAAMoV,EAAIuC,eAoCvCC,CAAW5X,GA9BE,SAAUA,GACzB,IAAI6X,EAAiB,CACnBrd,KAAM,qBACN8c,KAAM,eACNG,SAAU,WACR,OAAOzX,EAAOqT,YAAY,iBAE5BqE,QAAS,SAAUtC,GACjB,OAAOjI,GAAUnN,EAAQ,MAAM,SAAUuX,GACvC,OAAOnC,EAAI0C,aAAaP,QAI9BvX,EAAOgW,GAAGoB,SAASW,YAAY,YAAaF,GAC5C7X,EAAOgW,GAAGoB,SAASY,eAAe,QAAS,CACzC/B,OAAQ,SAAU1c,GAChB,IAAIoL,EAAaP,GAAcpE,EAAQzG,GACvC,OAAOmG,GAASiF,GAAc,CAAC,aAAe,MAchDsT,CAAWjY,GAhRH,SAAUA,GACpB,MAAO,CACLmT,gBAAiB,SAAUnC,GACzBmC,GAAgBnT,EAAQgR,KA8QnBkH,CAAMlY,MA/tErB","file":"plugin.js","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.8.2 (2021-06-23)\n */\n(function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var isString = isType('string');\n    var isObject = isType('object');\n    var isArray = isType('array');\n    var isBoolean = isSimpleType('boolean');\n    var isFunction = isSimpleType('function');\n    var isNumber = isSimpleType('number');\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var not = function (f) {\n      return function (t) {\n        return !f(t);\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var nativeSlice = Array.prototype.slice;\n    var nativePush = Array.prototype.push;\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var groupBy = function (xs, f) {\n      if (xs.length === 0) {\n        return [];\n      } else {\n        var wasType = f(xs[0]);\n        var r = [];\n        var group = [];\n        for (var i = 0, len = xs.length; i < len; i++) {\n          var x = xs[i];\n          var type = f(x);\n          if (type !== wasType) {\n            r.push(group);\n            group = [];\n          }\n          wasType = type;\n          group.push(x);\n        }\n        if (group.length !== 0) {\n          r.push(group);\n        }\n        return r;\n      }\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var findUntil = function (xs, pred, until) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(x);\n        } else if (until(x, i)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var find = function (xs, pred) {\n      return findUntil(xs, pred, never);\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      return flatten(map(xs, f));\n    };\n    var reverse = function (xs) {\n      var r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var get = function (xs, i) {\n      return i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n    };\n    var head = function (xs) {\n      return get(xs, 0);\n    };\n    var last = function (xs) {\n      return get(xs, xs.length - 1);\n    };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n    function __spreadArrays() {\n      for (var s = 0, i = 0, il = arguments.length; i < il; i++)\n        s += arguments[i].length;\n      for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n      return r;\n    }\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var DeviceType = function (os, browser, userAgent, mediaMatch) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isMobile = os.isiOS() || os.isAndroid();\n      var isTouch = isMobile || mediaMatch('(pointer:coarse)');\n      var isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n      var isPhone = isiPhone || isMobile && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      var isDesktop = !isPhone && !isTablet && !iOSwebview;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview),\n        isDesktop: constant(isDesktop)\n      };\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$1 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu(group(1), group(2));\n    };\n    var detect = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown();\n      }\n      return find$1(versionRegexes, cleanedAgent);\n    };\n    var unknown = function () {\n      return nu(0, 0);\n    };\n    var nu = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu,\n      detect: detect,\n      unknown: unknown\n    };\n\n    var detect$1 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$1(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$1(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n    var UaString = {\n      detectBrowser: detectBrowser,\n      detectOs: detectOs\n    };\n\n    var contains = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n    var blank = function (r) {\n      return function (s) {\n        return s.replace(r, '');\n      };\n    };\n    var trim = blank(/^\\s+|\\s+$/g);\n    var isNotEmpty = function (s) {\n      return s.length > 0;\n    };\n    var isEmpty = function (s) {\n      return !isNotEmpty(s);\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains(uastring, 'edge/') && contains(uastring, 'chrome') && contains(uastring, 'safari') && contains(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains(uastring, 'chrome') && !contains(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains(uastring, 'msie') || contains(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains(uastring, 'safari') || contains(uastring, 'mobile/')) && contains(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains(uastring, 'iphone') || contains(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('mac os x'),\n        versionRegexes: [/.*?mac\\ os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      },\n      {\n        name: 'ChromeOS',\n        search: checkContains('cros'),\n        versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/]\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var unknown$1 = function () {\n      return nu$1({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$1 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isBrowser = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge),\n        isChrome: isBrowser(chrome),\n        isIE: isBrowser(ie),\n        isOpera: isBrowser(opera),\n        isFirefox: isBrowser(firefox),\n        isSafari: isBrowser(safari)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$1,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var chromeos = 'ChromeOS';\n    var unknown$2 = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isOS = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows),\n        isiOS: isOS(ios),\n        isAndroid: isOS(android),\n        isOSX: isOS(osx),\n        isLinux: isOS(linux),\n        isSolaris: isOS(solaris),\n        isFreeBSD: isOS(freebsd),\n        isChromeOS: isOS(chromeos)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown$2,\n      nu: nu$2,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd),\n      chromeos: constant(chromeos)\n    };\n\n    var detect$2 = function (userAgent, mediaMatch) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = UaString.detectBrowser(browsers, userAgent).fold(Browser.unknown, Browser.nu);\n      var os = UaString.detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$2 };\n\n    var mediaMatch = function (query) {\n      return window.matchMedia(query).matches;\n    };\n    var platform = cached(function () {\n      return PlatformDetection.detect(navigator.userAgent, mediaMatch);\n    });\n    var detect$3 = function () {\n      return platform();\n    };\n\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, Node.DOCUMENT_POSITION_CONTAINED_BY);\n    };\n\n    var ELEMENT = 1;\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: node };\n    };\n    var fromPoint = function (docElm, x, y) {\n      return Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom);\n    };\n    var SugarElement = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var is = function (element, selector) {\n      var dom = element.dom;\n      if (dom.nodeType !== ELEMENT) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n\n    var eq = function (e1, e2) {\n      return e1.dom === e2.dom;\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom;\n      var d2 = e2.dom;\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return documentPositionContainedBy(e1.dom, e2.dom);\n    };\n    var contains$1 = function (e1, e2) {\n      return detect$3().browser.isIE() ? ieContains(e1, e2) : regularContains(e1, e2);\n    };\n    var is$1 = is;\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.RangeUtils');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.dom.TreeWalker');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var keys = Object.keys;\n    var each$1 = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var objAcc = function (r) {\n      return function (x, i) {\n        r[i] = x;\n      };\n    };\n    var internalFilter = function (obj, pred, onTrue, onFalse) {\n      var r = {};\n      each$1(obj, function (x, i) {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n      return r;\n    };\n    var filter$1 = function (obj, pred) {\n      var t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n\n    var Global = typeof window !== 'undefined' ? window : Function('return this;')();\n\n    var name = function (element) {\n      var r = element.dom.nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom.nodeType;\n    };\n    var isType$1 = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isElement = isType$1(ELEMENT);\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var setAll = function (element, attrs) {\n      var dom = element.dom;\n      each$1(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var clone = function (element) {\n      return foldl(element.dom.attributes, function (acc, attr) {\n        acc[attr.name] = attr.value;\n        return acc;\n      }, {});\n    };\n\n    var parent = function (element) {\n      return Optional.from(element.dom.parentNode).map(SugarElement.fromDom);\n    };\n    var children = function (element) {\n      return map(element.dom.childNodes, SugarElement.fromDom);\n    };\n    var child = function (element, index) {\n      var cs = element.dom.childNodes;\n      return Optional.from(cs[index]).map(SugarElement.fromDom);\n    };\n    var firstChild = function (element) {\n      return child(element, 0);\n    };\n    var lastChild = function (element) {\n      return child(element, element.dom.childNodes.length - 1);\n    };\n\n    var before = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom.insertBefore(element.dom, marker.dom);\n      });\n    };\n    var append = function (parent, element) {\n      parent.dom.appendChild(element.dom);\n    };\n\n    var before$1 = function (marker, elements) {\n      each(elements, function (x) {\n        before(marker, x);\n      });\n    };\n    var append$1 = function (parent, elements) {\n      each(elements, function (x) {\n        append(parent, x);\n      });\n    };\n\n    var remove = function (element) {\n      var dom = element.dom;\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n\n    var clone$1 = function (original, isDeep) {\n      return SugarElement.fromDom(original.dom.cloneNode(isDeep));\n    };\n    var deep = function (original) {\n      return clone$1(original, true);\n    };\n    var shallowAs = function (original, tag) {\n      var nu = SugarElement.fromTag(tag);\n      var attributes = clone(original);\n      setAll(nu, attributes);\n      return nu;\n    };\n    var mutate = function (original, tag) {\n      var nu = shallowAs(original, tag);\n      before(original, nu);\n      var children$1 = children(original);\n      append$1(nu, children$1);\n      remove(original);\n      return nu;\n    };\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var matchNodeName = function (name) {\n      return function (node) {\n        return node && node.nodeName.toLowerCase() === name;\n      };\n    };\n    var matchNodeNames = function (regex) {\n      return function (node) {\n        return node && regex.test(node.nodeName);\n      };\n    };\n    var isTextNode = function (node) {\n      return node && node.nodeType === 3;\n    };\n    var isListNode = matchNodeNames(/^(OL|UL|DL)$/);\n    var isOlUlNode = matchNodeNames(/^(OL|UL)$/);\n    var isOlNode = matchNodeName('ol');\n    var isListItemNode = matchNodeNames(/^(LI|DT|DD)$/);\n    var isDlItemNode = matchNodeNames(/^(DT|DD)$/);\n    var isTableCellNode = matchNodeNames(/^(TH|TD)$/);\n    var isBr = matchNodeName('br');\n    var isFirstChild = function (node) {\n      return node.parentNode.firstChild === node;\n    };\n    var isTextBlock = function (editor, node) {\n      return node && !!editor.schema.getTextBlockElements()[node.nodeName];\n    };\n    var isBlock = function (node, blockElements) {\n      return node && node.nodeName in blockElements;\n    };\n    var isBogusBr = function (dom, node) {\n      if (!isBr(node)) {\n        return false;\n      }\n      return dom.isBlock(node.nextSibling) && !isBr(node.previousSibling);\n    };\n    var isEmpty$1 = function (dom, elm, keepBookmarks) {\n      var empty = dom.isEmpty(elm);\n      if (keepBookmarks && dom.select('span[data-mce-type=bookmark]', elm).length > 0) {\n        return false;\n      }\n      return empty;\n    };\n    var isChildOfBody = function (dom, elm) {\n      return dom.isChildOf(elm, dom.getRoot());\n    };\n\n    var shouldIndentOnTab = function (editor) {\n      return editor.getParam('lists_indent_on_tab', true);\n    };\n    var getForcedRootBlock = function (editor) {\n      var block = editor.getParam('forced_root_block', 'p');\n      if (block === false) {\n        return '';\n      } else if (block === true) {\n        return 'p';\n      } else {\n        return block;\n      }\n    };\n    var getForcedRootBlockAttrs = function (editor) {\n      return editor.getParam('forced_root_block_attrs', {});\n    };\n\n    var createTextBlock = function (editor, contentNode) {\n      var dom = editor.dom;\n      var blockElements = editor.schema.getBlockElements();\n      var fragment = dom.createFragment();\n      var blockName = getForcedRootBlock(editor);\n      var node, textBlock, hasContentNode;\n      if (blockName) {\n        textBlock = dom.create(blockName);\n        if (textBlock.tagName === blockName.toUpperCase()) {\n          dom.setAttribs(textBlock, getForcedRootBlockAttrs(editor));\n        }\n        if (!isBlock(contentNode.firstChild, blockElements)) {\n          fragment.appendChild(textBlock);\n        }\n      }\n      if (contentNode) {\n        while (node = contentNode.firstChild) {\n          var nodeName = node.nodeName;\n          if (!hasContentNode && (nodeName !== 'SPAN' || node.getAttribute('data-mce-type') !== 'bookmark')) {\n            hasContentNode = true;\n          }\n          if (isBlock(node, blockElements)) {\n            fragment.appendChild(node);\n            textBlock = null;\n          } else {\n            if (blockName) {\n              if (!textBlock) {\n                textBlock = dom.create(blockName);\n                fragment.appendChild(textBlock);\n              }\n              textBlock.appendChild(node);\n            } else {\n              fragment.appendChild(node);\n            }\n          }\n        }\n      }\n      if (!blockName) {\n        fragment.appendChild(dom.create('br'));\n      } else {\n        if (!hasContentNode) {\n          textBlock.appendChild(dom.create('br', { 'data-mce-bogus': '1' }));\n        }\n      }\n      return fragment;\n    };\n\n    var DOM = global$4.DOM;\n    var splitList = function (editor, ul, li) {\n      var removeAndKeepBookmarks = function (targetNode) {\n        global$5.each(bookmarks, function (node) {\n          targetNode.parentNode.insertBefore(node, li.parentNode);\n        });\n        DOM.remove(targetNode);\n      };\n      var bookmarks = DOM.select('span[data-mce-type=\"bookmark\"]', ul);\n      var newBlock = createTextBlock(editor, li);\n      var tmpRng = DOM.createRng();\n      tmpRng.setStartAfter(li);\n      tmpRng.setEndAfter(ul);\n      var fragment = tmpRng.extractContents();\n      for (var node = fragment.firstChild; node; node = node.firstChild) {\n        if (node.nodeName === 'LI' && editor.dom.isEmpty(node)) {\n          DOM.remove(node);\n          break;\n        }\n      }\n      if (!editor.dom.isEmpty(fragment)) {\n        DOM.insertAfter(fragment, ul);\n      }\n      DOM.insertAfter(newBlock, ul);\n      if (isEmpty$1(editor.dom, li.parentNode)) {\n        removeAndKeepBookmarks(li.parentNode);\n      }\n      DOM.remove(li);\n      if (isEmpty$1(editor.dom, ul)) {\n        DOM.remove(ul);\n      }\n    };\n\n    var outdentDlItem = function (editor, item) {\n      if (is$1(item, 'dd')) {\n        mutate(item, 'dt');\n      } else if (is$1(item, 'dt')) {\n        parent(item).each(function (dl) {\n          return splitList(editor, dl.dom, item.dom);\n        });\n      }\n    };\n    var indentDlItem = function (item) {\n      if (is$1(item, 'dt')) {\n        mutate(item, 'dd');\n      }\n    };\n    var dlIndentation = function (editor, indentation, dlItems) {\n      if (indentation === 'Indent') {\n        each(dlItems, indentDlItem);\n      } else {\n        each(dlItems, function (item) {\n          return outdentDlItem(editor, item);\n        });\n      }\n    };\n\n    var getNormalizedPoint = function (container, offset) {\n      if (isTextNode(container)) {\n        return {\n          container: container,\n          offset: offset\n        };\n      }\n      var node = global$1.getNode(container, offset);\n      if (isTextNode(node)) {\n        return {\n          container: node,\n          offset: offset >= container.childNodes.length ? node.data.length : 0\n        };\n      } else if (node.previousSibling && isTextNode(node.previousSibling)) {\n        return {\n          container: node.previousSibling,\n          offset: node.previousSibling.data.length\n        };\n      } else if (node.nextSibling && isTextNode(node.nextSibling)) {\n        return {\n          container: node.nextSibling,\n          offset: 0\n        };\n      }\n      return {\n        container: container,\n        offset: offset\n      };\n    };\n    var normalizeRange = function (rng) {\n      var outRng = rng.cloneRange();\n      var rangeStart = getNormalizedPoint(rng.startContainer, rng.startOffset);\n      outRng.setStart(rangeStart.container, rangeStart.offset);\n      var rangeEnd = getNormalizedPoint(rng.endContainer, rng.endOffset);\n      outRng.setEnd(rangeEnd.container, rangeEnd.offset);\n      return outRng;\n    };\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.dom.DomQuery');\n\n    var getParentList = function (editor, node) {\n      var selectionStart = node || editor.selection.getStart(true);\n      return editor.dom.getParent(selectionStart, 'OL,UL,DL', getClosestListRootElm(editor, selectionStart));\n    };\n    var isParentListSelected = function (parentList, selectedBlocks) {\n      return parentList && selectedBlocks.length === 1 && selectedBlocks[0] === parentList;\n    };\n    var findSubLists = function (parentList) {\n      return global$5.grep(parentList.querySelectorAll('ol,ul,dl'), function (elm) {\n        return isListNode(elm);\n      });\n    };\n    var getSelectedSubLists = function (editor) {\n      var parentList = getParentList(editor);\n      var selectedBlocks = editor.selection.getSelectedBlocks();\n      if (isParentListSelected(parentList, selectedBlocks)) {\n        return findSubLists(parentList);\n      } else {\n        return global$5.grep(selectedBlocks, function (elm) {\n          return isListNode(elm) && parentList !== elm;\n        });\n      }\n    };\n    var findParentListItemsNodes = function (editor, elms) {\n      var listItemsElms = global$5.map(elms, function (elm) {\n        var parentLi = editor.dom.getParent(elm, 'li,dd,dt', getClosestListRootElm(editor, elm));\n        return parentLi ? parentLi : elm;\n      });\n      return global$6.unique(listItemsElms);\n    };\n    var getSelectedListItems = function (editor) {\n      var selectedBlocks = editor.selection.getSelectedBlocks();\n      return global$5.grep(findParentListItemsNodes(editor, selectedBlocks), function (block) {\n        return isListItemNode(block);\n      });\n    };\n    var getSelectedDlItems = function (editor) {\n      return filter(getSelectedListItems(editor), isDlItemNode);\n    };\n    var getClosestListRootElm = function (editor, elm) {\n      var parentTableCell = editor.dom.getParents(elm, 'TD,TH');\n      var root = parentTableCell.length > 0 ? parentTableCell[0] : editor.getBody();\n      return root;\n    };\n    var findLastParentListNode = function (editor, elm) {\n      var parentLists = editor.dom.getParents(elm, 'ol,ul', getClosestListRootElm(editor, elm));\n      return last(parentLists);\n    };\n    var getSelectedLists = function (editor) {\n      var firstList = findLastParentListNode(editor, editor.selection.getStart());\n      var subsequentLists = filter(editor.selection.getSelectedBlocks(), isOlUlNode);\n      return firstList.toArray().concat(subsequentLists);\n    };\n    var getSelectedListRoots = function (editor) {\n      var selectedLists = getSelectedLists(editor);\n      return getUniqueListRoots(editor, selectedLists);\n    };\n    var getUniqueListRoots = function (editor, lists) {\n      var listRoots = map(lists, function (list) {\n        return findLastParentListNode(editor, list).getOr(list);\n      });\n      return global$6.unique(listRoots);\n    };\n\n    var lift2 = function (oa, ob, f) {\n      return oa.isSome() && ob.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie())) : Optional.none();\n    };\n\n    var fromElements = function (elements, scope) {\n      var doc = scope || document;\n      var fragment = doc.createDocumentFragment();\n      each(elements, function (element) {\n        fragment.appendChild(element.dom);\n      });\n      return SugarElement.fromDom(fragment);\n    };\n\n    var fireListEvent = function (editor, action, element) {\n      return editor.fire('ListMutation', {\n        action: action,\n        element: element\n      });\n    };\n\n    var isSupported = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var set = function (element, property, value) {\n      var dom = element.dom;\n      internalSet(dom, property, value);\n    };\n\n    var joinSegment = function (parent, child) {\n      append(parent.item, child.list);\n    };\n    var joinSegments = function (segments) {\n      for (var i = 1; i < segments.length; i++) {\n        joinSegment(segments[i - 1], segments[i]);\n      }\n    };\n    var appendSegments = function (head$1, tail) {\n      lift2(last(head$1), head(tail), joinSegment);\n    };\n    var createSegment = function (scope, listType) {\n      var segment = {\n        list: SugarElement.fromTag(listType, scope),\n        item: SugarElement.fromTag('li', scope)\n      };\n      append(segment.list, segment.item);\n      return segment;\n    };\n    var createSegments = function (scope, entry, size) {\n      var segments = [];\n      for (var i = 0; i < size; i++) {\n        segments.push(createSegment(scope, entry.listType));\n      }\n      return segments;\n    };\n    var populateSegments = function (segments, entry) {\n      for (var i = 0; i < segments.length - 1; i++) {\n        set(segments[i].item, 'list-style-type', 'none');\n      }\n      last(segments).each(function (segment) {\n        setAll(segment.list, entry.listAttributes);\n        setAll(segment.item, entry.itemAttributes);\n        append$1(segment.item, entry.content);\n      });\n    };\n    var normalizeSegment = function (segment, entry) {\n      if (name(segment.list) !== entry.listType) {\n        segment.list = mutate(segment.list, entry.listType);\n      }\n      setAll(segment.list, entry.listAttributes);\n    };\n    var createItem = function (scope, attr, content) {\n      var item = SugarElement.fromTag('li', scope);\n      setAll(item, attr);\n      append$1(item, content);\n      return item;\n    };\n    var appendItem = function (segment, item) {\n      append(segment.list, item);\n      segment.item = item;\n    };\n    var writeShallow = function (scope, cast, entry) {\n      var newCast = cast.slice(0, entry.depth);\n      last(newCast).each(function (segment) {\n        var item = createItem(scope, entry.itemAttributes, entry.content);\n        appendItem(segment, item);\n        normalizeSegment(segment, entry);\n      });\n      return newCast;\n    };\n    var writeDeep = function (scope, cast, entry) {\n      var segments = createSegments(scope, entry, entry.depth - cast.length);\n      joinSegments(segments);\n      populateSegments(segments, entry);\n      appendSegments(cast, segments);\n      return cast.concat(segments);\n    };\n    var composeList = function (scope, entries) {\n      var cast = foldl(entries, function (cast, entry) {\n        return entry.depth > cast.length ? writeDeep(scope, cast, entry) : writeShallow(scope, cast, entry);\n      }, []);\n      return head(cast).map(function (segment) {\n        return segment.list;\n      });\n    };\n\n    var isList = function (el) {\n      return is$1(el, 'OL,UL');\n    };\n    var hasFirstChildList = function (el) {\n      return firstChild(el).map(isList).getOr(false);\n    };\n    var hasLastChildList = function (el) {\n      return lastChild(el).map(isList).getOr(false);\n    };\n\n    var isIndented = function (entry) {\n      return entry.depth > 0;\n    };\n    var isSelected = function (entry) {\n      return entry.isSelected;\n    };\n    var cloneItemContent = function (li) {\n      var children$1 = children(li);\n      var content = hasLastChildList(li) ? children$1.slice(0, -1) : children$1;\n      return map(content, deep);\n    };\n    var createEntry = function (li, depth, isSelected) {\n      return parent(li).filter(isElement).map(function (list) {\n        return {\n          depth: depth,\n          dirty: false,\n          isSelected: isSelected,\n          content: cloneItemContent(li),\n          itemAttributes: clone(li),\n          listAttributes: clone(list),\n          listType: name(list)\n        };\n      });\n    };\n\n    var indentEntry = function (indentation, entry) {\n      switch (indentation) {\n      case 'Indent':\n        entry.depth++;\n        break;\n      case 'Outdent':\n        entry.depth--;\n        break;\n      case 'Flatten':\n        entry.depth = 0;\n      }\n      entry.dirty = true;\n    };\n\n    var cloneListProperties = function (target, source) {\n      target.listType = source.listType;\n      target.listAttributes = __assign({}, source.listAttributes);\n    };\n    var cleanListProperties = function (entry) {\n      entry.listAttributes = filter$1(entry.listAttributes, function (_value, key) {\n        return key !== 'start';\n      });\n    };\n    var closestSiblingEntry = function (entries, start) {\n      var depth = entries[start].depth;\n      var matches = function (entry) {\n        return entry.depth === depth && !entry.dirty;\n      };\n      var until = function (entry) {\n        return entry.depth < depth;\n      };\n      return findUntil(reverse(entries.slice(0, start)), matches, until).orThunk(function () {\n        return findUntil(entries.slice(start + 1), matches, until);\n      });\n    };\n    var normalizeEntries = function (entries) {\n      each(entries, function (entry, i) {\n        closestSiblingEntry(entries, i).fold(function () {\n          if (entry.dirty) {\n            cleanListProperties(entry);\n          }\n        }, function (matchingEntry) {\n          return cloneListProperties(entry, matchingEntry);\n        });\n      });\n      return entries;\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var parseItem = function (depth, itemSelection, selectionState, item) {\n      return firstChild(item).filter(isList).fold(function () {\n        itemSelection.each(function (selection) {\n          if (eq(selection.start, item)) {\n            selectionState.set(true);\n          }\n        });\n        var currentItemEntry = createEntry(item, depth, selectionState.get());\n        itemSelection.each(function (selection) {\n          if (eq(selection.end, item)) {\n            selectionState.set(false);\n          }\n        });\n        var childListEntries = lastChild(item).filter(isList).map(function (list) {\n          return parseList(depth, itemSelection, selectionState, list);\n        }).getOr([]);\n        return currentItemEntry.toArray().concat(childListEntries);\n      }, function (list) {\n        return parseList(depth, itemSelection, selectionState, list);\n      });\n    };\n    var parseList = function (depth, itemSelection, selectionState, list) {\n      return bind(children(list), function (element) {\n        var parser = isList(element) ? parseList : parseItem;\n        var newDepth = depth + 1;\n        return parser(newDepth, itemSelection, selectionState, element);\n      });\n    };\n    var parseLists = function (lists, itemSelection) {\n      var selectionState = Cell(false);\n      var initialDepth = 0;\n      return map(lists, function (list) {\n        return {\n          sourceList: list,\n          entries: parseList(initialDepth, itemSelection, selectionState, list)\n        };\n      });\n    };\n\n    var outdentedComposer = function (editor, entries) {\n      var normalizedEntries = normalizeEntries(entries);\n      return map(normalizedEntries, function (entry) {\n        var content = fromElements(entry.content);\n        return SugarElement.fromDom(createTextBlock(editor, content.dom));\n      });\n    };\n    var indentedComposer = function (editor, entries) {\n      var normalizedEntries = normalizeEntries(entries);\n      return composeList(editor.contentDocument, normalizedEntries).toArray();\n    };\n    var composeEntries = function (editor, entries) {\n      return bind(groupBy(entries, isIndented), function (entries) {\n        var groupIsIndented = head(entries).map(isIndented).getOr(false);\n        return groupIsIndented ? indentedComposer(editor, entries) : outdentedComposer(editor, entries);\n      });\n    };\n    var indentSelectedEntries = function (entries, indentation) {\n      each(filter(entries, isSelected), function (entry) {\n        return indentEntry(indentation, entry);\n      });\n    };\n    var getItemSelection = function (editor) {\n      var selectedListItems = map(getSelectedListItems(editor), SugarElement.fromDom);\n      return lift2(find(selectedListItems, not(hasFirstChildList)), find(reverse(selectedListItems), not(hasFirstChildList)), function (start, end) {\n        return {\n          start: start,\n          end: end\n        };\n      });\n    };\n    var listIndentation = function (editor, lists, indentation) {\n      var entrySets = parseLists(lists, getItemSelection(editor));\n      each(entrySets, function (entrySet) {\n        indentSelectedEntries(entrySet.entries, indentation);\n        var composedLists = composeEntries(editor, entrySet.entries);\n        each(composedLists, function (composedList) {\n          fireListEvent(editor, indentation === 'Indent' ? 'IndentList' : 'OutdentList', composedList.dom);\n        });\n        before$1(entrySet.sourceList, composedLists);\n        remove(entrySet.sourceList);\n      });\n    };\n\n    var selectionIndentation = function (editor, indentation) {\n      var lists = map(getSelectedListRoots(editor), SugarElement.fromDom);\n      var dlItems = map(getSelectedDlItems(editor), SugarElement.fromDom);\n      var isHandled = false;\n      if (lists.length || dlItems.length) {\n        var bookmark = editor.selection.getBookmark();\n        listIndentation(editor, lists, indentation);\n        dlIndentation(editor, indentation, dlItems);\n        editor.selection.moveToBookmark(bookmark);\n        editor.selection.setRng(normalizeRange(editor.selection.getRng()));\n        editor.nodeChanged();\n        isHandled = true;\n      }\n      return isHandled;\n    };\n    var indentListSelection = function (editor) {\n      return selectionIndentation(editor, 'Indent');\n    };\n    var outdentListSelection = function (editor) {\n      return selectionIndentation(editor, 'Outdent');\n    };\n    var flattenListSelection = function (editor) {\n      return selectionIndentation(editor, 'Flatten');\n    };\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.dom.BookmarkManager');\n\n    var DOM$1 = global$4.DOM;\n    var createBookmark = function (rng) {\n      var bookmark = {};\n      var setupEndPoint = function (start) {\n        var offsetNode, container, offset;\n        container = rng[start ? 'startContainer' : 'endContainer'];\n        offset = rng[start ? 'startOffset' : 'endOffset'];\n        if (container.nodeType === 1) {\n          offsetNode = DOM$1.create('span', { 'data-mce-type': 'bookmark' });\n          if (container.hasChildNodes()) {\n            offset = Math.min(offset, container.childNodes.length - 1);\n            if (start) {\n              container.insertBefore(offsetNode, container.childNodes[offset]);\n            } else {\n              DOM$1.insertAfter(offsetNode, container.childNodes[offset]);\n            }\n          } else {\n            container.appendChild(offsetNode);\n          }\n          container = offsetNode;\n          offset = 0;\n        }\n        bookmark[start ? 'startContainer' : 'endContainer'] = container;\n        bookmark[start ? 'startOffset' : 'endOffset'] = offset;\n      };\n      setupEndPoint(true);\n      if (!rng.collapsed) {\n        setupEndPoint();\n      }\n      return bookmark;\n    };\n    var resolveBookmark = function (bookmark) {\n      var restoreEndPoint = function (start) {\n        var container, offset, node;\n        var nodeIndex = function (container) {\n          var node = container.parentNode.firstChild, idx = 0;\n          while (node) {\n            if (node === container) {\n              return idx;\n            }\n            if (node.nodeType !== 1 || node.getAttribute('data-mce-type') !== 'bookmark') {\n              idx++;\n            }\n            node = node.nextSibling;\n          }\n          return -1;\n        };\n        container = node = bookmark[start ? 'startContainer' : 'endContainer'];\n        offset = bookmark[start ? 'startOffset' : 'endOffset'];\n        if (!container) {\n          return;\n        }\n        if (container.nodeType === 1) {\n          offset = nodeIndex(container);\n          container = container.parentNode;\n          DOM$1.remove(node);\n          if (!container.hasChildNodes() && DOM$1.isBlock(container)) {\n            container.appendChild(DOM$1.create('br'));\n          }\n        }\n        bookmark[start ? 'startContainer' : 'endContainer'] = container;\n        bookmark[start ? 'startOffset' : 'endOffset'] = offset;\n      };\n      restoreEndPoint(true);\n      restoreEndPoint();\n      var rng = DOM$1.createRng();\n      rng.setStart(bookmark.startContainer, bookmark.startOffset);\n      if (bookmark.endContainer) {\n        rng.setEnd(bookmark.endContainer, bookmark.endOffset);\n      }\n      return normalizeRange(rng);\n    };\n\n    var listToggleActionFromListName = function (listName) {\n      switch (listName) {\n      case 'UL':\n        return 'ToggleUlList';\n      case 'OL':\n        return 'ToggleOlList';\n      case 'DL':\n        return 'ToggleDLList';\n      }\n    };\n\n    var isCustomList = function (list) {\n      return /\\btox\\-/.test(list.className);\n    };\n    var listState = function (editor, listName, activate) {\n      var nodeChangeHandler = function (e) {\n        var inList = findUntil(e.parents, isListNode, isTableCellNode).filter(function (list) {\n          return list.nodeName === listName && !isCustomList(list);\n        }).isSome();\n        activate(inList);\n      };\n      var parents = editor.dom.getParents(editor.selection.getNode());\n      nodeChangeHandler({ parents: parents });\n      editor.on('NodeChange', nodeChangeHandler);\n      return function () {\n        return editor.off('NodeChange', nodeChangeHandler);\n      };\n    };\n\n    var updateListStyle = function (dom, el, detail) {\n      var type = detail['list-style-type'] ? detail['list-style-type'] : null;\n      dom.setStyle(el, 'list-style-type', type);\n    };\n    var setAttribs = function (elm, attrs) {\n      global$5.each(attrs, function (value, key) {\n        elm.setAttribute(key, value);\n      });\n    };\n    var updateListAttrs = function (dom, el, detail) {\n      setAttribs(el, detail['list-attributes']);\n      global$5.each(dom.select('li', el), function (li) {\n        setAttribs(li, detail['list-item-attributes']);\n      });\n    };\n    var updateListWithDetails = function (dom, el, detail) {\n      updateListStyle(dom, el, detail);\n      updateListAttrs(dom, el, detail);\n    };\n    var removeStyles = function (dom, element, styles) {\n      global$5.each(styles, function (style) {\n        var _a;\n        return dom.setStyle(element, (_a = {}, _a[style] = '', _a));\n      });\n    };\n    var getEndPointNode = function (editor, rng, start, root) {\n      var container = rng[start ? 'startContainer' : 'endContainer'];\n      var offset = rng[start ? 'startOffset' : 'endOffset'];\n      if (container.nodeType === 1) {\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n      }\n      if (!start && isBr(container.nextSibling)) {\n        container = container.nextSibling;\n      }\n      while (container.parentNode !== root) {\n        if (isTextBlock(editor, container)) {\n          return container;\n        }\n        if (/^(TD|TH)$/.test(container.parentNode.nodeName)) {\n          return container;\n        }\n        container = container.parentNode;\n      }\n      return container;\n    };\n    var getSelectedTextBlocks = function (editor, rng, root) {\n      var textBlocks = [], dom = editor.dom;\n      var startNode = getEndPointNode(editor, rng, true, root);\n      var endNode = getEndPointNode(editor, rng, false, root);\n      var block;\n      var siblings = [];\n      for (var node = startNode; node; node = node.nextSibling) {\n        siblings.push(node);\n        if (node === endNode) {\n          break;\n        }\n      }\n      global$5.each(siblings, function (node) {\n        if (isTextBlock(editor, node)) {\n          textBlocks.push(node);\n          block = null;\n          return;\n        }\n        if (dom.isBlock(node) || isBr(node)) {\n          if (isBr(node)) {\n            dom.remove(node);\n          }\n          block = null;\n          return;\n        }\n        var nextSibling = node.nextSibling;\n        if (global$7.isBookmarkNode(node)) {\n          if (isListNode(nextSibling) || isTextBlock(editor, nextSibling) || !nextSibling && node.parentNode === root) {\n            block = null;\n            return;\n          }\n        }\n        if (!block) {\n          block = dom.create('p');\n          node.parentNode.insertBefore(block, node);\n          textBlocks.push(block);\n        }\n        block.appendChild(node);\n      });\n      return textBlocks;\n    };\n    var hasCompatibleStyle = function (dom, sib, detail) {\n      var sibStyle = dom.getStyle(sib, 'list-style-type');\n      var detailStyle = detail ? detail['list-style-type'] : '';\n      detailStyle = detailStyle === null ? '' : detailStyle;\n      return sibStyle === detailStyle;\n    };\n    var applyList = function (editor, listName, detail) {\n      var rng = editor.selection.getRng();\n      var listItemName = 'LI';\n      var root = getClosestListRootElm(editor, editor.selection.getStart(true));\n      var dom = editor.dom;\n      if (dom.getContentEditable(editor.selection.getNode()) === 'false') {\n        return;\n      }\n      listName = listName.toUpperCase();\n      if (listName === 'DL') {\n        listItemName = 'DT';\n      }\n      var bookmark = createBookmark(rng);\n      var selectedTextBlocks = getSelectedTextBlocks(editor, rng, root);\n      global$5.each(selectedTextBlocks, function (block) {\n        var listBlock;\n        var sibling = block.previousSibling;\n        var parent = block.parentNode;\n        if (!isListItemNode(parent)) {\n          if (sibling && isListNode(sibling) && sibling.nodeName === listName && hasCompatibleStyle(dom, sibling, detail)) {\n            listBlock = sibling;\n            block = dom.rename(block, listItemName);\n            sibling.appendChild(block);\n          } else {\n            listBlock = dom.create(listName);\n            block.parentNode.insertBefore(listBlock, block);\n            listBlock.appendChild(block);\n            block = dom.rename(block, listItemName);\n          }\n          removeStyles(dom, block, [\n            'margin',\n            'margin-right',\n            'margin-bottom',\n            'margin-left',\n            'margin-top',\n            'padding',\n            'padding-right',\n            'padding-bottom',\n            'padding-left',\n            'padding-top'\n          ]);\n          updateListWithDetails(dom, listBlock, detail);\n          mergeWithAdjacentLists(editor.dom, listBlock);\n        }\n      });\n      editor.selection.setRng(resolveBookmark(bookmark));\n    };\n    var isValidLists = function (list1, list2) {\n      return list1 && list2 && isListNode(list1) && list1.nodeName === list2.nodeName;\n    };\n    var hasSameListStyle = function (dom, list1, list2) {\n      var targetStyle = dom.getStyle(list1, 'list-style-type', true);\n      var style = dom.getStyle(list2, 'list-style-type', true);\n      return targetStyle === style;\n    };\n    var hasSameClasses = function (elm1, elm2) {\n      return elm1.className === elm2.className;\n    };\n    var shouldMerge = function (dom, list1, list2) {\n      return isValidLists(list1, list2) && hasSameListStyle(dom, list1, list2) && hasSameClasses(list1, list2);\n    };\n    var mergeWithAdjacentLists = function (dom, listBlock) {\n      var sibling, node;\n      sibling = listBlock.nextSibling;\n      if (shouldMerge(dom, listBlock, sibling)) {\n        while (node = sibling.firstChild) {\n          listBlock.appendChild(node);\n        }\n        dom.remove(sibling);\n      }\n      sibling = listBlock.previousSibling;\n      if (shouldMerge(dom, listBlock, sibling)) {\n        while (node = sibling.lastChild) {\n          listBlock.insertBefore(node, listBlock.firstChild);\n        }\n        dom.remove(sibling);\n      }\n    };\n    var updateList = function (editor, list, listName, detail) {\n      if (list.nodeName !== listName) {\n        var newList = editor.dom.rename(list, listName);\n        updateListWithDetails(editor.dom, newList, detail);\n        fireListEvent(editor, listToggleActionFromListName(listName), newList);\n      } else {\n        updateListWithDetails(editor.dom, list, detail);\n        fireListEvent(editor, listToggleActionFromListName(listName), list);\n      }\n    };\n    var toggleMultipleLists = function (editor, parentList, lists, listName, detail) {\n      var parentIsList = isListNode(parentList);\n      if (parentIsList && parentList.nodeName === listName && !hasListStyleDetail(detail)) {\n        flattenListSelection(editor);\n      } else {\n        applyList(editor, listName, detail);\n        var bookmark = createBookmark(editor.selection.getRng(true));\n        var allLists = parentIsList ? __spreadArrays([parentList], lists) : lists;\n        global$5.each(allLists, function (elm) {\n          updateList(editor, elm, listName, detail);\n        });\n        editor.selection.setRng(resolveBookmark(bookmark));\n      }\n    };\n    var hasListStyleDetail = function (detail) {\n      return 'list-style-type' in detail;\n    };\n    var toggleSingleList = function (editor, parentList, listName, detail) {\n      if (parentList === editor.getBody()) {\n        return;\n      }\n      if (parentList) {\n        if (parentList.nodeName === listName && !hasListStyleDetail(detail) && !isCustomList(parentList)) {\n          flattenListSelection(editor);\n        } else {\n          var bookmark = createBookmark(editor.selection.getRng(true));\n          updateListWithDetails(editor.dom, parentList, detail);\n          var newList = editor.dom.rename(parentList, listName);\n          mergeWithAdjacentLists(editor.dom, newList);\n          editor.selection.setRng(resolveBookmark(bookmark));\n          applyList(editor, listName, detail);\n          fireListEvent(editor, listToggleActionFromListName(listName), newList);\n        }\n      } else {\n        applyList(editor, listName, detail);\n        fireListEvent(editor, listToggleActionFromListName(listName), parentList);\n      }\n    };\n    var toggleList = function (editor, listName, _detail) {\n      var parentList = getParentList(editor);\n      var selectedSubLists = getSelectedSubLists(editor);\n      var detail = isObject(_detail) ? _detail : {};\n      if (selectedSubLists.length > 0) {\n        toggleMultipleLists(editor, parentList, selectedSubLists, listName, detail);\n      } else {\n        toggleSingleList(editor, parentList, listName, detail);\n      }\n    };\n\n    var DOM$2 = global$4.DOM;\n    var normalizeList = function (dom, ul) {\n      var sibling;\n      var parentNode = ul.parentNode;\n      if (parentNode.nodeName === 'LI' && parentNode.firstChild === ul) {\n        sibling = parentNode.previousSibling;\n        if (sibling && sibling.nodeName === 'LI') {\n          sibling.appendChild(ul);\n          if (isEmpty$1(dom, parentNode)) {\n            DOM$2.remove(parentNode);\n          }\n        } else {\n          DOM$2.setStyle(parentNode, 'listStyleType', 'none');\n        }\n      }\n      if (isListNode(parentNode)) {\n        sibling = parentNode.previousSibling;\n        if (sibling && sibling.nodeName === 'LI') {\n          sibling.appendChild(ul);\n        }\n      }\n    };\n    var normalizeLists = function (dom, element) {\n      global$5.each(global$5.grep(dom.select('ol,ul', element)), function (ul) {\n        normalizeList(dom, ul);\n      });\n    };\n\n    var findNextCaretContainer = function (editor, rng, isForward, root) {\n      var node = rng.startContainer;\n      var offset = rng.startOffset;\n      if (isTextNode(node) && (isForward ? offset < node.data.length : offset > 0)) {\n        return node;\n      }\n      var nonEmptyBlocks = editor.schema.getNonEmptyElements();\n      if (node.nodeType === 1) {\n        node = global$1.getNode(node, offset);\n      }\n      var walker = new global$2(node, root);\n      if (isForward) {\n        if (isBogusBr(editor.dom, node)) {\n          walker.next();\n        }\n      }\n      while (node = walker[isForward ? 'next' : 'prev2']()) {\n        if (node.nodeName === 'LI' && !node.hasChildNodes()) {\n          return node;\n        }\n        if (nonEmptyBlocks[node.nodeName]) {\n          return node;\n        }\n        if (isTextNode(node) && node.data.length > 0) {\n          return node;\n        }\n      }\n    };\n    var hasOnlyOneBlockChild = function (dom, elm) {\n      var childNodes = elm.childNodes;\n      return childNodes.length === 1 && !isListNode(childNodes[0]) && dom.isBlock(childNodes[0]);\n    };\n    var unwrapSingleBlockChild = function (dom, elm) {\n      if (hasOnlyOneBlockChild(dom, elm)) {\n        dom.remove(elm.firstChild, true);\n      }\n    };\n    var moveChildren = function (dom, fromElm, toElm) {\n      var node;\n      var targetElm = hasOnlyOneBlockChild(dom, toElm) ? toElm.firstChild : toElm;\n      unwrapSingleBlockChild(dom, fromElm);\n      if (!isEmpty$1(dom, fromElm, true)) {\n        while (node = fromElm.firstChild) {\n          targetElm.appendChild(node);\n        }\n      }\n    };\n    var mergeLiElements = function (dom, fromElm, toElm) {\n      var listNode;\n      var ul = fromElm.parentNode;\n      if (!isChildOfBody(dom, fromElm) || !isChildOfBody(dom, toElm)) {\n        return;\n      }\n      if (isListNode(toElm.lastChild)) {\n        listNode = toElm.lastChild;\n      }\n      if (ul === toElm.lastChild) {\n        if (isBr(ul.previousSibling)) {\n          dom.remove(ul.previousSibling);\n        }\n      }\n      var node = toElm.lastChild;\n      if (node && isBr(node) && fromElm.hasChildNodes()) {\n        dom.remove(node);\n      }\n      if (isEmpty$1(dom, toElm, true)) {\n        dom.$(toElm).empty();\n      }\n      moveChildren(dom, fromElm, toElm);\n      if (listNode) {\n        toElm.appendChild(listNode);\n      }\n      var contains = contains$1(SugarElement.fromDom(toElm), SugarElement.fromDom(fromElm));\n      var nestedLists = contains ? dom.getParents(fromElm, isListNode, toElm) : [];\n      dom.remove(fromElm);\n      each(nestedLists, function (list) {\n        if (isEmpty$1(dom, list) && list !== dom.getRoot()) {\n          dom.remove(list);\n        }\n      });\n    };\n    var mergeIntoEmptyLi = function (editor, fromLi, toLi) {\n      editor.dom.$(toLi).empty();\n      mergeLiElements(editor.dom, fromLi, toLi);\n      editor.selection.setCursorLocation(toLi, 0);\n    };\n    var mergeForward = function (editor, rng, fromLi, toLi) {\n      var dom = editor.dom;\n      if (dom.isEmpty(toLi)) {\n        mergeIntoEmptyLi(editor, fromLi, toLi);\n      } else {\n        var bookmark = createBookmark(rng);\n        mergeLiElements(dom, fromLi, toLi);\n        editor.selection.setRng(resolveBookmark(bookmark));\n      }\n    };\n    var mergeBackward = function (editor, rng, fromLi, toLi) {\n      var bookmark = createBookmark(rng);\n      mergeLiElements(editor.dom, fromLi, toLi);\n      var resolvedBookmark = resolveBookmark(bookmark);\n      editor.selection.setRng(resolvedBookmark);\n    };\n    var backspaceDeleteFromListToListCaret = function (editor, isForward) {\n      var dom = editor.dom, selection = editor.selection;\n      var selectionStartElm = selection.getStart();\n      var root = getClosestListRootElm(editor, selectionStartElm);\n      var li = dom.getParent(selection.getStart(), 'LI', root);\n      if (li) {\n        var ul = li.parentNode;\n        if (ul === editor.getBody() && isEmpty$1(dom, ul)) {\n          return true;\n        }\n        var rng_1 = normalizeRange(selection.getRng());\n        var otherLi_1 = dom.getParent(findNextCaretContainer(editor, rng_1, isForward, root), 'LI', root);\n        if (otherLi_1 && otherLi_1 !== li) {\n          editor.undoManager.transact(function () {\n            if (isForward) {\n              mergeForward(editor, rng_1, otherLi_1, li);\n            } else {\n              if (isFirstChild(li)) {\n                outdentListSelection(editor);\n              } else {\n                mergeBackward(editor, rng_1, li, otherLi_1);\n              }\n            }\n          });\n          return true;\n        } else if (!otherLi_1) {\n          if (!isForward && rng_1.startOffset === 0 && rng_1.endOffset === 0) {\n            editor.undoManager.transact(function () {\n              flattenListSelection(editor);\n            });\n            return true;\n          }\n        }\n      }\n      return false;\n    };\n    var removeBlock = function (dom, block, root) {\n      var parentBlock = dom.getParent(block.parentNode, dom.isBlock, root);\n      dom.remove(block);\n      if (parentBlock && dom.isEmpty(parentBlock)) {\n        dom.remove(parentBlock);\n      }\n    };\n    var backspaceDeleteIntoListCaret = function (editor, isForward) {\n      var dom = editor.dom;\n      var selectionStartElm = editor.selection.getStart();\n      var root = getClosestListRootElm(editor, selectionStartElm);\n      var block = dom.getParent(selectionStartElm, dom.isBlock, root);\n      if (block && dom.isEmpty(block)) {\n        var rng = normalizeRange(editor.selection.getRng());\n        var otherLi_2 = dom.getParent(findNextCaretContainer(editor, rng, isForward, root), 'LI', root);\n        if (otherLi_2) {\n          editor.undoManager.transact(function () {\n            removeBlock(dom, block, root);\n            mergeWithAdjacentLists(dom, otherLi_2.parentNode);\n            editor.selection.select(otherLi_2, true);\n            editor.selection.collapse(isForward);\n          });\n          return true;\n        }\n      }\n      return false;\n    };\n    var backspaceDeleteCaret = function (editor, isForward) {\n      return backspaceDeleteFromListToListCaret(editor, isForward) || backspaceDeleteIntoListCaret(editor, isForward);\n    };\n    var backspaceDeleteRange = function (editor) {\n      var selectionStartElm = editor.selection.getStart();\n      var root = getClosestListRootElm(editor, selectionStartElm);\n      var startListParent = editor.dom.getParent(selectionStartElm, 'LI,DT,DD', root);\n      if (startListParent || getSelectedListItems(editor).length > 0) {\n        editor.undoManager.transact(function () {\n          editor.execCommand('Delete');\n          normalizeLists(editor.dom, editor.getBody());\n        });\n        return true;\n      }\n      return false;\n    };\n    var backspaceDelete = function (editor, isForward) {\n      return editor.selection.isCollapsed() ? backspaceDeleteCaret(editor, isForward) : backspaceDeleteRange(editor);\n    };\n    var setup = function (editor) {\n      editor.on('keydown', function (e) {\n        if (e.keyCode === global$3.BACKSPACE) {\n          if (backspaceDelete(editor, false)) {\n            e.preventDefault();\n          }\n        } else if (e.keyCode === global$3.DELETE) {\n          if (backspaceDelete(editor, true)) {\n            e.preventDefault();\n          }\n        }\n      });\n    };\n\n    var get$1 = function (editor) {\n      return {\n        backspaceDelete: function (isForward) {\n          backspaceDelete(editor, isForward);\n        }\n      };\n    };\n\n    var updateList$1 = function (editor, update) {\n      var parentList = getParentList(editor);\n      editor.undoManager.transact(function () {\n        if (isObject(update.styles)) {\n          editor.dom.setStyles(parentList, update.styles);\n        }\n        if (isObject(update.attrs)) {\n          each$1(update.attrs, function (v, k) {\n            return editor.dom.setAttrib(parentList, k, v);\n          });\n        }\n      });\n    };\n\n    var parseAlphabeticBase26 = function (str) {\n      var chars = reverse(trim(str).split(''));\n      var values = map(chars, function (char, i) {\n        var charValue = char.toUpperCase().charCodeAt(0) - 'A'.charCodeAt(0) + 1;\n        return Math.pow(26, i) * charValue;\n      });\n      return foldl(values, function (sum, v) {\n        return sum + v;\n      }, 0);\n    };\n    var composeAlphabeticBase26 = function (value) {\n      value--;\n      if (value < 0) {\n        return '';\n      } else {\n        var remainder = value % 26;\n        var quotient = Math.floor(value / 26);\n        var rest = composeAlphabeticBase26(quotient);\n        var char = String.fromCharCode('A'.charCodeAt(0) + remainder);\n        return rest + char;\n      }\n    };\n    var isUppercase = function (str) {\n      return /^[A-Z]+$/.test(str);\n    };\n    var isLowercase = function (str) {\n      return /^[a-z]+$/.test(str);\n    };\n    var isNumeric = function (str) {\n      return /^[0-9]+$/.test(str);\n    };\n    var deduceListType = function (start) {\n      if (isNumeric(start)) {\n        return 2;\n      } else if (isUppercase(start)) {\n        return 0;\n      } else if (isLowercase(start)) {\n        return 1;\n      } else if (isEmpty(start)) {\n        return 3;\n      } else {\n        return 4;\n      }\n    };\n    var parseStartValue = function (start) {\n      switch (deduceListType(start)) {\n      case 2:\n        return Optional.some({\n          listStyleType: Optional.none(),\n          start: start\n        });\n      case 0:\n        return Optional.some({\n          listStyleType: Optional.some('upper-alpha'),\n          start: parseAlphabeticBase26(start).toString()\n        });\n      case 1:\n        return Optional.some({\n          listStyleType: Optional.some('lower-alpha'),\n          start: parseAlphabeticBase26(start).toString()\n        });\n      case 3:\n        return Optional.some({\n          listStyleType: Optional.none(),\n          start: ''\n        });\n      case 4:\n        return Optional.none();\n      }\n    };\n    var parseDetail = function (detail) {\n      var start = parseInt(detail.start, 10);\n      if (detail.listStyleType.is('upper-alpha')) {\n        return composeAlphabeticBase26(start);\n      } else if (detail.listStyleType.is('lower-alpha')) {\n        return composeAlphabeticBase26(start).toLowerCase();\n      } else {\n        return detail.start;\n      }\n    };\n\n    var open = function (editor) {\n      var currentList = getParentList(editor);\n      if (!isOlNode(currentList)) {\n        return;\n      }\n      editor.windowManager.open({\n        title: 'List Properties',\n        body: {\n          type: 'panel',\n          items: [{\n              type: 'input',\n              name: 'start',\n              label: 'Start list at number',\n              inputMode: 'numeric'\n            }]\n        },\n        initialData: {\n          start: parseDetail({\n            start: editor.dom.getAttrib(currentList, 'start', '1'),\n            listStyleType: Optional.some(editor.dom.getStyle(currentList, 'list-style-type'))\n          })\n        },\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        onSubmit: function (api) {\n          var data = api.getData();\n          parseStartValue(data.start).each(function (detail) {\n            editor.execCommand('mceListUpdate', false, {\n              attrs: { start: detail.start === '1' ? '' : detail.start },\n              styles: { 'list-style-type': detail.listStyleType.getOr('') }\n            });\n          });\n          api.close();\n        }\n      });\n    };\n\n    var queryListCommandState = function (editor, listName) {\n      return function () {\n        var parentList = getParentList(editor);\n        return parentList && parentList.nodeName === listName;\n      };\n    };\n    var registerDialog = function (editor) {\n      editor.addCommand('mceListProps', function () {\n        open(editor);\n      });\n    };\n    var register = function (editor) {\n      editor.on('BeforeExecCommand', function (e) {\n        var cmd = e.command.toLowerCase();\n        if (cmd === 'indent') {\n          indentListSelection(editor);\n        } else if (cmd === 'outdent') {\n          outdentListSelection(editor);\n        }\n      });\n      editor.addCommand('InsertUnorderedList', function (ui, detail) {\n        toggleList(editor, 'UL', detail);\n      });\n      editor.addCommand('InsertOrderedList', function (ui, detail) {\n        toggleList(editor, 'OL', detail);\n      });\n      editor.addCommand('InsertDefinitionList', function (ui, detail) {\n        toggleList(editor, 'DL', detail);\n      });\n      editor.addCommand('RemoveList', function () {\n        flattenListSelection(editor);\n      });\n      registerDialog(editor);\n      editor.addCommand('mceListUpdate', function (ui, detail) {\n        if (isObject(detail)) {\n          updateList$1(editor, detail);\n        }\n      });\n      editor.addQueryStateHandler('InsertUnorderedList', queryListCommandState(editor, 'UL'));\n      editor.addQueryStateHandler('InsertOrderedList', queryListCommandState(editor, 'OL'));\n      editor.addQueryStateHandler('InsertDefinitionList', queryListCommandState(editor, 'DL'));\n    };\n\n    var setupTabKey = function (editor) {\n      editor.on('keydown', function (e) {\n        if (e.keyCode !== global$3.TAB || global$3.metaKeyPressed(e)) {\n          return;\n        }\n        editor.undoManager.transact(function () {\n          if (e.shiftKey ? outdentListSelection(editor) : indentListSelection(editor)) {\n            e.preventDefault();\n          }\n        });\n      });\n    };\n    var setup$1 = function (editor) {\n      if (shouldIndentOnTab(editor)) {\n        setupTabKey(editor);\n      }\n      setup(editor);\n    };\n\n    var register$1 = function (editor) {\n      var exec = function (command) {\n        return function () {\n          return editor.execCommand(command);\n        };\n      };\n      if (!editor.hasPlugin('advlist')) {\n        editor.ui.registry.addToggleButton('numlist', {\n          icon: 'ordered-list',\n          active: false,\n          tooltip: 'Numbered list',\n          onAction: exec('InsertOrderedList'),\n          onSetup: function (api) {\n            return listState(editor, 'OL', api.setActive);\n          }\n        });\n        editor.ui.registry.addToggleButton('bullist', {\n          icon: 'unordered-list',\n          active: false,\n          tooltip: 'Bullet list',\n          onAction: exec('InsertUnorderedList'),\n          onSetup: function (api) {\n            return listState(editor, 'UL', api.setActive);\n          }\n        });\n      }\n    };\n\n    var register$2 = function (editor) {\n      var listProperties = {\n        text: 'List properties...',\n        icon: 'ordered-list',\n        onAction: function () {\n          return editor.execCommand('mceListProps');\n        },\n        onSetup: function (api) {\n          return listState(editor, 'OL', function (active) {\n            return api.setDisabled(!active);\n          });\n        }\n      };\n      editor.ui.registry.addMenuItem('listprops', listProperties);\n      editor.ui.registry.addContextMenu('lists', {\n        update: function (node) {\n          var parentList = getParentList(editor, node);\n          return isOlNode(parentList) ? ['listprops'] : [];\n        }\n      });\n    };\n\n    function Plugin () {\n      global.add('lists', function (editor) {\n        if (editor.hasPlugin('rtc', true) === false) {\n          setup$1(editor);\n          register(editor);\n        } else {\n          registerDialog(editor);\n        }\n        register$1(editor);\n        register$2(editor);\n        return get$1(editor);\n      });\n    }\n\n    Plugin();\n\n}());\n"]}