{"version":3,"sources":["emoticons/plugin.min.js"],"names":["u","t","n","e","r","tinymce","util","Tools","resolve","o","Object","assign","arguments","length","prototype","hasOwnProperty","call","apply","this","m","get","set","a","c","Error","i","l","s","f","g","isNone","fold","is","isSome","getOr","getOrThunk","getOrDie","getOrNull","getOrUndefined","undefined","or","orThunk","map","each","bind","exists","forall","filter","equals","equals_","toArray","toString","d","h","some","none","from","y","keys","v","p","w","indexOf","O","C","j","k","_","symbols","people","animals_and_nature","food_and_drink","activity","travel_and_places","objects","flags","user","A","T","getParam","keywords","category","b","P","title","char","substr","replace","concat","push","on","load","then","console","log","listCategories","hasLoaded","waitForLoad","setInterval","clearInterval","listAll","listCategory","x","toLowerCase","value","text","icon","D","L","pattern","results","getData","setData","cancel","clearTimeout","throttle","setTimeout","label","type","name","size","body","tabs","Array","items","initialData","onTabChange","newTabName","onChange","onAction","insertContent","close","buttons","primary","windowManager","open","focus","block","redial","unblock","level","add","suffix","ui","registry","addButton","tooltip","addMenuItem","addAutocompleter","ch","columns","minChars","fetch","selection","setRng","hide","parser","addAttributeFilter","attr"],"mappings":"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","file":"plugin.min.js","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.8.2 (2021-06-23)\n */\n!function(){\"use strict\";var u,t,n,e,r=tinymce.util.Tools.resolve(\"tinymce.PluginManager\"),o=function(){return(o=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)},m=function(t){var n=t;return{get:function(){return n},set:function(t){n=t}}},a=Object.prototype.hasOwnProperty,c=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(0===t.length)throw new Error(\"Can't merge zero objects\");for(var e={},r=0;r<t.length;r++){var o=t[r];for(var i in o)a.call(o,i)&&(e[i]=u(e[i],o[i]))}return e},i=function(t){return function(){return t}},l=i(!(u=function(t,n){return n})),s=i(!0),f=function(){return g},g=(t=function(t){return t.isNone()},{fold:function(t,n){return t()},is:l,isSome:l,isNone:s,getOr:e=function(t){return t},getOrThunk:n=function(t){return t()},getOrDie:function(t){throw new Error(t||\"error: getOrDie called on none.\")},getOrNull:i(null),getOrUndefined:i(undefined),or:e,orThunk:n,map:f,each:function(){},bind:f,exists:l,forall:s,filter:f,equals:t,equals_:t,toArray:function(){return[]},toString:i(\"none()\")}),d=function(e){var t=i(e),n=function(){return o},r=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:s,isNone:l,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return d(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?o:g},toArray:function(){return[e]},toString:function(){return\"some(\"+e+\")\"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(l,function(t){return n(e,t)})}};return o},h={some:d,none:f,from:function(t){return null===t||t===undefined?g:d(t)}},y=Object.keys,v=Object.hasOwnProperty,p=function(t,n){for(var e=y(t),r=0,o=e.length;r<o;r++){var i=e[r];n(t[i],i)}},b=function(t,r){var o={};return p(t,function(t,n){var e=r(t,n);o[e.k]=e.v}),o},w=function(t,n){return-1!==t.indexOf(n)},O=tinymce.util.Tools.resolve(\"tinymce.Resource\"),C=tinymce.util.Tools.resolve(\"tinymce.util.Delay\"),j=tinymce.util.Tools.resolve(\"tinymce.util.Promise\"),k=\"All\",_={symbols:\"Symbols\",people:\"People\",animals_and_nature:\"Animals and Nature\",food_and_drink:\"Food and Drink\",activity:\"Activity\",travel_and_places:\"Travel and Places\",objects:\"Objects\",flags:\"Flags\",user:\"User Defined\"},A=function(t,n){return e=t,r=n,v.call(e,r)?t[n]:n;var e,r},T=function(t){var e,n=t.getParam(\"emoticons_append\",{},\"object\");return e=function(t){return o({keywords:[],category:\"user\"},t)},b(n,function(t,n){return{k:n,v:e(t,n)}})},P=function(e,o,t){var r=m(h.none()),n=m(h.none()),f=e.getParam(\"emoticons_images_url\",\"https://twemoji.maxcdn.com/v/13.0.1/72x72/\",\"string\"),i=function(t){var l={},s=[];p(t,function(t,n){var e,r,o,i,u,a={title:n,keywords:t.keywords,\"char\":(r=(e=t)[\"char\"],u=0,i=\"<img\",(o=r).length>=i.length&&o.substr(u,u+i.length)===i?e[\"char\"].replace(/src=\"([^\"]+)\"/,function(t,n){return'src=\"'+f+n+'\"'}):e[\"char\"]),category:A(_,t.category)},c=l[a.category]!==undefined?l[a.category]:[];l[a.category]=c.concat([a]),s.push(a)}),r.set(h.some(l)),n.set(h.some(s))};e.on(\"init\",function(){O.load(t,o).then(function(t){var n=T(e);i(c(t,n))},function(t){console.log(\"Failed to load emoticons: \"+t),r.set(h.some({})),n.set(h.some([]))})});var u=function(){return n.get().getOr([])},a=function(){return r.get().isSome()&&n.get().isSome()};return{listCategories:function(){return[k].concat(y(r.get().getOr({})))},hasLoaded:a,waitForLoad:function(){return a()?j.resolve(!0):new j(function(t,n){var e=15,r=C.setInterval(function(){a()?(C.clearInterval(r),t(!0)):--e<0&&(console.log(\"Could not load emojis from url: \"+o),C.clearInterval(r),n(!1))},100)})},listAll:u,listCategory:function(n){return n===k?u():r.get().bind(function(t){return h.from(t[n])}).getOr([])}}},x=function(t,n,e){for(var r=[],o=n.toLowerCase(),i=e.fold(function(){return l},function(n){return function(t){return n<=t}}),u=0;u<t.length&&(0!==n.length&&!function(t,n){return w(t.title.toLowerCase(),n)||function(t,n){for(var e=0,r=t.length;e<r;e++){if(n(t[e],e))return!0}return!1}(t.keywords,function(t){return w(t.toLowerCase(),n)})}(t[u],o)||(r.push({value:t[u][\"char\"],text:t[u].title,icon:t[u][\"char\"]}),!i(r.length)));u++);return r},D=\"pattern\",L=function(o,u){var e,r,i,t={pattern:\"\",results:x(u.listAll(),\"\",h.some(300))},a=m(k),c=(e=function(t){var n,e,r,o,i;e=(n=t).getData(),r=a.get(),o=u.listCategory(r),i=x(o,e[D],r===k?h.some(300):h.none()),n.setData({results:i})},r=200,i=null,{cancel:function(){null!==i&&(clearTimeout(i),i=null)},throttle:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];null!==i&&clearTimeout(i),i=setTimeout(function(){e.apply(null,t),i=null},r)}}),n={label:\"Search\",type:\"input\",name:D},l={type:\"collection\",name:\"results\"},s=function(){return{title:\"Emoticons\",size:\"normal\",body:{type:\"tabpanel\",tabs:function(t,n){for(var e=t.length,r=new Array(e),o=0;o<e;o++){var i=t[o];r[o]=n(i,o)}return r}(u.listCategories(),function(t){return{title:t,name:t,items:[n,l]}})},initialData:t,onTabChange:function(t,n){a.set(n.newTabName),c.throttle(t)},onChange:c.throttle,onAction:function(t,n){var e,r;\"results\"===n.name&&(e=o,r=n.value,e.insertContent(r),t.close())},buttons:[{type:\"cancel\",text:\"Close\",primary:!0}]}},f=o.windowManager.open(s());f.focus(D),u.hasLoaded()||(f.block(\"Loading emoticons...\"),u.waitForLoad().then(function(){f.redial(s()),c.throttle(f),f.focus(D),f.unblock()})[\"catch\"](function(t){f.redial({title:\"Emoticons\",body:{type:\"panel\",items:[{type:\"alertbanner\",level:\"error\",icon:\"warning\",text:\"<p>Could not load emoticons</p>\"}]},buttons:[{type:\"cancel\",text:\"Close\",primary:!0}],initialData:{pattern:\"\",results:[]}}),f.focus(D),f.unblock()}))};r.add(\"emoticons\",function(t,n){var e,r,o,i,u,a,c,l,s,f=(r=n,o=(e=t).getParam(\"emoticons_database\",\"emojis\",\"string\"),e.getParam(\"emoticons_database_url\",r+\"/js/\"+o+e.suffix+\".js\",\"string\")),m=t.getParam(\"emoticons_database_id\",\"tinymce.plugins.emoticons\",\"string\"),g=P(t,f,m);u=g,a=function(){return L(i,u)},(i=t).ui.registry.addButton(\"emoticons\",{tooltip:\"Emoticons\",icon:\"emoji\",onAction:a}),i.ui.registry.addMenuItem(\"emoticons\",{text:\"Emoticons...\",icon:\"emoji\",onAction:a}),l=g,(c=t).ui.registry.addAutocompleter(\"emoticons\",{ch:\":\",columns:\"auto\",minChars:2,fetch:function(n,e){return l.waitForLoad().then(function(){var t=l.listAll();return x(t,n,h.some(e))})},onAction:function(t,n,e){c.selection.setRng(n),c.insertContent(e),t.hide()}}),(s=t).on(\"PreInit\",function(){s.parser.addAttributeFilter(\"data-emoticon\",function(t){!function(t,n){for(var e=0,r=t.length;e<r;e++){n(t[e],e)}}(t,function(t){t.attr(\"data-mce-resize\",\"false\"),t.attr(\"data-mce-placeholder\",\"1\")})})})})}();"]}