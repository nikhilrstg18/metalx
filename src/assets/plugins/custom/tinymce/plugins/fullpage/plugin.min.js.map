{"version":3,"sources":["fullpage/plugin.min.js"],"names":["s","e","t","get","set","tinymce","util","Tools","resolve","u","Object","assign","n","l","arguments","length","i","prototype","hasOwnProperty","call","apply","this","p","m","f","h","getParam","g","y","v","validate","root_name","parse","format","_","each","b","replace","toLowerCase","k","add","o","r","a","c","addCommand","attr","fontface","fontsize","firstChild","type","xml_pi","exec","value","docencoding","getAll","doctype","title","langcode","stylesheets","push","langdir","style","visited_color","link_color","active_color","d","keywords","description","robots","author","windowManager","open","size","body","items","name","label","buttons","text","primary","initialData","onSubmit","getData","dom","undefined","insert","append","remove","substring","shortEnded","empty","split","rel","href","setAttribs","getBody","dir","vLink","link","aLink","indent","indent_before","indent_after","serialize","indexOf","extend","close","ui","registry","addButton","tooltip","icon","onAction","execCommand","addMenuItem","on","selection","content","escape","source_view","trim","getDoc","getElementsByTagName","id","appendChild","document","createTextNode","getAttribute","parentNode","removeChild","x","unescape","C"],"mappings":"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","file":"plugin.min.js","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.8.2 (2021-06-23)\n */\n!function(){\"use strict\";var s=function(e){var t=e;return{get:function(){return t},set:function(e){t=e}}},e=tinymce.util.Tools.resolve(\"tinymce.PluginManager\"),u=function(){return(u=Object.assign||function(e){for(var t,n=1,l=arguments.length;n<l;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},p=tinymce.util.Tools.resolve(\"tinymce.util.Tools\"),t=tinymce.util.Tools.resolve(\"tinymce.html.DomParser\"),m=tinymce.util.Tools.resolve(\"tinymce.html.Node\"),f=tinymce.util.Tools.resolve(\"tinymce.html.Serializer\"),h=function(e){return e.getParam(\"fullpage_hide_in_source_view\")},i=function(e){return e.getParam(\"fullpage_default_encoding\")},g=function(e){return e.getParam(\"fullpage_default_font_family\")},y=function(e){return e.getParam(\"fullpage_default_font_size\")},v=function(e){return t({validate:!1,root_name:\"#document\"}).parse(e,{format:\"xhtml\"})},d=function(l,i){var e,t,n,o,r,a,c,s=(e=l,t=i.get(),r=v(t),c=function(e,t){return e.attr(t)||\"\"},(a={}).fontface=g(e),a.fontsize=y(e),7===(n=r.firstChild).type&&(a.xml_pi=!0,(o=/encoding=\"([^\"]+)\"/.exec(n.value))&&(a.docencoding=o[1])),(n=r.getAll(\"#doctype\")[0])&&(a.doctype=\"<!DOCTYPE\"+n.value+\">\"),(n=r.getAll(\"title\")[0])&&n.firstChild&&(a.title=n.firstChild.value),p.each(r.getAll(\"meta\"),function(e){var t,n=e.attr(\"name\"),l=e.attr(\"http-equiv\");n?a[n.toLowerCase()]=e.attr(\"content\"):\"Content-Type\"===l&&(t=/charset\\s*=\\s*(.*)\\s*/gi.exec(e.attr(\"content\")))&&(a.docencoding=t[1])}),(n=r.getAll(\"html\")[0])&&(a.langcode=c(n,\"lang\")||c(n,\"xml:lang\")),a.stylesheets=[],p.each(r.getAll(\"link\"),function(e){\"stylesheet\"===e.attr(\"rel\")&&a.stylesheets.push(e.attr(\"href\"))}),(n=r.getAll(\"body\")[0])&&(a.langdir=c(n,\"dir\"),a.style=c(n,\"style\"),a.visited_color=c(n,\"vlink\"),a.link_color=c(n,\"link\"),a.active_color=c(n,\"alink\")),a),d=u(u({},{title:\"\",keywords:\"\",description:\"\",robots:\"\",author:\"\",docencoding:\"\"}),s);l.windowManager.open({title:\"Metadata and Document Properties\",size:\"normal\",body:{type:\"panel\",items:[{name:\"title\",type:\"input\",label:\"Title\"},{name:\"keywords\",type:\"input\",label:\"Keywords\"},{name:\"description\",type:\"input\",label:\"Description\"},{name:\"robots\",type:\"input\",label:\"Robots\"},{name:\"author\",type:\"input\",label:\"Author\"},{name:\"docencoding\",type:\"input\",label:\"Encoding\"}]},buttons:[{type:\"cancel\",name:\"cancel\",text:\"Cancel\"},{type:\"submit\",name:\"save\",text:\"Save\",primary:!0}],initialData:d,onSubmit:function(e){var t=e.getData(),n=function(e,o,t){var r,n,l=e.dom,i=function(e,t,n){e.attr(t,n||undefined)},a=function(e){s.firstChild?s.insert(e,s.firstChild):s.append(e)},c=v(t),s=c.getAll(\"head\")[0];s||(r=c.getAll(\"html\")[0],s=new m(\"head\",1),r.firstChild?r.insert(s,r.firstChild,!0):r.append(s)),r=c.firstChild,o.xml_pi?(n='version=\"1.0\"',o.docencoding&&(n+=' encoding=\"'+o.docencoding+'\"'),7!==r.type&&(r=new m(\"xml\",7),c.insert(r,c.firstChild,!0)),r.value=n):r&&7===r.type&&r.remove(),r=c.getAll(\"#doctype\")[0],o.doctype?(r||(r=new m(\"#doctype\",10),o.xml_pi?c.insert(r,c.firstChild):a(r)),r.value=o.doctype.substring(9,o.doctype.length-1)):r&&r.remove(),r=null,p.each(c.getAll(\"meta\"),function(e){\"Content-Type\"===e.attr(\"http-equiv\")&&(r=e)}),o.docencoding?(r||((r=new m(\"meta\",1)).attr(\"http-equiv\",\"Content-Type\"),r.shortEnded=!0,a(r)),r.attr(\"content\",\"text/html; charset=\"+o.docencoding)):r&&r.remove(),r=c.getAll(\"title\")[0],o.title?(r?r.empty():(r=new m(\"title\",1),a(r)),r.append(new m(\"#text\",3)).value=o.title):r&&r.remove(),p.each(\"keywords,description,author,copyright,robots\".split(\",\"),function(e){for(var t,n=c.getAll(\"meta\"),l=o[e],i=0;i<n.length;i++)if((t=n[i]).attr(\"name\")===e)return void(l?t.attr(\"content\",l):t.remove());l&&((r=new m(\"meta\",1)).attr(\"name\",e),r.attr(\"content\",l),r.shortEnded=!0,a(r))});var d={};p.each(c.getAll(\"link\"),function(e){\"stylesheet\"===e.attr(\"rel\")&&(d[e.attr(\"href\")]=e)}),p.each(o.stylesheets,function(e){d[e]||((r=new m(\"link\",1)).attr({rel:\"stylesheet\",text:\"text/css\",href:e}),r.shortEnded=!0,a(r)),delete d[e]}),p.each(d,function(e){e.remove()}),(r=c.getAll(\"body\")[0])&&(i(r,\"dir\",o.langdir),i(r,\"style\",o.style),i(r,\"vlink\",o.visited_color),i(r,\"link\",o.link_color),i(r,\"alink\",o.active_color),l.setAttribs(e.getBody(),{style:o.style,dir:o.dir,vLink:o.visited_color,link:o.link_color,aLink:o.active_color})),(r=c.getAll(\"html\")[0])&&(i(r,\"lang\",o.langcode),i(r,\"xml:lang\",o.langcode)),s.firstChild||s.remove();var u=f({validate:!1,indent:!0,indent_before:\"head,html,body,meta,title,script,link,style\",indent_after:\"head,html,body,meta,title,script,link,style\"}).serialize(c);return u.substring(0,u.indexOf(\"</body>\"))}(l,p.extend(s,t),i.get());i.set(n),e.close()}})},_=p.each,b=function(e){return e.replace(/<\\/?[A-Z]+/g,function(e){return e.toLowerCase()})},x=function(e,t,n,l){var i,o,r,a,c,s,d,u,m,f=\"\",g=e.dom;l.selection||(a=e.getParam(\"protect\"),c=l.content,p.each(a,function(e){c=c.replace(e,function(e){return\"\\x3c!--mce:protected \"+escape(e)+\"--\\x3e\"})}),r=c,\"raw\"===l.format&&t.get()||l.source_view&&h(e)||(0!==r.length||l.source_view||(r=p.trim(t.get())+\"\\n\"+p.trim(r)+\"\\n\"+p.trim(n.get())),-1!==(i=(r=r.replace(/<(\\/?)BODY/gi,\"<$1body\")).indexOf(\"<body\"))?(i=r.indexOf(\">\",i),t.set(b(r.substring(0,i+1))),-1===(o=r.indexOf(\"</body\",i))&&(o=r.length),l.content=p.trim(r.substring(i+1,o)),n.set(b(r.substring(o)))):(t.set(k(e)),n.set(\"\\n</body>\\n</html>\")),s=v(t.get()),_(s.getAll(\"style\"),function(e){e.firstChild&&(f+=e.firstChild.value)}),(d=s.getAll(\"body\")[0])&&g.setAttribs(e.getBody(),{style:d.attr(\"style\")||\"\",dir:d.attr(\"dir\")||\"\",vLink:d.attr(\"vlink\")||\"\",link:d.attr(\"link\")||\"\",aLink:d.attr(\"alink\")||\"\"}),g.remove(\"fullpage_styles\"),u=e.getDoc().getElementsByTagName(\"head\")[0],f&&g.add(u,\"style\",{id:\"fullpage_styles\"}).appendChild(document.createTextNode(f)),m={},p.each(u.getElementsByTagName(\"link\"),function(e){\"stylesheet\"===e.rel&&e.getAttribute(\"data-mce-fullpage\")&&(m[e.href]=e)}),p.each(s.getAll(\"link\"),function(e){var t=e.attr(\"href\");if(!t)return!0;m[t]||\"stylesheet\"!==e.attr(\"rel\")||g.add(u,\"link\",{rel:\"stylesheet\",text:\"text/css\",href:t,\"data-mce-fullpage\":\"1\"}),delete m[t]}),p.each(m,function(e){e.parentNode.removeChild(e)})))},k=function(e){var t,n=\"\",l=\"\";return e.getParam(\"fullpage_default_xml_pi\")&&(n+='<?xml version=\"1.0\" encoding=\"'+(i(e)||\"ISO-8859-1\")+'\" ?>\\n'),n+=e.getParam(\"fullpage_default_doctype\",\"<!DOCTYPE html>\"),n+=\"\\n<html>\\n<head>\\n\",(t=e.getParam(\"fullpage_default_title\"))&&(n+=\"<title>\"+t+\"</title>\\n\"),(t=i(e))&&(n+='<meta http-equiv=\"Content-Type\" content=\"text/html; charset='+t+'\" />\\n'),(t=g(e))&&(l+=\"font-family: \"+t+\";\"),(t=y(e))&&(l+=\"font-size: \"+t+\";\"),(t=e.getParam(\"fullpage_default_text_color\"))&&(l+=\"color: \"+t+\";\"),n+=\"</head>\\n<body\"+(l?' style=\"'+l+'\"':\"\")+\">\\n\"},C=function(e,t,n,l){\"html\"!==l.format||l.selection||l.source_view&&h(e)||(l.content=(p.trim(t)+\"\\n\"+p.trim(l.content)+\"\\n\"+p.trim(n)).replace(/<!--mce:protected ([\\s\\S]*?)-->/g,function(e,t){return unescape(t)}))};e.add(\"fullpage\",function(e){var t,n,l,i,o,r,a=s(\"\"),c=s(\"\");n=a,(t=e).addCommand(\"mceFullPageProperties\",function(){d(t,n)}),(l=e).ui.registry.addButton(\"fullpage\",{tooltip:\"Metadata and document properties\",icon:\"document-properties\",onAction:function(){l.execCommand(\"mceFullPageProperties\")}}),l.ui.registry.addMenuItem(\"fullpage\",{text:\"Metadata and document properties\",icon:\"document-properties\",onAction:function(){l.execCommand(\"mceFullPageProperties\")}}),o=a,r=c,(i=e).on(\"BeforeSetContent\",function(e){x(i,o,r,e)}),i.on(\"GetContent\",function(e){C(i,o.get(),r.get(),e)})})}();"]}